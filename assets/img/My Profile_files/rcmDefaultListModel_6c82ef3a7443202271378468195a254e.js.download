function RCMAbstractListModel(){}
RCMAbstractListModel.prototype=function(){return set(new EventTarget,{_init:function(a){"undefined"!=typeof a&&(this._dao=a,this._dao.addEventListener("dataAvailable",this),this._dao.addEventListener("listSizeChange",this),this._dao.addEventListener("dataChanged",this));this._numChildren=-1;this._list=[];this._nodeCache={}},getDao:function(){return this._dao},getData:function(a){this.dispatch("loadingData");if(this._dao&&0!=this._numChildren&&"undefined"==typeof this.getList()[a.startIndex])this._dao.fetchChildren(a.startIndex,a);
else{a.endIndex>this._numChildren&&!this._autoGrowListSize&&(a.endIndex=this._numChildren-1);if("undefined"!=typeof a.endIndex){var b=this.dataContigousTill(a.startIndex,a.endIndex);if(this._dao&&"undefined"==typeof this.getList()[b]&&b<a.endIndex){this._dao.fetchChildren(b,a);return}}("undefined"==typeof a.endIndex||b>=a.endIndex)&&this.dispatch("dataAvailable",{startIndex:a.startIndex,endIndex:a.endIndex})}},dataContigousTill:function(a,b){for(var c=a;this._list&&"undefined"!=typeof this._list[c]&&
!(c>=b);)c++;return c},populate:function(a,b,c){var d=a.startIndex,e=a.endIndex;if("undefined"==typeof d&&"undefined"==e)for(var f in a)"undefined"==typeof d&&(d=a[f]),"undefined"==typeof e&&(e=a[f]),a[f]>e&&(e=a[f]),a[f]<d&&(d=a[f]);f=this.dataContigousTill(d,e);f<e?this.getData({deferredStart:d,startIndex:f,endIndex:e,callback:b,scope:c}):(this.dispatch("dataAvailable",{startIndex:a.deferredStart,endIndex:e}),b.apply(c))},getNodeById:function(a){"string"!=typeof a&&(a=a.getNodeId());-1<a.indexOf(" ")&&
(a=escape(a));if(this._nodeCache[a])return this._list[this._nodeCache[a]];a=this.getNodeIndex(a);if(-1<a)return this._list[a]},getNodeIndex:function(a){"string"!=typeof a&&(a=a.getNodeId());if("undefined"==typeof this._nodeCache[a])for(var b=0;b<this._numChildren;b++)"undefined"!=typeof this._list[b]&&(this._nodeCache[this._list[b].getNodeId()]=b);return"undefined"!=typeof this._nodeCache[a]?this._nodeCache[a]:-1},getNumChildren:function(){return this._numChildren},setAutoGrowListSize:function(a){this._autoGrowListSize=
a},setNumChildren:function(a,b){a!=this._numChildren&&(this._numChildren=a,b||this.dispatch("listSizeChange",{newSize:a}))},getList:function(){return this._list},getFilteredList:function(a){a=a.toUpperCase();var b=this.getNumChildren(),c=[];if(a&&2<a.length)for(var d=0;d<b;d++){var e=this.getList()[d].label.toUpperCase();e&&-1<e.indexOf(a)&&c.push(this.getList()[d])}else c=this.getList();return c},addItem:function(a,b,c){if("undefined"==typeof b||null==b)b=this._numChildren;1==this._autoGrowListSize&&
b>=this._numChildren&&this.setNumChildren(b+1);"undefined"==typeof b||b>=this._numChildren?assert(!1,"[RCMAbstractListModel]:invalid position for data"):(this._list[b]?(this.removeItem(this._list[b],!0,!0),this.setNumChildren(this._numChildren+1,c),this._list.splice(b,0,a)):this._list[b]=a,this._nodeCache[a.getNodeId()]=b,1!=c&&this.dispatch("dataAvailable",{startIndex:b,endIndex:b}))},removeItem:function(a,b,c){var d=this.getNodeIndex(a);if(-1<d){this._list.splice(d,1);this.setNumChildren(this._numChildren-
1,b);delete this._nodeCache[a];if(!c)for(a=d;a<this._list.length;a++)this._list[a]&&(this._nodeCache[this._list[a].getNodeId()]=a);1!=b&&this.dispatch("dataRefreshed")}else assert(!1,"[RCMAbstractListModel]:cannot remove node as it does not exist in currentg list")},removeAll:function(){this._list=[];delete this._nodeCache;this._nodeCache={};this.setNumChildren(0);this.dispatch("dataRefreshed")},handleEvent:function(a){try{switch(a.type){case "dataAvailable":var b=a.endIndex;1==this._autoGrowListSize&&
b>=this._numChildren&&this.setNumChildren(b+1);for(var c=a.startIndex,d=0;c<=b;c++,d++)this.addItem(a.data[d],c,!0);"undefined"!=typeof a.referenceObj&&("undefined"==typeof a.referenceObj.deferredStart?this.dispatch("dataAvailable",{startIndex:a.startIndex,endIndex:b}):this.populate({startIndex:a.referenceObj.deferredStart,endIndex:a.referenceObj.endIndex},a.referenceObj.callback,a.referenceObj.scope));break;case "listSizeChange":this.setNumChildren(a.listSize);break;case "dataChanged":this.removeAll()}}catch(e){assert(!1,
"[RCMAbstractListModel]: caught exception : "+e)}},cleanup:function(){this._dao&&(this._dao.removeEventListener("dataAvailable",this),this._dao.removeEventListener("listSizeChange",this));delete this._numChildren;for(var a=0;a<this._list.length;a++)delete this._list[a];delete this._list;delete this._nodeCache}})}();function RCMListModel(a){this._init(a)}RCMListModel.prototype=function(){return set(new RCMAbstractListModel,{_init:function(a){RCMAbstractListModel.prototype._init.call(this,a)}})}();
function RCMSelectListModel(a){this._init(a)}
RCMSelectListModel.prototype=function(){return set(new RCMAbstractListModel,{_init:function(a){this._selectedIndices={};this._shiftSelect=!0;RCMAbstractListModel.prototype._init.call(this,a)},selectAll:function(a){if(0<this._numChildren&&this._numChildren!=this.dataContigousTill(0,this._numChildren))this.populate({startIndex:0,endIndex:this._numChildren},this.selectAll,this);else{this._selectAll=!0;for(var b=0,c=0,d=0;d<this._numChildren;d++)"undefined"!=typeof this._list[d]&&this._list[d].isEnabled()?
(this._list[d].select(a,!0),this._selectedIndices[d]=!0,c++):b<c?(this.dispatch("selectAction",{actionCommand:"selected",startNodeIndex:b,endNodeIndex:c-1}),c++,b=c):(b++,c++);b<c&&this.dispatch("selectAction",{actionCommand:"selected",startNodeIndex:b,endNodeIndex:c-1})}},getActiveNodeId:function(){return this._last},getSelectedNodes:function(){for(var a=[],b=0;b<this._numChildren;b++)"undefined"!=typeof this._list[b]&&this._list[b].isSelected()&&(a.push(this._list[b]),!this._selectedIndices||this._selectedIndices.length&&
0!=this._selectedIndices.length||(this._selectedIndices[b]=!0));return a},selectNone:function(a){if(0<this._numChildren&&this._numChildren!=this.dataContigousTill(0,this._numChildren))this.populate({startIndex:0,endIndex:this._numChildren},this.selectNone,this);else{this._selectAll=!1;for(var b=0;b<this._numChildren;b++)"undefined"!=typeof this._list[b]&&this._list[b].deSelect(a,!0),delete this._selectedIndices[b];0<this._numChildren&&this.dispatch("selectAction",{actionCommand:"deSelected",startNodeIndex:0,
endNodeIndex:this._numChildren-1})}},addItem:function(a,b,c){(1==this._selectedIndices[b]||this._selectAll)&&a.select(!0);RCMAbstractListModel.prototype.addItem.call(this,a,b,c);a.addEventListener("selectAction",this);a.addEventListener("change",this)},removeItem:function(a,b,c){this.getNodeById(a).removeEventListener("selectAction",this);this.getNodeById(a).removeEventListener("change",this);RCMAbstractListModel.prototype.removeItem.call(this,a,b,c)},removeAll:function(){for(var a=0;a<this._numChildren;a++)this._list[a]&&
(this._list[a].removeEventListener("selectAction",this),this._list[a].removeEventListener("change",this));RCMAbstractListModel.prototype.removeAll.call(this)},setShiftSelect:function(a){this._shiftSelect=!!a},refreshIndicesAfterBatchSelect:function(){if(this._list)for(var a=0;a<=this._list.length;a++)this._list[a]&&this._list[a].isSelected()&&(this._selectedIndices[a]=!0)},handleEvent:function(a){switch(a.type){case "selectAction":if("undefined"==typeof this.getNodeById(a.nodeId))assert(!1,"[RCMSelectListModel]:node["+
a.nodeId+"] does not exist in list");else{if(this._shiftSelect&&a.originalEvent&&a.originalEvent.shiftKey){var b=this.getNodeIndex(this._last),c=this.getNodeIndex(a.nodeId);if(c<b)var d=c,c=b,b=d;if("selected"==a.actionCommand)for(d=b;d<=c;d++)this._list[d]&&this._list[d].isEnabled()&&(this._list[d].select(null,!0),this._selectedIndices[d]=!0);else if("deSelected"==a.actionCommand)for(d=b;d<=c;d++)this._list[d]&&this._list[d].deSelect(null,!0),delete this._selectedIndices[d];a.batched||this.dispatch("selectAction",
{actionCommand:a.actionCommand,startNodeIndex:b,endNodeIndex:c});a.originalEvent.stopPropagation&&a.originalEvent.stopPropagation()}else this._selectAll?"deSelected"==a.actionCommand&&delete this._selectedIndices[this.getNodeIndex(a.nodeId)]:"selected"==a.actionCommand?this._selectedIndices[this.getNodeIndex(a.nodeId)]=!0:"deSelected"==a.actionCommand&&delete this._selectedIndices[this.getNodeIndex(a.nodeId)],a.batched||this.dispatch("selectAction",{actionCommand:a.actionCommand,nodeId:a.nodeId});
this._last=a.nodeId}}RCMAbstractListModel.prototype.handleEvent.call(this,a)},cleanup:function(){delete this._selectedIndices;for(var a=this._list.length,b=0;b<this._numChildren||b<a;b++)this._list[b]&&(this._list[b].removeEventListener("selectAction",this),this._list[b].removeEventListener("change",this));RCMAbstractListModel.prototype.cleanup.call(this)}})}();function RCMSingleSelectListModel(a){this.init(a)}
RCMSingleSelectListModel.prototype=function(){return set(new RCMSelectListModel,{init:function(a){RCMSelectListModel.prototype._init.call(this,a);this._shiftSelect=!1},setShiftSelect:function(){assert(!1,"[RCMSingleSelectListModel]:cannot set shift select for single selection type")},getSelectedNodes:function(){return[]},getSelectedNode:function(){if(this._selectedNodeId)return this.getNodeById(this._selectedNodeId)},handleEvent:function(a){switch(a.type){case "selectAction":switch(a.actionCommand){case "selected":if(a.nodeId){if(this._selectedNodeId){var b=
this.getNodeById(this._selectedNodeId);b&&b.deSelect(a)}this._selectedNodeId=a.nodeId}else return;break;case "deSelected":delete this._selectedNodeId}break;case "change":switch(a.actionCommand){case "selected":if(a.value)this._selectedNodeId&&(b=this.getNodeById(this._selectedNodeId))&&(b.deSelect(a),b._buttonGroup.getRadioFieldByIndex(0).setChecked(!1)),this._selectedNodeId=a.value;else return;break;case "deSelected":delete this._selectedNodeId}}RCMSelectListModel.prototype.handleEvent.call(this,
a)}})}();function RCMMultiSelectListModel(a){this.init(a)}
RCMMultiSelectListModel.prototype=function(){return set(new RCMSelectListModel,{init:function(a){RCMSelectListModel.prototype._init.call(this,a);this._shiftSelect=!0;this._cacheMap={};this._nodeGen={}},generateNodeId:function(a){var b=/(.*)(\d+)$/,c;do a=c=(c=a.match(b))&&c[2]?c[1]+ ++c[2]:a+"-1";while(this._nodeGen[c]);return c},addItem:function(a,b,c){var d=a.getNodeId();if(this._nodeGen[d]){var e=this.generateNodeId(d),d=e;a.gId=e;this._nodeGen[e]=a}else this._nodeGen[d]=a,a.gId=d;(1==this._selectedIndices[b]||
this._selectAll)&&a.select(!0);if("undefined"==typeof b||null==b)b=this._numChildren;1==this._autoGrowListSize&&b>=this._numChildren&&this.setNumChildren(b+1);"undefined"==typeof b||b>=this._numChildren?assert(!1,"[RCMAbstractListModel]:invalid position for data"):(this._list[b]?(this.removeItem(this._list[b],!0,!0),this.setNumChildren(this._numChildren+1,c),this._list.splice(b,0,a)):this._list[b]=a,this._nodeCache[d]=b,1!=c&&this.dispatch("dataAvailable",{startIndex:b,endIndex:b}),a.addEventListener("selectAction",
this),a.addEventListener("change",this))},removeItem:function(a,b,c){if(this.getNodeById(a)){this.getNodeById(a).removeEventListener("selectAction",this);this.getNodeById(a).removeEventListener("change",this);var d=this.getNodeIndex(a);if(-1<d){this._list.splice(d,1);this.setNumChildren(this._numChildren-1,b);delete this._nodeCache[a];if(!c)for(a=d;a<this._list.length;a++)this._list[a]&&(this._nodeCache[this._list[a].getNodeId()]=a);1!=b&&this.dispatch("dataRefreshed")}else assert(!1,"[RCMAbstractListModel]:cannot remove node as it does not exist in currentg list")}},
handleEvent:function(a){switch(a.type){case "selectAction":"selected"==a.actionCommand?(this._selectedIndices[this.getNodeIndex(a.nodeId)]=!0,a.batched||this.dispatch("selectAction",{actionCommand:a.actionCommand,nodeId:a.nodeId})):"deSelected"==a.actionCommand?(delete this._selectedIndices[this.getNodeIndex(a.nodeId)],a.batched||this.dispatch("selectAction",{actionCommand:a.actionCommand,nodeId:a.nodeId,gid:a.target.gId})):"copyNode"==a.actionCommand&&(a.batched||this.dispatch("selectAction",{actionCommand:a.actionCommand,
nodeId:a.nodeId,gid:a.target.gId}));return}RCMSelectListModel.prototype.handleEvent.call(this,a)},selectAll:function(){RCMSelectListModel.prototype.selectAll.call(this)},removeAll:function(){RCMSelectListModel.prototype.removeAll.call(this)},clearAll:function(){}})}();