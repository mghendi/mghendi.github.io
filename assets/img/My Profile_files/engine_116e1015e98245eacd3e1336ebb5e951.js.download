if(null==dwr)var dwr={};null==dwr.engine&&(dwr.engine={});if(null==DWREngine)var DWREngine=dwr.engine;dwr.engine.setErrorHandler=function(a){dwr.engine._errorHandler=a};dwr.engine.setWarningHandler=function(a){dwr.engine._warningHandler=a};dwr.engine.setTextHtmlHandler=function(a){dwr.engine._textHtmlHandler=a};dwr.engine.setTimeout=function(a){dwr.engine._timeout=a};dwr.engine.setPreHook=function(a){dwr.engine._preHook=a};dwr.engine.setPostHook=function(a){dwr.engine._postHook=a};
dwr.engine.setHeaders=function(a){dwr.engine._headers=a};dwr.engine.setParameters=function(a){dwr.engine._parameters=a};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(a){a!=dwr.engine.XMLHttpRequest&&a!=dwr.engine.IFrame&&a!=dwr.engine.ScriptTag?dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"}):dwr.engine._rpcType=a};
dwr.engine.setHttpMethod=function(a){"GET"!=a&&"POST"!=a?dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"}):dwr.engine._httpMethod=a};dwr.engine.setOrdered=function(a){dwr.engine._ordered=a};dwr.engine.setAsync=function(a){dwr.engine._async=a};
dwr.engine.setActiveReverseAjax=function(a){a?dwr.engine._activeReverseAjax||(dwr.engine._activeReverseAjax=!0,dwr.engine._poll()):(dwr.engine._activeReverseAjax&&dwr.engine._pollReq&&dwr.engine._pollReq.abort(),dwr.engine._activeReverseAjax=!1)};dwr.engine.defaultErrorHandler=function(a,b){dwr.engine._debug("Error: "+b.name+", "+b.message,!0);null==a||""==a?alert("A server error has occured."):-1!=a.indexOf("0x80040111")?dwr.engine._debug(a):alert(a)};
dwr.engine.defaultWarningHandler=function(a,b){dwr.engine._debug(a)};dwr.engine.beginBatch=function(){dwr.engine._batch?dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"}):dwr.engine._batch=dwr.engine._createBatch()};
dwr.engine.endBatch=function(a){var b=dwr.engine._batch;null==b?dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"}):(dwr.engine._batch=null,0!=b.map.callCount&&(a&&dwr.engine._mergeBatch(b,a),dwr.engine._ordered&&0!=dwr.engine._batchesLength?dwr.engine._batchQueue[dwr.engine._batchQueue.length]=b:dwr.engine._sendData(b)))};dwr.engine.setPollMethod=function(a){dwr.engine.setPollType(a)};dwr.engine.setMethod=function(a){dwr.engine.setRpcType(a)};
dwr.engine.setVerb=function(a){dwr.engine.setHttpMethod(a)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._origScriptSessionId="80A8BD291A8E635A37D57F13E5D1F423";dwr.engine._sessionCookieName="JSESSIONID";dwr.engine._allowGetForSafariButMakeForgeryEasier="false";dwr.engine._scriptTagProtection="throw 'allowScriptTagRemoting is false.';";dwr.engine._defaultPath="/xi/ajax/remoting";dwr.engine._pollWithXhr="false";
dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){null==dwr.engine._scriptSessionId&&(dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(1E3*Math.random()));return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];
dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=!1;dwr.engine._async=!0;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument="Msxml2.DOMDocument.6.0 Msxml2.DOMDocument.5.0 Msxml2.DOMDocument.4.0 Msxml2.DOMDocument.3.0 MSXML2.DOMDocument MSXML.DOMDocument Microsoft.XMLDOM".split(" ");dwr.engine._XMLHTTP="Msxml2.XMLHTTP.6.0 Msxml2.XMLHTTP.5.0 Msxml2.XMLHTTP.4.0 MSXML2.XMLHTTP.3.0 MSXML2.XMLHTTP Microsoft.XMLHTTP".split(" ");
dwr.engine._activeReverseAjax=!1;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers=null;dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(a){return a};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;
dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames="rpcType httpMethod async timeout errorHandler warningHandler textHtmlHandler".split(" ");dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=!1;
dwr.engine._mergeCallPathParams=function(a,b){if(!b)return null;var c=a?a.pathParams:null;if(c){var d;if("string"==typeof c)if("string"==typeof b)c+="\x26"+b;else for(d in b)c+="\x26"+encodeURIComponent(d)+"\x3d"+encodeURIComponent(b[d]);else if("string"==typeof b){var e="";for(d in c)e+=encodeURIComponent(d)+"\x3d"+encodeURIComponent(c[d])+"\x26";c=e+b}else for(d in b)c[d]=b[d]}else c=b;return c};
dwr.engine._execute=function(a,b,c,d){var e=!1;null==dwr.engine._batch&&(dwr.engine.beginBatch(),e=!0);for(var f=dwr.engine._batch,h=[],g=0;g<arguments.length-3;g++)h[g]=arguments[g+3];if(null==f.path)f.path=a;else if(f.path!=a){dwr.engine._handleError(f,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return}g=h[h.length-1];g="function"==typeof g||null==g?{callback:h.pop()}:h.pop();f.pathParams=dwr.engine._mergeCallPathParams(f,g.pathParams);dwr.engine._mergeBatch(f,
g);f.handlers[f.map.callCount]={exceptionHandler:g.exceptionHandler,callback:g.callback};var k="c"+f.map.callCount+"-";f.map[k+"scriptName"]=b;f.map[k+"methodName"]=c;f.map[k+"id"]=f.map.callCount;for(g=0;g<h.length;g++)dwr.engine._serializeAll(f,[],h[g],k+"param"+g);f.map.callCount++;e&&dwr.engine.endBatch()};
dwr.engine._poll=function(){if(dwr.engine._activeReverseAjax){var a=dwr.engine._createBatch();a.map.id=0;a.map.callCount=1;a.isPoll=!0;"true"==dwr.engine._pollWithXhr?(a.rpcType=dwr.engine.XMLHttpRequest,a.map.partialResponse=dwr.engine._partialResponseNo):-1!=navigator.userAgent.indexOf("Gecko/")?(a.rpcType=dwr.engine.XMLHttpRequest,a.map.partialResponse=dwr.engine._partialResponseYes):(a.rpcType=dwr.engine.XMLHttpRequest,a.map.partialResponse=dwr.engine._partialResponseNo);a.httpMethod="POST";a.async=
!0;a.timeout=0;a.path=dwr.engine._defaultPath;a.preHooks=[];a.postHooks=[];a.errorHandler=dwr.engine._pollErrorHandler;a.warningHandler=dwr.engine._pollErrorHandler;a.handlers[0]={callback:function(a){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,a)}};dwr.engine._sendData(a);a.rpcType==dwr.engine.XMLHttpRequest&&a.map.partialResponse==dwr.engine._partialResponseYes&&dwr.engine._checkCometPoll()}};
dwr.engine._pollErrorHandler=function(a,b){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries\x3d"+dwr.engine._pollRetries+"): "+b.name+" : "+b.message);dwr.engine._pollRetries<dwr.engine._maxPollRetries?setTimeout(dwr.engine._poll,1E4):(dwr.engine._activeReverseAjax=!1,dwr.engine._debug("Giving up."))};
dwr.engine._createBatch=function(){var a={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:!1,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};
dwr.engine._preHook&&a.preHooks.push(dwr.engine._preHook);dwr.engine._postHook&&a.postHooks.push(dwr.engine._postHook);var b,c;if(dwr.engine._headers)for(b in dwr.engine._headers)c=dwr.engine._headers[b],"function"!=typeof c&&(a.headers[b]=c);if(dwr.engine._parameters)for(b in dwr.engine._parameters)c=dwr.engine._parameters[b],"function"!=typeof c&&(a.parameters[b]=c);return a};
dwr.engine._mergeBatch=function(a,b){var c,d;for(d=0;d<dwr.engine._propnames.length;d++)c=dwr.engine._propnames[d],null!=b[c]&&(a[c]=b[c]);null!=b.preHook&&a.preHooks.unshift(b.preHook);null!=b.postHook&&a.postHooks.push(b.postHook);if(b.headers)for(c in b.headers)d=b.headers[c],"function"!=typeof d&&(a.headers[c]=d);if(b.parameters)for(c in b.parameters)d=b.parameters[c],"function"!=typeof d&&(a.map["p-"+c]=""+d)};
dwr.engine._getJSessionId=function(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++){for(var c=a[b];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(dwr.engine._sessionCookieName+"\x3d"))return c.substring(dwr.engine._sessionCookieName.length+1,c.length)}return""};
dwr.engine._checkCometPoll=function(){for(var a=0;a<dwr.engine._outstandingIFrames.length;a++){var b="",c=dwr.engine._outstandingIFrames[a];try{b=dwr.engine._getTextFromCometIFrame(c)}catch(d){dwr.engine._handleWarning(c.batch,d)}""!=b&&dwr.engine._processCometResponse(b,c.batch)}dwr.engine._pollReq&&(a=dwr.engine._pollReq,b=a.responseText,null!=b&&dwr.engine._processCometResponse(b,a.batch));(0<dwr.engine._outstandingIFrames.length||dwr.engine._pollReq)&&setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)};
dwr.engine._getTextFromCometIFrame=function(a){a=a.contentWindow.document.body;if(null==a)return"";a=a.innerHTML;if(0==a.indexOf("\x3cPRE\x3e")||0==a.indexOf("\x3cpre\x3e"))a=a.substring(5,a.length-7);return a};
dwr.engine._processCometResponse=function(a,b){if(b.charsProcessed!=a.length)if(0==a.length)b.charsProcessed=0;else{var c=a.indexOf("//#DWR-START#",b.charsProcessed);if(-1==c)b.charsProcessed=a.length;else{var d=a.lastIndexOf("//#DWR-END#");-1!=d&&(13==a.charCodeAt(d+11)&&10==a.charCodeAt(d+12)?b.charsProcessed=d+13:b.charsProcessed=d+11,c=a.substring(c+13,d),dwr.engine._receivedBatch=b,dwr.engine._eval(c),dwr.engine._receivedBatch=null)}}};
dwr.engine._sendData=function(a){a.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[a.map.batchId]=a;dwr.engine._batchesLength++;a.completed=!1;for(var b=0;b<a.preHooks.length;b++)a.preHooks[b]();a.preHooks=null;a.timeout&&0!=a.timeout&&(a.timeoutId=setTimeout(function(){dwr.engine._abortRequest(a)},a.timeout));a.rpcType==dwr.engine.XMLHttpRequest&&(window.XMLHttpRequest?a.req=new XMLHttpRequest:!window.ActiveXObject||0<=navigator.userAgent.indexOf("Mac")&&0<=navigator.userAgent.indexOf("MSIE")||
(a.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)));var c;if(a.req){a.async&&(a.req.onreadystatechange=function(){"undefined"!=typeof dwr&&dwr.engine._stateChange(a)});a.isPoll&&(dwr.engine._pollReq=a.req,!document.all||window.opera)&&(a.req.batch=a);b=navigator.userAgent.indexOf("Safari/");0<=b&&(b=navigator.userAgent.substring(b+7),400>parseInt(b,10)&&("true"==dwr.engine._allowGetForSafariButMakeForgeryEasier?a.httpMethod="GET":dwr.engine._handleWarning(a,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})));
a.mode=a.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;b=dwr.engine._constructRequest(a);try{a.req.open(a.httpMethod,b.url,a.async);try{for(c in a.headers){var d=a.headers[c];"string"==typeof d&&a.req.setRequestHeader(c,d)}a.headers["Content-Type"]||a.req.setRequestHeader("Content-Type","text/plain")}catch(e){dwr.engine._handleWarning(a,e)}a.req.send(b.body);a.async||dwr.engine._stateChange(a)}catch(e){dwr.engine._handleError(a,e)}}else if(a.rpcType!=dwr.engine.ScriptTag)if(d=a.isPoll?
"dwr-if-poll-"+a.map.batchId:"dwr-if-"+a.map.batchId,a.div=document.createElement("div"),document.body.appendChild(a.div),a.div.innerHTML="\x3ciframe src\x3d'javascript:void(0)' frameborder\x3d'0' style\x3d'width:0px;height:0px;border:0;' id\x3d'"+d+"' name\x3d'"+d+"' onload\x3d'dwr.engine._iframeLoadingComplete ("+a.map.batchId+");'\x3e\x3c/iframe\x3e",a.document=document,a.iframe=a.document.getElementById(d),a.iframe.batch=a,a.mode=a.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall,a.isPoll&&
dwr.engine._outstandingIFrames.push(a.iframe),b=dwr.engine._constructRequest(a),"GET"==a.httpMethod)a.iframe.setAttribute("src",b.url);else{a.form=a.document.createElement("form");a.form.setAttribute("id","dwr-form");a.form.setAttribute("action",b.url);a.form.setAttribute("style","display:none;");a.form.setAttribute("target",d);a.form.target=d;a.form.setAttribute("method",a.httpMethod);for(c in a.map)d=a.map[c],"function"!=typeof d&&(b=a.document.createElement("input"),b.setAttribute("type","hidden"),
b.setAttribute("name",c),b.setAttribute("value",d),a.form.appendChild(b));a.document.body.appendChild(a.form);a.form.submit()}else a.httpMethod="GET",a.mode=a.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall,b=dwr.engine._constructRequest(a),a.script=document.createElement("script"),a.script.id="dwr-st-"+a.map["c0-id"],a.script.src=b.url,document.body.appendChild(a.script)};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";
dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";
dwr.engine._constructRequest=function(a){var b={url:a.path+a.mode,body:null};b.url=1==a.isPoll?b.url+"ReverseAjax.dwr":1==a.map.callCount?b.url+(a.map["c0-scriptName"]+"."+a.map["c0-methodName"]+".dwr"):b.url+("Multiple."+a.map.callCount+".dwr");var c=location.href.match(/jsessionid=([^?]+)/);null!=c&&(b.url+=";jsessionid\x3d"+c[1]);if(c=a.pathParams){if("string"!=typeof c){var d="";for(e in c)d+="\x26"+encodeURIComponent(e)+"\x3d"+encodeURIComponent(c[e]);c=d.substring(1)}c&&(b.url+=(0>b.url.indexOf(";")?
";":"\x26")+c)}var e;if("GET"==a.httpMethod){a.map.callCount=""+a.map.callCount;b.url+="?";for(e in a.map)"function"!=typeof a.map[e]&&(b.url+=encodeURIComponent(e)+"\x3d"+encodeURIComponent(a.map[e])+"\x26");b.url=b.url.substring(0,b.url.length-1)}else{b.body="";if(document.all&&!window.opera){c=[];for(e in a.map)"function"!=typeof a.map[e]&&c.push(e+"\x3d"+a.map[e]+dwr.engine._postSeperator);b.body=c.join("")}else for(e in a.map)"function"!=typeof a.map[e]&&(b.body+=e+"\x3d"+a.map[e]+dwr.engine._postSeperator);
b.body=dwr.engine._contentRewriteHandler(b.body)}b.url=dwr.engine._urlRewriteHandler(b.url);return b};
dwr.engine._stateChange=function(a){var b;if(a.completed)dwr.engine._debug("Error: _stateChange() with batch.completed");else{var c=a.req;try{if(4!=c.readyState)return}catch(h){dwr.engine._handleWarning(a,h);dwr.engine._clearUp(a);return}if(dwr.engine._unloading)dwr.engine._debug("Ignoring reply from server as page is unloading.");else{try{var d=c.responseText,d=dwr.engine._replyRewriteHandler(d),e=c.status;if(null==d||""==d)dwr.engine._handleWarning(a,{name:"dwr.engine.missingData",message:"No data received from server"});
else if(200!=e)dwr.engine._handleError(a,{name:"dwr.engine.http."+e,message:c.statusText,url:c.url,reply:d});else{var f=c.getResponseHeader("Content-Type");f.match(/^text\/plain/)||f.match(/^text\/javascript/)?a.isPoll&&a.map.partialResponse==dwr.engine._partialResponseYes?dwr.engine._processCometResponse(d,a):-1==d.search("//#DWR")?dwr.engine._handleWarning(a,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"}):b=d:f.match(/^text\/html/)&&"function"==typeof a.textHtmlHandler?a.textHtmlHandler({status:e,
responseText:d,contentType:f}):dwr.engine._handleWarning(a,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+f+"'"})}}catch(h){dwr.engine._handleWarning(a,h)}dwr.engine._callPostHooks(a);dwr.engine._receivedBatch=a;null!=b&&(b=b.replace(dwr.engine._scriptTagProtection,""));dwr.engine._eval(b);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(a);a.completed||dwr.engine._clearUp(a)}}};
dwr.engine._validateBatch=function(a){if(!a.completed)for(var b=0;b<a.map.callCount;b++)if(null!=a.handlers[b]){dwr.engine._handleWarning(a,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}};dwr.engine._iframeLoadingComplete=function(a){(a=dwr.engine._batches[a])&&dwr.engine._validateBatch(a)};
dwr.engine._remoteHandleCallback=function(a,b,c){var d=dwr.engine._batches[a];if(null==d)dwr.engine._debug("Warning: batch \x3d\x3d null in remoteHandleCallback for batchId\x3d"+a,!0);else try{var e=d.handlers[b];d.handlers[b]=null;e?"function"==typeof e.callback&&e.callback(c):dwr.engine._debug("Warning: Missing handlers. callId\x3d"+b,!0)}catch(f){dwr.engine._handleError(d,f)}};
dwr.engine._remoteHandleException=function(a,b,c){a=dwr.engine._batches[a];if(null==a)dwr.engine._debug("Warning: null batch in remoteHandleException",!0);else{var d=a.handlers[b];a.handlers[b]=null;null==d?dwr.engine._debug("Warning: null handlers in remoteHandleException",!0):(void 0==c.message&&(c.message=""),"function"!=typeof d.exceptionHandler||c.errorId||c.timestamp?"function"==typeof a.errorHandler&&a.errorHandler(c.message,c):d.exceptionHandler(c.message,c))}};
dwr.engine._remoteHandleBatchException=function(a,b){var c=null==dwr.engine._receivedBatch&&null!=b;c&&(dwr.engine._receivedBatch=dwr.engine._batches[b]);void 0==a.message&&(a.message="");dwr.engine._handleError(dwr.engine._receivedBatch,a);c&&(dwr.engine._receivedBatch=null,dwr.engine._clearUp(dwr.engine._batches[b]))};
dwr.engine._remotePollCometDisabled=function(a,b){dwr.engine.setActiveReverseAjax(!1);var c=null==dwr.engine._receivedBatch&&null!=b;c&&(dwr.engine._receivedBatch=dwr.engine._batches[b]);void 0==a.message&&(a.message="");dwr.engine._handleError(dwr.engine._receivedBatch,a);c&&(dwr.engine._receivedBatch=null,dwr.engine._clearUp(dwr.engine._batches[b]))};dwr.engine._remoteBeginIFrameResponse=function(a,b){null!=a&&(dwr.engine._receivedBatch=a.batch);dwr.engine._callPostHooks(dwr.engine._receivedBatch)};
dwr.engine._remoteEndIFrameResponse=function(a){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(a){return null==a?null:""==a?(dwr.engine._debug("Warning: blank script",!0),null):eval(a)};dwr.engine._abortRequest=function(a){a&&!a.completed&&(dwr.engine._clearUp(a),a.req&&a.req.abort(),dwr.engine._handleError(a,{name:"dwr.engine.timeout",message:"Timeout"}))};
dwr.engine._callPostHooks=function(a){if(a.postHooks){for(var b=0;b<a.postHooks.length;b++)a.postHooks[b]();a.postHooks=null}};
dwr.engine._clearUp=function(a){if(a)if(a.completed)dwr.engine._debug("Warning: Double complete",!0);else{a.div&&a.div.parentNode.removeChild(a.div);if(a.iframe){for(var b=0;b<dwr.engine._outstandingIFrames.length;b++)dwr.engine._outstandingIFrames[b]==a.iframe&&dwr.engine._outstandingIFrames.splice(b,1);a.iframe.parentNode.removeChild(a.iframe)}a.form&&a.form.parentNode.removeChild(a.form);a.req&&(a.req==dwr.engine._pollReq&&(dwr.engine._pollReq=null),delete a.req);a.timeoutId&&(clearTimeout(a.timeoutId),
delete a.timeoutId);a.map&&(a.map.batchId||0==a.map.batchId)&&(delete dwr.engine._batches[a.map.batchId],dwr.engine._batchesLength--);a.completed=!0;0!=dwr.engine._batchQueue.length&&(a=dwr.engine._batchQueue.shift(),dwr.engine._sendData(a))}else dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",!0)};
dwr.engine._unloader=function(){dwr.engine._unloading=!0;dwr.engine._batchQueue.length=0;for(var a in dwr.engine._batches){var b=dwr.engine._batches[a];b&&b.map&&(b.req&&b.req.abort(),dwr.engine._clearUp(b))}};window.addEventListener?window.addEventListener("unload",dwr.engine._unloader,!1):window.attachEvent&&window.attachEvent("onunload",dwr.engine._unloader);
dwr.engine._handleError=function(a,b){"string"==typeof b&&(b={name:"unknown",message:b});null==b.message&&(b.message="");null==b.name&&(b.name="unknown");if(a){var c=a.req;if(c){var d=c.getResponseHeader("x-error-code");d&&(b.errorCode=d,b.errorMsg=c.getResponseHeader("x-error-message"))}}a&&"function"==typeof a.errorHandler&&"COE0060"!==b.errorCode?a.errorHandler(b.message,b):dwr.engine._errorHandler&&dwr.engine._errorHandler(b.message,b);a&&dwr.engine._clearUp(a)};
dwr.engine._handleWarning=function(a,b){"string"==typeof b&&(b={name:"unknown",message:b});null==b.message&&(b.message="");null==b.name&&(b.name="unknown");a&&"function"==typeof a.warningHandler?a.warningHandler(b.message,b):dwr.engine._warningHandler&&dwr.engine._warningHandler(b.message,b);a&&dwr.engine._clearUp(a)};
dwr.engine._serializeAll=function(a,b,c,d){if(null==c)a.map[d]="null:null";else switch(typeof c){case "boolean":a.map[d]="boolean:"+c;break;case "number":a.map[d]="number:"+c;break;case "string":a.map[d]="string:"+encodeURIComponent(c);break;case "object":a.map[d]=c instanceof String?"String:"+encodeURIComponent(c):c instanceof Boolean?"Boolean:"+c:c instanceof Number?"Number:"+c:c instanceof Date?"Date:"+c.getTime():c&&c.join?dwr.engine._serializeArray(a,b,c,d):dwr.engine._serializeObject(a,b,c,
d);break;case "function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof c+", attempting default converter."}),a.map[d]="default:"+c}};dwr.engine._lookup=function(a,b,c){for(var d,e=0;e<a.length;e++)if(a[e].data==b){d=a[e];break}if(d)return"reference:"+d.name;a.push({data:b,name:c});return null};
dwr.engine._serializeObject=function(a,b,c,d){var e=dwr.engine._lookup(b,c,d);if(e)return e;if(c.nodeName&&c.nodeType)return dwr.engine._serializeXml(a,b,c,d);d="Object_"+dwr.engine._getObjectClassName(c)+":{";for(var f in c)"function"!=typeof c[f]&&(a.paramCount++,e="c"+dwr.engine._batch.map.callCount+"-e"+a.paramCount,dwr.engine._serializeAll(a,b,c[f],e),d+=encodeURIComponent(f)+":reference:"+e+", ");", "==d.substring(d.length-2)&&(d=d.substring(0,d.length-2));return d+"}"};
dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};
dwr.engine._getObjectClassName=function(a){if(a&&a.constructor&&a.constructor.toString){var b=a.constructor.toString();if((b=b.match(/function\s+(\w+)/))&&2==b.length)return b[1]}if(a&&a.constructor)for(var c in dwr.engine._errorClasses)if(a.constructor==dwr.engine._errorClasses[c])return c;return a&&(b=Object.prototype.toString.call(a),(b=b.match(/\[object\s+(\w+)/))&&2==b.length)?b[1]:"Object"};
dwr.engine._serializeXml=function(a,b,c,d){if(a=dwr.engine._lookup(b,c,d))return a;c=window.XMLSerializer?(new XMLSerializer).serializeToString(c):c.toXml?c.toXml:c.innerHTML;return"XML:"+encodeURIComponent(c)};
dwr.engine._serializeArray=function(a,b,c,d){if(d=dwr.engine._lookup(b,c,d))return d;if(document.all&&!window.opera){var e=["Array:["];for(d=0;d<c.length;d++){0!=d&&e.push(",");a.paramCount++;var f="c"+dwr.engine._batch.map.callCount+"-e"+a.paramCount;dwr.engine._serializeAll(a,b,c[d],f);e.push("reference:");e.push(f)}e.push("]");e=e.join("")}else{e="Array:[";for(d=0;d<c.length;d++)0!=d&&(e+=","),a.paramCount++,f="c"+dwr.engine._batch.map.callCount+"-e"+a.paramCount,dwr.engine._serializeAll(a,b,c[d],
f),e+="reference:",e+=f;e+="]"}return e};dwr.engine._unserializeDocument=function(a){var b;if(window.DOMParser){b=(new DOMParser).parseFromString(a,"text/xml");if(!b.documentElement||"parsererror"==b.documentElement.tagName)throw a=b.documentElement.firstChild.data,a+="\n"+b.documentElement.firstChild.nextSibling.firstChild.data,a;return b}if(window.ActiveXObject)return b=dwr.engine._newActiveXObject(dwr.engine._DOMDocument),b.loadXML(a),b;b=document.createElement("div");b.innerHTML=a;return b};
dwr.engine._newActiveXObject=function(a){for(var b,c=0;c<a.length;c++)try{b=new ActiveXObject(a[c]);break}catch(d){}return b};dwr.engine._debug=function(a,b){var c=!1;try{window.console?(b&&window.console.trace&&window.console.trace(),window.console.log(a),c=!0):window.opera&&window.opera.postError&&(window.opera.postError(a),c=!0)}catch(e){}if(!c&&(c=document.getElementById("dwr-debug"))){var d=a+"\x3cbr/\x3e"+c.innerHTML;2048<d.length&&(d=d.substring(0,2048));c.innerHTML=d}};