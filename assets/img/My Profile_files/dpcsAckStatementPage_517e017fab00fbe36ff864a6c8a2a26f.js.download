function DPCSAckStatementPage(a,c){this.register();this._init(a,c)}
extend(DPCSAckStatementPage,Component,{renderHtml:function(a){a.push("\x3ch3\x3e",MSGS.COMMON_DPCS2_ACK_STMT,"\x3c/h3\x3e");a.push("\x3cp\x3e",MSGS.COMMON_DPCS2_Action_decline_accept,"\x3c/p\x3e");a.push("\x3cdiv\x3e");this.userInput.renderHtml(a);a.push('\x3cdiv style\x3d"margin:10px 0"\x3e');a.push('\x3cbutton type\x3d"button" onclick\x3d"',this.fireCode("_search"),'"\x3e',MSGS.COMMON_Search,"\x3c/button\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv id\x3d"',this.id,'_result"\x3e');
a.push("\x3c/div\x3e")},_init:function(a){this._model=a;this._config=config;this._initComponents();this._initEventListeners();this._postInit()},_initComponents:function(){this._loadingBox=new SFLoading;this._viewStatementDlg=new ViewStatementDlg;this.button=new SFCommandButton(MSGS.COMMON_Search);this.userInput=new DpcsSearchUsers(this._config);var a=[{label:"\x3cdiv class\x3d'alignleft'\x3e"+MSGS.COMMON_DPCS2_LBL_STMT+"\x3c/div\x3e"},{label:"\x3cdiv class\x3d'alignleft'\x3e"+MSGS.COMMON_Type+"\x3c/div\x3e"},
{label:"\x3cdiv class\x3d'alignleft'\x3e"+MSGS.COMMON_DPCS2_Publish_Date+"\x3c/div\x3e"},{label:"\x3cdiv class\x3d'alignleft'\x3e"+MSGS.COMMON_DPCS2_Publish_By+"\x3c/div\x3e"},{label:"\x3cdiv class\x3d'alignleft'\x3e"+MSGS.COMMON_Status+"\x3c/div\x3e"},{label:"\x3cdiv class\x3d'alignleft'\x3e"+MSGS.COMMON_Action+"\x3c/div\x3e"}];this._grid=new SFSimpleDataGridLayout;this._grid.setNbCol(6);this._grid.setAlternateRows(["gray","white"]);this._grid.setColumnDefinitions([{width:"25%"},{width:"10%"},{width:"15%"},
{width:"15%"},{width:"10%"},{width:"25%"}]);this._grid.setHeaders(a)},_initEventListeners:function(){this._model.addEventListener("ackStatementModelUpdated",this);this._model.addEventListener("updateAckStatementDone",this);this._model.addEventListener("updateAckStatementFailedPurgeFreeze",this);this._model.addEventListener("statementReady",this);this._model.addEventListener("failedOperation",this);this.button.addEventListener("action",this)},_postInit:function(){this._loadingBox.setMsg(MSGS.COMMON_loading);
this.button.setActionCommand("search")},_renderResult:function(){var a=[];this._grid.renderHtml(a);$(this.id+"_result").innerHTML=a.join("")},_search:function(){this.userInput.getValue()?(SFOverlayMgr.showOverlay(this._loadingBox,!0),this._model.dispatch("retrieveAckStatement",{userInfo:this.userInput.getValue(),searchType:this.userInput.searchType.getValue()})):alert(MSGS.COMMON_DPCS2_WARN_MSG_INPUT_NAME)},_populateGrid:function(){this._grid.resetRows();for(var a=this._model.getStatementList(),c=
0;c<a.length;c++){var b=a[c],e,f,d,g,h;e=new SFSpan(b.dpcsName+" ("+b.versionNum+")");f=new SFSpan(b.type);d=new SFSpan(b.lastModified);g=new SFSpan(b.createdBy);h=new SFSpan(dpcsUtil.mapStatus(b.status));b=this._getAction(b.status,b.dpcsId,b.dpcsVersionId,b.dpcsOrdinal,"undefined"!==typeof b.acceptPermission?b.acceptPermission:!1);this._grid.appendRow([e,f,d,g,h,b])}},_getAction:function(a,c,b,e,f){var d=[];d.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_getStatement",b),'"\x3e',MSGS.COMMON_DPCS2_LBL_View_Stmt,
"\x3c/a\x3e");a===dpcsUtil.DECLINE?(!this._isRecruitingDpcs(e)||this._isRecruitingDpcs(e)&&f)&&d.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_updateStatus",c,dpcsUtil.ACCEPT),'"\x3e',MSGS.COMMON_DPCS2_ACCEPT,"\x3c/a\x3e"):a===dpcsUtil.ACCEPT?this._isRecruitingDpcs(e)?d.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_openDeclineConfirmDlg",c,e),'"\x3e',MSGS.COMMON_DPCS2_Decline,"\x3c/a\x3e"):d.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_updateStatus",c,dpcsUtil.DECLINE),'"\x3e',
MSGS.COMMON_DPCS2_Decline,"\x3c/a\x3e"):this._isRecruitingDpcs(e)?(d.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_openDeclineConfirmDlg",c,e),'"\x3e',MSGS.COMMON_DPCS2_Decline,"\x3c/a\x3e"),f&&d.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_updateStatus",c,dpcsUtil.ACCEPT),'"\x3e',MSGS.COMMON_DPCS2_ACCEPT,"\x3c/a\x3e")):(d.push('\x3ca href\x3d"#" onclick\x3d"',this.fireCode("_updateStatus",c,dpcsUtil.DECLINE),'"\x3e',MSGS.COMMON_DPCS2_Decline,"\x3c/a\x3e"),d.push('\x3ca href\x3d"#" onclick\x3d"',
this.fireCode("_updateStatus",c,dpcsUtil.ACCEPT),'"\x3e',MSGS.COMMON_DPCS2_ACCEPT,"\x3c/a\x3e"));return new ActionWrapper(d.join(""))},_openDlg:function(a,c){this._viewStatementDlg.show(a,c)},_isRecruitingDpcs:function(a){return a==dpcsUtil.RECRUITING_INTERNAL||a==dpcsUtil.RECRUITING_EXTERNAL||a==dpcsUtil.RECRUITING_INTRANET?!0:!1},_openDeclineConfirmDlg:function(a,c){var b=new DeclineConfirmDlg(MSGS.COMMON_DPCS2_WARN_MSG_DECLINE_STATEMENT);b.dpcsId=a;b.dpcsOrdinal=c;b.addEventListener("decline",
this);b.show()},_updateStatus:function(a,c,b){SFOverlayMgr.showOverlay(this._loadingBox,!0);b=b&&!isNaN(b)?b:-1;this._model.dispatch("updateAckStatement",{userInfo:this.userInput.getValue(),searchType:this.userInput.searchType.getValue(),dpcsId:a,status:c,dpcsOrdinal:b})},_getStatement:function(a){SFOverlayMgr.showOverlay(this._loadingBox,!0);this._model.dispatch("viewStatement",{dpcsVersionId:a})},handleEvent:function(a){switch(a.type){case "failedOperation":this._loadingBox.hide();break;case "ackStatementModelUpdated":this._loadingBox.hide();
this._populateGrid();this._renderResult();break;case "statementReady":this._loadingBox.hide();this._openDlg(a.data.title,a.data.content);break;case "updateAckStatementDone":this._loadingBox.hide();this._search();break;case "updateAckStatementFailedPurgeFreeze":this._loadingBox.hide();SFMessageBox.alert(MSGS.RCM_PURGE_FREEGE_DPCS_DECLINE_DELETE_CANDIDATE,{title:MSGS.COMMON_Err,width:600});break;case "decline":this._updateStatus(a.dpcsId,dpcsUtil.DECLINE,a.dpcsOrdinal)}}});
function ActionWrapper(a){this.register();this._html=a}extend(ActionWrapper,Component,{renderHtml:function(a){a.push('\x3cdiv class\x3d"action_list"\x3e');a.push(this._html);a.push("\x3c/div\x3e")}});