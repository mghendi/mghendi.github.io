function SFPersonAutoCompleteWrapper(g,h){this.register();this._init(g,h)}
(function(){function g(a,b){var c=a.join(","),d=k[c];d||(d=k[c]=[]);d.push(b);1==d.length&&SMRF.load(a,function(){for(var a=0;a<d.length;a++)d[a]();k[c]=null})}var h={1:{dependency:"/ui/sfgrp/js/juicCommonFormElements.js",constructorName:"SFAutoComplete"},2:{arguments:{},dependency:"/ui/juic/js/components/sfPersonAutoComplete.js",constructorName:"SFPersonAutoComplete"},3:{arguments:[null,{hideQuickcardDisplay:!0,isV12Plus:!0}],dependency:"/ui/quickcard/js/quickcard.js",constructorName:"QuickcardPeopleSearch"}},
l="setAriaLabelledBy showResetButton hideResetButton showElement hideElement setFocus displayErrorMesage validate setAuxiliaryQuery setAdditionalCriteria appendAdditionalCriteria".split(" ");juic.extend(SFPersonAutoCompleteWrapper,Component,{_init:function(a,b){var c=juic.$("autocomplete.personBased"),d=[];if(!juic.Config.validate(a,[null,juic.Config.arrayType({version:"number",dependency:["string",juic.Config.arrayType("string"),null],constructorName:["string","function",null],arguments:["object",
juic.Config.arrayType(),null]})],d))throw d.forEach(function(a){surj.Logger.error.apply(surj.Logger,a)}),Error("SFPersonAutoCompleteWrapper: Invalid configs");this._options=new juic.Config(b,{version:c&&"true"===c.content?2:1},{version:[null,"number"],userIdInputId:[null,"string"],userIdInputName:[null,"string"],userDisplayValueInputId:[null,"string"],userDisplayValueInputName:[null,"string"]});var e;this._version=this._options.version;this._options.useVersion3&&1==this._version&&(this._version=3);
if(Array.isArray(a))for(c=0;c<a.length;c++)if(d=a[c],d.version==this._version){e=d;break}e=this._config=new juic.Config(e,h[this._version]);c=e.arguments;Array.isArray(c)||(d=c,c=[],"undefined"!=typeof d&&c.push(d),e.arguments=c);window[e.constructorName]?this._createWidget():this._loadDependency();for(c=0;c<l.length;c++){var f=this;(function(a){f[a]=function(){if(this._widget&&"function"==typeof this._widget[a])return this._widget[a].apply(this._widget,arguments)}})(l[c])}},cleanup:function(){this._widget&&
this._widget.cleanup();this._super()},renderHtml:function(a){a.push('\x3cspan id\x3d"',this.id,'"\x3e');a.push('\x3cspan id\x3d"',this.getContainerId(),'"\x3e');this._widget&&this._widget.renderHtml(a);a.push("\x3c/span\x3e");var b=this.getUserIdInputId();if(b){var c=this.getUserIdInputName();a.push('\x3cinput id\x3d"',b,'" name\x3d"',c,'" type\x3d"hidden" onchange\x3d"',this.fireCode("_pullHiddenFields"),'"\x3e')}if(c=this.getUserDisplayValueInputId()){var d=this.getUserDisplayValueInputName();a.push('\x3cinput id\x3d"',
c,'" name\x3d"',d,'" type\x3d"hidden" onchange\x3d"',this.fireCode("_pullHiddenFields"),'"\x3e')}if(b||c)if("function"==typeof a.addAfterRenderListener)a.addAfterRenderListener(this,"_pushHiddenFields");else if(null==this._renderTimeout){var e=function(){f.isRegistered()&&(juic.$(f.id)?(f._renderTimeout=null,f._pushHiddenFields()):setTimeout(e,1E3))},f=this;this._renderTimeout=setTimeout(e,100)}a.push("\x3c/span\x3e")},_pushHiddenFields:function(){if(!this._activePull&&this._widget){this._activePush=
!0;var a=this.getValue(),b=this.getUserIdInputId();b&&(b=juic.$(b))&&(b.value=a||"");a=(a=this.getUserObject())&&a.FullName;if(b=this.getUserDisplayValueInputId())if(b=juic.$(b))b.value=a||"";this._activePush=!1}},_pullHiddenFields:function(a){if(!this._activePush)if(!0===a){this._synchHiddenTimeout=null;var b,c;if(a=this.getUserIdInputId())b=(a=juic.$(a))&&a.value;if(a=this.getUserDisplayValueInputId())c=(a=juic.$(a))&&a.value;this._activePull=!0;this.setValue(b?{userId:b,userDisplayValue:c||""}:
null);this._activePull=!1}else if(null==this._synchHiddenTimeout){var d=this;this._synchHiddenTimeout=setTimeout(function(){d._pullHiddenFields(!0)},10)}},_loadDependency:function(){var a=this,b=this._config.dependency;if("string"==typeof b)b=[b];else if(!Array.isArray(b))throw Error("SFPersonAutoCompleteWrapper: Dependency was not string or array");g(b,function(){a._createWidget()})},_createWidget:function(){if(this.isRegistered()){var a=window[this._config.constructorName];if(a){var b=this._config.arguments;
this._widget=new a(b[0],b[1],b[2]);switch(this._version){case 3:case 2:this._widget.addEventListener("action",this,"_onPersonAction");this._widget.addEventListener("change",this,"_onPersonChange");this._widget.addEventListener("itemSelected",this,"_onPersonItemSelected");this._widget.addEventListener("itemRemoved",this,"_onPersonItemRemoved");break;default:this._widget.addEventListener("change",this,"dispatchEvent"),this._widget.addEventListener("action",this,"_onEmploymentAction"),this._widget.addEventListener("blur",
this,"dispatchEvent")}(a=juic.$(this.getContainerId()))&&this._widget.render(a);this._initialValue&&this.setValue(this._initialValue)}else throw a="SFPersonAutoCompleteWrapper: The constructor "+this._config.constructorName+" was not found. The dependency must not have defined it properly: "+this._config.dependency,juic.Logger.error(a),Error(a);}},_onEmploymentAction:function(a){"itemSelect"==a.actionCommand&&this._pushHiddenFields();this.dispatchEvent(a)},_onPersonChange:function(a){this._pushHiddenFields();
this.dispatch("change");this.dispatch("action",{actionCommand:"change"})},_onPersonAction:function(a){switch(a.actionCommand){case "blur":this.dispatch("blur");break;default:this.dispatchEvent(a)}},_getPerson:function(){if(this._widget)switch(this._version){case 3:return this._widget.getValueObject();case 2:return this._widget.getValue()}return null},_onPersonItemSelected:function(){var a=this._getPerson();this.dispatch("action",{actionCommand:"itemSelect",actionData:a?{userId:a.userId,userDisplayValue:a.name,
person:a}:null})},_onPersonItemRemoved:function(){var a=this._getPerson();this.dispatch("action",{actionCommand:"itemRemoved",actionData:a?{userId:a.userId,userDisplayValue:a.name,person:a}:null})},getValue:function(){if(this._widget){if(2==this._version){var a=this._widget.getValue();return a?a.userId:""}return this._widget.getValue()}return null},getUserObject:function(){if(this._widget)switch(this._version){case 3:case 2:var a=this._getPerson();return{FullName:a?a.name:"",FirstName:a?a.firstName:
"",LastName:a?a.lastName:"",UserName:a?a.userName:"",Location:"",Department:"",UserId:a?a.userId:"",MiddleInitial:"",Count:"",photoMod:a?a.photoMod:""};default:return this._widget.getUserObject()}},getSelectedObject:function(){if(this._widget)switch(this._version){case 3:case 2:var a=this._getPerson();return a?[a.name,a.firstName,a.lastName,null,null,a.userId,"",null,null]:void 0;default:return this._widget.getSelectedObject()}},setSelectedObject:function(a){if(this._widget)switch(this._version){case 3:case 2:this._widget.setValue({userId:a[6],
name:a[0],firstName:a[1],lastName:a[2]});break;default:this._widget.setSelectedObject(a)}},setDisabled:function(a){if(this._widget)switch(this._version){case 3:case 2:this._widget.setEnabled(!a);break;default:this._widget.setDisabled(a)}},isDisabled:function(){if(this._widget)switch(this._version){case 3:case 2:return!this._widget.isEnabled();default:return this._widget.isDisabled()}},clearSearch:function(){if(this._widget)switch(this._version){case 3:case 2:this._widget.clearValue();this.dispatch("action",
{actionCommand:"hideNoResults"});break;default:this._widget.clearSearch()}},setValue:function(a){if(this._widget)switch(this._version){case 3:case 2:this._widget.setValue(a?{userId:a.userId,name:a.userDisplayValue}:null);break;default:this._widget.setValue(a)}else this._initialValue=a},getInputValue:function(){return this.getValue()},getContainerId:function(){return this.id+"container"},getVersion:function(){return this._version},getUserIdInputId:function(){return this._options.userIdInputId},getUserIdInputName:function(){return this._options.userIdInputName||
this.getUserIdInputId()},getUserDisplayValueInputId:function(){return this._options.userDisplayValueInputId},getUserDisplayValueInputName:function(){return this._options.userDisplayValueInputName||this.getUserDisplayValueInputId()}});var k={}})();