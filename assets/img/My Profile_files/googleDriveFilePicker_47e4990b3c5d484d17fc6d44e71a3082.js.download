(function(){(window.GoogleDriveFilePicker=function(a){this.apiKey=a.apiKey;this.clientId=a.clientId;this.botton1=a.buttonl;this.onSelect=a.onSelect;this.botton1.addEventListener("click",this.open.bind(this));this.botton1.addEventListener("keypress",this.openGoogle.bind(this));gapi.client.setApiKey(this.apiKey);gapi.client.load("drive","v2",this._driveApiLoaded.bind(this));gapi.load("picker","1",{callback:this._pickerApiLoaded.bind(this)})}).prototype={open:function(){gapi.auth.getToken()?this._showPicker():
this._doAuth(!1,function(){this._showPicker()}.bind(this))},openGoogle:function(a){"RETURN"==SFDOMEvent.getKeyName(a)&&this.open()},_showPicker:function(){var a=gapi.auth.getToken().access_token;this.picker=(new google.picker.PickerBuilder).addView(google.picker.ViewId.PDFS).addView(google.picker.ViewId.DOCUMENTS).addView(google.picker.ViewId.SPREADSHEETS).addView(google.picker.ViewId.PRESENTATIONS).addView(google.picker.ViewId.DOCS_IMAGES).setAppId(this.clientId).setOAuthToken(a).setCallback(this._pickerCallback.bind(this)).build().setVisible(!0)},
_pickerCallback:function(a){a[google.picker.Response.ACTION]==google.picker.Action.PICKED&&gapi.client.drive.files.get({fileId:a[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID]}).execute(this._fileGetCallback.bind(this))},_fileGetCallback:function(a){if(this.onSelect)this.onSelect(a)},_pickerApiLoaded:function(){this.botton1.disabled=!1},_driveApiLoaded:function(){this._doAuth(!0)},_doAuth:function(a,b){gapi.auth.authorize({client_id:this.clientId+".apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.readonly",
immediate:a},b)}}})();