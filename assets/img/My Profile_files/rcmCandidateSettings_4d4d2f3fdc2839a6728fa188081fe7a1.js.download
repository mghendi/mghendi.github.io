function RCMAccountManagement(a){this._init(a);this._loadPasswordPolicy()}
juic.extend(RCMAccountManagement,juic.EventTarget,{_init:function(a){this._config=a;this._pwdPolicy;this.setDAO();this._view=new RCMResetPassword;this.userMenu=new RCMUserMenu(this._config);this._view.addEventListener("savePassword",this);this._passwordResetView=new RCMFormSection(!0,MSGS.COMMON_Password,this._view,{sectionInstructionText:""});this._loading=new SFLoading(MSGS.RECRUITING_AGENCY_JOB_ALERT_SAVE_LOAD_MESSAGE);this._deleteProfile=new RCMDeleteCandidateProfile(this._config)},_loadPasswordPolicy:function(){this._getPasswordPolicy();
RCMPwdPolicyUtil.setInstance({alternativeDao:this._dao})},_getPasswordPolicy:function(){this._dao.getPasswordPolicy(!1)},getPageTitle:function(){return MSGS.RECRUITING_CAREER_ACCOUNT_SETTINGS},renderPageTitle:function(a){a.push('\x3cdiv id\x3d"pageTitle_',this.id,'" class\x3d"pagetitle"\x3e');a.push("\x3ch1\x3e",this.getPageTitle(),"\x3c/h1\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"clear"\x3e\x3c/div\x3e')},renderAccountManagement:function(){var a=juic.createRenderContext();this.userMenu.addEventListener("gotoMyJobAlertPage",
this);this.userMenu.renderHtml(a);this.renderPageTitle(a);this._passwordResetView.renderHtml(a);var b=new RCMCareerAccountManagementPage(this._config);b.addEventListener("deleteProfile",this,"_handleDeleteProfile");b.renderHtml(a)},_handleDeleteProfile:function(){this._deleteProfile.deleteCandidateProfile({candidateId:this._config.candidateId,candidateSecKey:this._config.candidateSecKey,refocusId:document.activeElement.id})},handleEvent:function(a){switch(a.type){case "pwdPolicyAvailable":this._view._setdata(a.data);
this._setdata(a.data);break;case "savePassword":this._view.isValidForDaoCall()&&(this._dao.updatePassword(juic.$(a.target.id+"_currPassword").value,juic.$(a.target.id+"_newPassword").value,this._config.candidateId),this.showLoading());break;case "gotoMyJobAlertPage":var b=juic.$("isRcmDpcs2Enabled").value;a=this._config;Util.setField("candidateId",juic.$("candidateId").value);Util.setField("isRcmDpcs2Enabled",b);a.isRcmDpcs2Enabled=b;Util.setField("candidateSecKey",juic.$("candidateSecKey").value);
a.candidateSecKey=juic.$("candidateSecKey").value;for(var c in a)juic.$(c)&&"isRcmDpcs2Enabled"!=c&&Util.setField(c,a[c]);setField("career_ns","none");setField("career_job_req_id","");setField("subNavBarLevel","EXT_CAREER_JOB_ALERT");setFieldAndSubmit("navBarLevel","MY_PROFILE");break;case "updatePassword":this._view.setResponse(a.data),this.removeLoading()}},showLoading:function(){SFOverlayMgr.showOverlay(this._loading,!0)},removeLoading:function(){this._loading&&this._loading.hide()},_reRender:function(a){this._loadPasswordPolicy();
this.renderAccountManagement()},_setdata:function(a){this._data=a;a=" ";if(null!=this._data.passwordPolicyList)for(var b=0;b<this._data.passwordPolicyList.length;b++)a=a.concat(this._data.passwordPolicyList[b]+" ");this._pwdPolicy=a},createDAO:function(){return new RCMCareerAccountManageDAO},setDAO:function(){this._dao=this.createDAO();this._dao.addEventListener("pwdPolicyAvailable",this);this._dao.addEventListener("updatePassword",this)}});
function RCMCareerAccountManagementPage(a){this.register();this._config=a}
juic.extend(RCMCareerAccountManagementPage,juic.Component,{_deleteProfile:function(){this.dispatch("deleteProfile")},renderHtml:function(a){a.push('\x3cdiv class\x3d"rcmAppBtnWrapper appliedJobBtnWrapper"\x3e');a.push('\x3cdiv tabindex\x3d"0" role\x3d"button" onclick\x3d"',this.fireCode("_backToViewProfile"),'" onkeypress\x3d"',this.fireCode("_handleKeypressAction","backToViewProfile"),'" class\x3d"rcmBackToResultsBtn floatLeft"\x3e',MSGS.RECRUITING_VIEW_PROFILE,"\x3c/div\x3e");a.push('\x3cdiv tabindex\x3d"0" role\x3d"button" id\x3d"',
this.id,'_profileDeleteButton" aria-describedby\x3d"_profileDeleteButton_hidden_text" class\x3d"rcmBackToResultsBtn floatRight"',' onclick\x3d"',this.fireCode("_deleteProfile"),'" onkeypress\x3d"',this.fireCode("_handleKeypressAction","deleteProfile"),'"\x3e',MSGS.RECRUITING_Candidate_Profile_Delete_Profile,'\x3cspan class\x3d"hiddenAriaContent" id\x3d"_profileDeleteButton_hidden_text"\x3e',MSGS.RCM_OPENS_DIALOG,"\x3c/span\x3e","\x3c/div\x3e");a.push("\x3c/div\x3e");juic.$("rcmCareerSettingsCtr")&&
(juic.$("rcmCareerSettingsCtr").innerHTML=a.join(""))},_handleKeypressAction:function(a,b){if("RETURN"==SFDOMEvent.getKeyName(b))switch(a){case "deleteProfile":this._deleteProfile();break;case "backToViewProfile":this._backToViewProfile()}},_backToViewProfile:function(){try{setField("career_ns","none"),setField("career_job_req_id",""),setField("subNavBarLevel",""),setFieldAndSubmit("navBarLevel","MY_PROFILE")}catch(a){}}});function RCMCareerAccountManageDAO(){}
(function(){var a=AjaxService.getMBeanInstance("rcmCareerAccountManageController"),b=AjaxService.getMBeanInstance("pwdPolicyController");juic.extend(RCMCareerAccountManageDAO,juic.EventTarget,{getPwdPolicyController:function(){b||(b=AjaxService.getMBeanInstance("pwdPolicyController"));return b},getController:function(){a||(a=AjaxService.getMBeanInstance("rcmCareerAccountManageController"));return a},deleteCandidateProfile:function(a){if(a){var b=this;b.getController().deleteCandidateProfile(a,{callback:function(a){b.dispatch("candidateProfileDeleted",
{data:a})}})}},getPasswordPolicy:function(a){me=this;var b={dao:this,callback:function(a){b.dao.dispatch("pwdPolicyAvailable",{data:a})}};me.getPwdPolicyController().getPasswordPolicy("false",b)},updatePassword:function(a,b,d){if(d){var c=this;c.getController().updatePassword(a,b,d,{callback:function(a){c.dispatch("updatePassword",{data:a})}})}}})})();function RCMResetPassword(){this.register();this._init()}
juic.extend(RCMResetPassword,juic.Component,{SUCCESS_MSG_TYPE:"success",ERROR_MSG_TYPE:"error",_init:function(a){this._intro=new SFSpan("Password Management");this._smartIndicator=new PasswordSmartIndicator;this._data=a},_checkCurrentPassword:function(a){this.disableChangePwdButton();this.enableSavePasswordButton()},_checkPasswordPolicy:function(a){checkPasswordPolicy(a,juic.$(this.id+"_confirmPassword"));this.disableChangePwdButton();this.enableSavePasswordButton()},_checkResetPasswordPolicy:function(a){checkResetPasswordPolicy(a,
juic.$(this.id+"_newPassword"));this.enableSavePasswordButton()},_isValidInputPassword:function(a){this._smartIndicator&&(this._smartIndicator.setData(this._data),this._smartIndicator.setPasswordValue(juic.$(this.id+"_newPassword").value),this._smartIndicator.computeStrengthAndPercentage());return 1==this._smartIndicator._isValidPassword?!0:!1},_handlePaste:function(){juic.$(this.id+"_confirmPassword").value=""},_setdata:function(a){this._data=a;a=juic.createRenderContext();var b=" ";if(null!=this._data.passwordPolicyList)for(var c=
0;c<this._data.passwordPolicyList.length;c++)b=b.concat(this._data.passwordPolicyList[c]+" ");a.push(b);juic.$(this.id+"_pwdMsg")&&(juic.$(this.id+"_pwdMsg").innerHTML=a.join())},_setSysMessages:function(a,b){this._sysMsg=new SFSysMsg(a,b)},_showNotificationMessage:function(a){var b;b=a.updateResponse;a.messageType==this.ERROR_MSG_TYPE?this._setSysMessages("error",b):a.messageType==this.SUCCESS_MSG_TYPE&&this._setSysMessages("confirm",b);a=juic.createRenderContext();a.push(this._sysMsg);juic.$(this.id+
"_updateResponse")&&a.renderInto(this.id+"_updateResponse")},_resettingElements:function(){juic.$(this.id+"_currPassword").value="";juic.$(this.id+"_newPassword").value="";juic.$(this.id+"_confirmPassword").value="";juic.$(this.id+"_savePaswordButton").disabled=!0;juic.$("rcmPwdPolicyProgressBar").innerHTML="";juic.$("rcmResetPwdPolicyProgressBar").innerHTML="";Util.removeClass(juic.$(this.id+"_savePaswordButton"),"rcmPasswordButton");Util.addClass(juic.$(this.id+"_savePaswordButton"),"rcmDisabledButton");
Util.removeClass(juic.$(this.id+"_newPassword"),"career-password-text-border");Util.removeClass(juic.$(this.id+"_confirmPassword"),"career-password-text-border")},setResponse:function(a){juic.$(this.id+"_updateResponse").innerHTML="";this._showNotificationMessage(a);this._resettingElements();SFDom.setFocus(juic.$(this.id+"_updateResponse"),!0)},_savePassword:function(){this.dispatch("savePassword")},_handleKeypressAction:function(a,b){if("RETURN"==SFDOMEvent.getKeyName(b))switch(a){case "savePassword":this._savePassword()}},
renderHtml:function(a){a.push('\x3cdiv tabindex\x3d"-1" id\x3d"',this.id,'_updateResponse" style\x3d"margin-right:10px;margin-top:10px;"\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv id\x3d"',this.id,'_pwdMsg" class\x3d"sectionInstructionTxt"\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv id\x3d"',this.id,'_formCurrPwd" class\x3d"rcmPasswordInputSection"\x3e');a.push(' \x3cdiv class\x3d"rcmPwdPolicy"\x3e');a.push('\x3cinput aria-label \x3d"',MSGS.RECRUITING_MY_INFO_CURRENT_PASSWORD.replace(":",""),'" id\x3d"',
this.id,'_currPassword" style\x3d"width: 200px;" name\x3d"',MSGS.RECRUITING_MY_INFO_CURRENT_PASSWORD.replace(":",""),'" type\x3d"password" placeholder\x3d "',MSGS.RECRUITING_MY_INFO_CURRENT_PASSWORD.replace(":",""),'" onblur\x3d"',this.fireCode("_checkCurrentPassword"),'" onkeyup\x3d"',this.fireCode("_checkCurrentPassword"),'" value\x3d""  maxlength\x3d"99"\x3e \x3c/input\x3e');a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"clear"\x3e\x3c/div\x3e');a.push('\x3cdiv id\x3d"',
this.id,'_formNewPwd" class\x3d"rcmPasswordInputSection"\x3e');a.push(' \x3cdiv class\x3d"rcmPwdPolicy"\x3e');a.push('\x3cinput title \x3d"',MSGS.COMMON_SF_OPTIONS_PASSWORD_NEW.replace(":",""),'" id\x3d"',this.id,'_newPassword" style\x3d"width: 200px;" name\x3d"',MSGS.COMMON_SF_OPTIONS_PASSWORD_NEW.replace(":",""),'" type\x3d"password" placeholder\x3d "',MSGS.COMMON_SF_OPTIONS_PASSWORD_NEW.replace(":",""),'" onblur\x3d"',this.fireCode("_checkPasswordPolicy"),'" onkeyup\x3d"',this.fireCode("_checkPasswordPolicy"),
'" value\x3d""  maxlength\x3d"99"  \x3e \x3c/input\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv id\x3d"rcmPwdPolicyAnchor"\x3e\x3c/div\x3e');a.push('\x3cdiv class\x3d"progressBar"  id\x3d"rcmPwdPolicyProgressBar"  aria-live\x3d"assertive" role\x3d"alert"\x3e\x3c/div\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"clear"\x3e\x3c/div\x3e');a.push('\x3cdiv id\x3d"',this.id,'_formRepeatPwd" class\x3d"rcmPasswordInputSection"\x3e');a.push(' \x3cdiv class\x3d"rcmPwdPolicy"\x3e');a.push('\x3cinput title \x3d"',
MSGS.COMMON_SF_OPTIONS_PASSWORD_REPEAT.replace(":",""),'"  id\x3d"',this.id,'_confirmPassword" style\x3d"width: 200px;" name\x3d"',MSGS.COMMON_SF_OPTIONS_PASSWORD_REPEAT.replace(":",""),'"  type\x3d"password"  placeholder\x3d"',MSGS.COMMON_SF_OPTIONS_PASSWORD_REPEAT.replace(":",""),'"  onblur\x3d"',this.fireCode("_checkResetPasswordPolicy"),'" onkeyup\x3d"',this.fireCode("_checkResetPasswordPolicy"),'" value\x3d"" maxlength\x3d"99"  \x3e \x3c/input\x3e');a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"progressBar"  id\x3d"rcmResetPwdPolicyProgressBar" aria-live\x3d"assertive" role\x3d"alert"\x3e\x3c/div\x3e');
a.push("\x3c/div\x3e");a.push('\x3cdiv class\x3d"clear"\x3e\x3c/div\x3e');a.push('\x3cdiv tabindex\x3d"0" role\x3d"button" id\x3d"',this.id,'_savePaswordButton" class\x3d"rcmDisabledButton" onclick\x3d"',this.fireCode("_savePassword"),'" onkeypress\x3d"',this.fireCode("_handleKeypressAction","savePassword"),'" disabled\x3d"disabled"\x3e',MSGS.RECRUITING_CAND_SETTING_PASSWORD_BUTTON,"\x3c/div\x3e")},disableChangePwdButton:function(){juic.$(this.id+"_savePaswordButton")&&(juic.$(this.id+"_savePaswordButton").disabled=
!0);Util.removeClass(juic.$(this.id+"_savePaswordButton"),"rcmPasswordButton");Util.addClass(juic.$(this.id+"_savePaswordButton"),"rcmDisabledButton");Util.removeClass(juic.$(this.id+"_newPassword"),"career-password-text-border");Util.removeClass(juic.$(this.id+"_confirmPassword"),"career-password-text-border")},enableChangePwdButton:function(){juic.$(this.id+"_savePaswordButton")&&(juic.$(this.id+"_savePaswordButton").disabled=!1);Util.removeClass(juic.$(this.id+"_savePaswordButton"),"rcmDisabledButton");
Util.addClass(juic.$(this.id+"_savePaswordButton"),"rcmPasswordButton")},enableSavePasswordButton:function(){var a=juic.$(this.id+"_currPassword").value,b=juic.$(this.id+"_newPassword").value,c=juic.$(this.id+"_confirmPassword").value;""==a.trim()||""==b.trim()||""==c.trim()?this.disableChangePwdButton():b!=c?this.disableChangePwdButton():b==c&&(this._isValidInputPassword(b)?this.enableChangePwdButton():this.disableChangePwdButton())},isValidForDaoCall:function(){var a=juic.$(this.id+"_currPassword").value,
b=juic.$(this.id+"_newPassword").value,c=juic.$(this.id+"_confirmPassword").value;return""==a.trim()||""==b.trim()||""==c.trim()||b!=c?(this._resettingElements(),!1):1==this._isValidInputPassword(b)?!0:!1},handleEvent:function(a){switch(a.type){case "pwdPolicyAvailable":this.setData(a.data)}}});function RCMDeleteCandidateProfile(a){this.register();this._init(a)}
juic.extend(RCMDeleteCandidateProfile,juic.Component,{_init:function(a){this._config=a;this._dao=new RCMCareerAccountManageDAO;this._loading=new SFLoading(MSGS.RECRUITING_AGENCY_JOB_ALERT_SAVE_LOAD_MESSAGE);this._dao.addEventListener("candidateProfileDeleted",this)},deleteCandidateProfile:function(a){this._config.candidateId=a.candidateId;this._config.candidateSecKey=a.candidateSecKey;this._config.isRcmDpcs2Enabled?new RevokeDialog({isInternal:!1,candidateId:this._config.candidateId,V12Responsive:!0,
revokeType:dpcs2RevokeType.DELETION_ON_DEMAND_BY_CANDIDATE,isIntranet:this._config.isPublicIntranetCareerSite,candidateSecKey:this._config.candidateSecKey,dpcsId:0,dpcsType:0,refocusId:a.refocusId}):this._showConfirmationPopup("_profileDeleteButton","deleteProfile",MSGS.RECRUITING_CAND_PROFILE_DELETE,MSGS.RECRUITING_Candidate_Profile_Delete_Profile_Confirm)},handleEvent:function(a){switch(a.type){case "candidateProfileDeleted":a.data&&(juic.$("_signout")?juic.$("_signout").click():window.setLocation(a.data))}},
showLoading:function(){SFOverlayMgr.showOverlay(this._loading,!0)},_showConfirmationPopup:function(a,b,c,e){if(!this._confirmationDialog){var d=this._getConfirmationPopupButtons(b);this._confirmationDialog=new RCMResponsiveDialog({dialogTitle:c,contentComponent:new SFLabel(e),buttonDefs:d,innerWidth:350,innerHeight:100});window.isMobile()||this._confirmationDialog.setNewButtons([{label:MSGS.COMMON_Ok,eventName:b,active:!0,baseButtonWrapperClass:"aquabtn rightAlignBtn"},{label:MSGS.COMMON_Cancel,eventName:"cancel",
active:!0,baseButtonWrapperClass:"aquabtn rightAlignBtn"}]);this._confirmationDialog.addEventListener("action",this,b);this._confirmationDialog.setCloseDialogOnEsc(!0)}this._confirmationDialog.showDialog(this.id+a)},_getConfirmationPopupButtons:function(a){return[{label:MSGS.COMMON_Ok,eventName:a,active:!0},{label:MSGS.COMMON_Cancel,eventName:"cancel",active:!0}]},deleteProfile:function(a){"deleteProfile"===a.actionCommand?this._confirmationDialog&&(this._confirmationDialog.close(),this.proceedAction(a.actionCommand)):
"cancel"===a.actionCommand&&this._confirmationDialog.close()},proceedAction:function(a){switch(a){case "deleteProfile":this.showLoading(),this._dao.deleteCandidateProfile(this._config.candidateId)}}});RCMPwdPolicyUtil={setInstance:function(a){this.instance=new RCMPwdPolicy(a)},showProgressBar:function(a,b,c){this.instance&&this.instance.showPasswordBar(a,b,c)},validateReTypePassword:function(a){return this.instance?percentage=this.instance.getStrengthPercentage(a):""}};