function RCMJobApplication(a){this._init(a);this._resumeParsing=this._openSections=!1}
juic.extend(RCMJobApplication,RCMCandidateProfile,{_init:function(a){this._super(a);this.createModel();this._config=a;this.setGoogleKeys();this._dao.addEventListener("jobApplicationModelAvailable",this);this._dao.addEventListener("isAuthorizedForLinkedInAvailable",this);this._dao.addEventListener("createOAuthAccessTokenCompleted",this);this._dao.addEventListener("retryLinkedInPin",this);this._dao.addEventListener("resumeParsingModelAvailable",this);this._dao.addEventListener("jobApplicationSaved",
this);this._dao.addEventListener("deleteDraftedApplication",this);this._dao.addEventListener("jobApplicationUpdated",this);this._dao.addEventListener("applicationWithdrawn",this);this._dao.addEventListener("applicationResubmited",this);this._dao.addEventListener("jobApplied",this);this._applicationFields=[];this._currentSource="jobApplication";this.otpValue=""},createDAO:function(){return new RCMJobApplicationDAO},setDAO:function(){this._dao=this.createDAO()},createModel:function(){this._model=new RCMJobApplicationModel},
setGoogleKeys:function(){this._model.setGoogleAppKey(this._config.googleAppKey);this._model.setGoogleClientId(this._config.googleClientId)},createDeltaModel:function(){this._deltaModel=new RCMJobApplicationDeltaModel},saveJobApplication:function(a,b,c){this._dao.saveJobApplication(this._jobReqId,a,b,c)},deleteDraftedApplication:function(a){this._dao.deleteDraftedApplication(a)},withdrawApplication:function(a){this._dao.withdrawApplication(a)},resubmitApplication:function(a){this._dao.resubmitApplication(a)},
updateJobApplication:function(){var a={jobReqId:this._jobReqId,appId:this._appId,viewApplicationMode:this._model.isReadOnlyMode()};this._dao.updateJobApplication(this.getDeltaModel(),a)},validateFormFields:function(a){if(this._model.isReadOnlyMode()&&!this._model.isUpdateAppicationEnabled())return!0;this._firstInvalidSection=null;var b=this.validateDocumentsContent(a);if(this._model.displayProfile())var c=this.validatePersonalInformationSection(a);var d,e;this._model.isProfileFirst()?(this._model.displayProfile()&&
(d=this.validateCandidateProfileContent(a)),e=this.validateJobApplicationContent(a)):(e=this.validateJobApplicationContent(a),this._model.displayProfile()&&(d=this.validateCandidateProfileContent(a)));return this._model.displayProfile()?e&&c&&d&&b:e&&b},applyJob:function(a,b){var c={jobReqId:this._jobReqId,appId:b,viewApplicationMode:this._model.isReadOnlyMode(),jobPipeline:this._config.jobPipeline,clientId:this._config.clientId,OTP:this.otpValue};this._dao.applyJob(a,c)},sendEventLogChanges:function(a){this._dao.sendEventLogChanges(a)},
getAppId:function(a){return null==a||""==a||"null"==a||" "==a?-1:a},getJobApplication:function(a){this._jobReqId=a.jobReqId;this._appId=this.getAppId(a.fbja_appId);a.fbja_appId=this._appId;this.showLoading();this._isApplyWithLinkedIn=!1;juic.$("isApplyWithLinkedIn")&&(this._isApplyWithLinkedIn="true"==juic.$("isApplyWithLinkedIn").value);this._isApplyWithLinkedIn?this._dao.isAuthorizedForLinkedIn():this._dao.getJobApplication(a)},_handleLinkedInLogin:function(){window.open(this._oauthAccessTokenURL,
"linkedInLoginDlg","height\x3d300,width\x3d600,resizable\x3d1,scrollbars\x3d1");this._handleLinkedInPin()},_handleLinkedInPin:function(){this._linkedInPinDialog=new LinkedInPinDialog;this._linkedInPinDialog.addEventListener("action",this);this._linkedInPinDialog.showDialog()},getContainer:function(){return"rcmJobApplicationCtr"},handleEvent:function(a){this.removeLoading();switch(a.type){case "jobApplicationModelAvailable":this.removeLoading();a.data&&(a.data.candidateApplication.appErrorCodes?this.renderErrorPage(a.data.candidateApplication.appErrorCodes):
(this._isApplyWithLinkedIn?(a.sysMsgType="confirm",a.msg=MSGS.RECRUITING_Candidate_Profile_LinkedIn_Info,this.createDeltaModelFromExtSouce(a.data)):a.data.candidateProfile&&a.data.candidateProfile.uccSocialApply&&this.createDeltaModelFromExtSouce(a.data),this._model.setModelJSON(a.data),this._model.candidateApplicationVO&&0<this._model.candidateApplicationVO.applicationId&&a.data.careerJobAppSecKey&&(this._config.career_job_app_sec_key=a.data.careerJobAppSecKey),this.reRender(),void 0!=a.msg&&this.showNotification(a)));
break;case "isAuthorizedForLinkedInAvailable":if(a.data)if(a.data.isAuthorized){this._isApplyWithLinkedIn=!0;var b={jobReqId:this._jobReqId,fbja_appId:null!=this._model.candidateApplicationVO?this._model.candidateApplicationVO.applicationId:this._appId,career_job_app_sec_key:this._config.career_job_app_sec_key,siteLocale:this._config.siteLocale,isApplyWithLinkedIn:this._isApplyWithLinkedIn};this._dao.getJobApplication(b)}else this.removeLoading(),this._oauthAccessCandidateId=a.data.candidateId,this._oauthAccessCandSecKey=
a.data.candSecKey,this._oauthAccessTokenURL=a.data.oauthAccessTokenURL,this._handleLinkedInLogin();break;case "createOAuthAccessTokenCompleted":this.showLoading();this._isApplyWithLinkedIn=!0;b={jobReqId:this._jobReqId,fbja_appId:null!=this._model.candidateApplicationVO?this._model.candidateApplicationVO.applicationId:this._appId,career_job_app_sec_key:this._config.career_job_app_sec_key,siteLocale:this._config.siteLocale,isApplyWithLinkedIn:this._isApplyWithLinkedIn};this._dao.getJobApplication(b);
break;case "retryLinkedInPin":this._handleLinkedInPin();break;case "reRenderView":this._super(a);break;case "resumeParsingModelAvailable":this.createDeltaModelFromExtSouce(a.data);a.data&&(a.data.candidateApplication.appErrorCodes?this.renderErrorPage(a.data.candidateApplication.appErrorCodes):(this._resumeParsing=this._openSections=!0,this._model.setModelJSON(a.data),this.reRender()));break;case "gotoAccountManagement":b=!0;a=null!=this._model.candidateProfileVO?this._model.candidateProfileVO.config.candidateSecKey:
"";Util.browserInfo.ios&&(b=this.getUserConfirmOnDirtyIniOS());if(b){var c=juic.$("isRcmDpcs2Enabled").value,b=this._config;Util.setField("candidateId",this._model.getCandidateId());Util.setField("isRcmDpcs2Enabled",c);b.isRcmDpcs2Enabled=c;Util.setField("candidateSecKey",a);b.candidateSecKey=a;for(var d in b)juic.$(d)&&"isRcmDpcs2Enabled"!=d&&Util.setField(d,b[d]);setField("career_ns","none");setField("career_job_req_id","");setField("subNavBarLevel","EXT_CAREER_SETTINGS");setFieldAndSubmit("navBarLevel",
"MY_PROFILE")}break;case "gotoMyJobAlertPage":b=!0;Util.browserInfo.ios&&(b=this.getUserConfirmOnDirtyIniOS());if(b){a=null!=this._model.candidateProfileVO?this._model.candidateProfileVO.config.candidateSecKey:"";c=juic.$("isRcmDpcs2Enabled").value;b=this._config;Util.setField("candidateId",this._model.getCandidateId());Util.setField("isRcmDpcs2Enabled",c);b.isRcmDpcs2Enabled=c;Util.setField("candidateSecKey",a);b.candidateSecKey=a;for(d in b)juic.$(d)&&"isRcmDpcs2Enabled"!=d&&Util.setField(d,b[d]);
setField("career_ns","none");setField("career_job_req_id","");setField("subNavBarLevel","EXT_CAREER_JOB_ALERT");setFieldAndSubmit("navBarLevel","MY_PROFILE")}break;case "jobApplied":try{window.isTroubleShootingRCMLogEnabled&&this.sendEventLogChanges(this._model.getCandidateId())}catch(e){}this.removeLoading();a.msg=a.data.jobApplicationActionResponse.MESSAGE;a.sysMsgType=a.data.success?"confirm":"error";a.data.success?(d=[],b={showQualtrics:!0},b.msg=a.data.thanksForApplyMsg?a.data.thanksForApplyMsg:
MSGS.RECRUITING_Your_application_has_been_sent,a.data.displaySMSNotification&&(b.msg=b.msg+"\x3cbr/\x3e"+MSGS.RECRUITING_SMS_WELCOME_NOTIFICATION),a.data.assessmentRequired&&(a.data.assessmentAlreadyTaken?b.asmntMsg="":(b.asmntMsg=a.data.assessmentOrderProcessingSuccessful?MSGS.RECRUITING_JOB_REQUISITION_PENDING_ASSESSMENTS:MSGS.RECRUITING_JOB_REQUISITION_ERROR_IN_ASSESSMENTS,b.isAssessmentButtonRequired=a.data.assessmentOrderProcessingSuccessful?!0:!1)),b.msgType=a.sysMsgType,b.assessmentData=a.data.assessmentVO,
this.getDeltaModel().setDirty(!1),a=new RCMJobApplicationRedirect(b),a.renderHtml(d)):"undefined"!==typeof a.data.errorMessage&&0<a.data.errorMessage.length?this.showErrorNotification(a):this.showNotification(a);break;case "save":this.validateFormFields(!0)?this._config.isRcmDpcs2Enabled?this.checkDpcs2AndProceedAction(a.type,this.getSelectedCountry(),this._config.isPublicIntranetCareerSite):this.proceedAction(a.type):(a.msg=MSGS.RECRUITING_Candidate_Profile_Error_Validation,a.sysMsgType="error",
this.showNotification(a));break;case "deleteSavedApplication":this._showConfirmationPopup(a.refocusRef,"deleteSavedApp",MSGS.RECRUITING_DRAFT_DELETE,MSGS.RECRUITING_CONFIRM_DELETE_SAVED_APPLICATION);break;case "withdraw":this._showConfirmationPopup(a.refocusRef,"withdrawJobApp",MSGS.WITHDRAW_APPLICATION_BTN,MSGS.JOB_REQ_CONFIRM_WITHDRAW);break;case "resubmit":this._showConfirmationPopup(a.refocusRef,"resubmitJobApp",MSGS.RESUBMIT_APPLICATION_BTN,MSGS.JOB_REQ_CONFIRM_RESUBMIT);break;case "submit":this.showLoading();
this.validateFormFields(!1)?this._config.isRcmDpcs2Enabled?this.checkDpcs2AndProceedAction(a.type,this.getSelectedCountry(),this._config.isPublicIntranetCareerSite):this.proceedAction(a.type):(a.msg=MSGS.RECRUITING_Candidate_Profile_Error_Validation,a.sysMsgType="error",this.showNotification(a));break;case "handleAttachmentSuccess":this._handleAttachmentSuccess(a);break;case "cancel":this._showCancelConfirmationPopup();break;case "backToListing":this._backToJobListing();break;case "backToViewProfile":this._backToViewProfile();
break;case "update":this.validateFormFields(!1)?this._config.isRcmDpcs2Enabled?this.checkDpcs2AndProceedAction(a.type,this.getSelectedCountry(),this._config.isPublicIntranetCareerSite):this.proceedAction(a.type):(a.msg=MSGS.RECRUITING_Candidate_Profile_Error_Validation,a.sysMsgType="error",this.showNotification(a));break;case "applyWithLinkedIn":this.applyWitLinkedIn();break;case "showUndoConfirm":this.getDeltaModel().getDirty()?this._showUndoConfirmationPopup():this._showNoChangesAlert();break;case "jobApplicationSaved":this._model.setApplicationId(a.data.applicationId);
try{window.isTroubleShootingRCMLogEnabled&&this.sendEventLogChanges(this._model.getCandidateId())}catch(e){}"undefined"!==typeof a.data.errorMessage&&0<a.data.errorMessage.length?this.showErrorNotification(a):(this.getDeltaModel()._deltas={},this.getDeltaModel().setDirty(!1),a.msg=MSGS.RECRUITING_DRAFT_SAVED_SUCCESS,a.data.displaySMSNotification&&(a.msg=a.msg+"\x3cbr/\x3e"+MSGS.RECRUITING_SMS_WELCOME_NOTIFICATION),a.sysMsgType="confirm",this.showNotification(a),b={jobReqId:this._jobReqId,fbja_appId:null!=
this._model.candidateApplicationVO?this._model.candidateApplicationVO.applicationId:this._appId,career_job_app_sec_key:null!=a.data.careerJobAppsecKey?a.data.careerJobAppsecKey:this._config.career_job_app_sec_key,siteLocale:this._config.siteLocale},this._firstSectionOpen=!0,this._dao.getJobApplication(b));break;case "deleteDraftedApplication":if("0"==a.data)a.msg=MSGS.RECRUITING_DRAFT_DELETE_FAILURE,a.sysMsgType="error",this.showNotification(a);else if("1"==a.data){a.msg=MSGS.RECRUITING_DRAFT_DELETE_SUCCESS;
a.sysMsgType="info";this.showNotification(a);try{setField("career_ns",""),setField("career_job_req_id",""),setField("subNavBarLevel",""),this.getDeltaModel().setDirty(!1),setFieldAndSubmit("navBarLevel","MY_PROFILE")}catch(e){}}break;case "applicationWithdrawn":this.removeLoading();d=a.data.errorDetail?" "+a.data.errorDetail:"";a.msg=a.data.success?MSGS.RECRUITING_JOB_WITHDRAWN:MSGS.RECRUITING_JOB_WITHDRAW_FAILED+d;a.sysMsgType=a.data.success?"confirm":"error";a.data.success?(d=[],b={},b.msg=a.msg,
b.msgType=a.sysMsgType,this.getDeltaModel().setDirty(!1),a=new RCMJobApplicationRedirect(b),a.renderHtml(d)):this.showNotification(a);break;case "applicationResubmited":this.removeLoading();d=a.data.errorDetail?" "+a.data.errorDetail:"";a.msg=a.data.success?MSGS.JOB_REQ_RESUBMITTED:MSGS.RECRUITING_JOB_RESUBMIT_FAILED+d;a.sysMsgType=a.data.success?"confirm":"error";a.data.success?(d=[],b={},b.msg=a.msg,b.msgType=a.sysMsgType,this.getDeltaModel().setDirty(!1),a=new RCMJobApplicationRedirect(b),a.renderHtml(d)):
this.showNotification(a);break;case "jobApplicationUpdated":try{window.isTroubleShootingRCMLogEnabled&&this.sendEventLogChanges(this._model.getCandidateId())}catch(e){}this.removeLoading();a.msg=a.data.jobApplicationActionResponse.MESSAGE;a.sysMsgType=a.data.success?"confirm":"error";a.data.success?(this.getDeltaModel().setDirty(!1),this.getDeltaModel()._deltas={},this.showNotification(a)):"undefined"!==typeof a.data.errorMessage&&0<a.data.errorMessage.length?this.showErrorNotification(a):this.showNotification(a);
break;case "action":switch(a.actionCommand){case "securityCodeAvailable":this.showLoading();this._dao.createOAuthAccessToken(this._oauthAccessCandidateId,this._oauthAccessCandSecKey,a.securityCode);break;case "cancelLinkedInApply":this._isApplyWithLinkedIn=!1;b={jobReqId:this._jobReqId,isApplyWithLinkedIn:this._isApplyWithLinkedIn};this._dao.getJobApplication(b);break;case "getNewSecurityCode":this._dao.isAuthorizedForLinkedIn(this._candId,this._isUserId)}}},renderHeaderFooterSection:function(a,b){var c=
{};c.text="header"==b?this._model.getHeaderInstructions():this._model.getFooterInstructions();c.css=b;c.readOnlyMode=this._model.isReadOnlyMode();c.updateApplication=this._model.isUpdateAppicationEnabled();c.isWithdrawnApp=3==this._config.jaSystemStatus?!0:!1;c.isCandidateProfile=!1;c.applId=this._appId;this.content=new RCMHeaderFooterSection(c);this.content.addEventListener("submit",this);this.content.addEventListener("cancel",this);this.content.addEventListener("save",this);this.content.addEventListener("withdraw",
this);this.content.addEventListener("resubmit",this);this.content.addEventListener("deleteSavedApplication",this);this.content.addEventListener("backToListing",this);this.content.addEventListener("backToViewProfile",this);this.content.addEventListener("update",this);this.content.renderHtml(a)},_showConfirmationPopup:function(a,b,c,d){if(this._confirmationDialog)this._confirmationDialog.showDialog(this.id+a);else{var e=this._getConfirmationPopupButtons(b);this._confirmationDialog=new RCMResponsiveDialog({dialogTitle:c,
contentComponent:new SFLabel(d),buttonDefs:e,innerWidth:350,innerHeight:100});window.isMobile()||this._confirmationDialog.setNewButtons([{label:MSGS.COMMON_Ok,eventName:b,active:!0,baseButtonWrapperClass:"aquabtn rightAlignBtn"},{label:MSGS.COMMON_Cancel,eventName:"cancel",active:!0,baseButtonWrapperClass:"aquabtn rightAlignBtn"}]);this._confirmationDialog.addEventListener("action",this,b);this._confirmationDialog.setCloseDialogOnEsc(!0);this._confirmationDialog.showDialog(a)}},_backToJobListing:function(){setField("career_ns",
"job_listing_summary");document.forms[0].submit()},_backToViewProfile:function(){var a=!0;Util.browserInfo.ios&&(a=this.getUserConfirmOnDirtyIniOS());if(a)try{setField("career_ns","none"),setField("career_job_req_id",""),setField("subNavBarLevel",""),setField("reqAction",""),setFieldAndSubmit("navBarLevel","MY_PROFILE")}catch(b){}},cancelJobApp:function(a){"cancelApplication"==a.actionCommand?this._cancelCandidateProfileDialog&&(this._cancelCandidateProfileDialog.close(),this.cancelJobApplication("job_listing_summary")):
"cancel"==a.actionCommand&&this._cancelCandidateProfileDialog.close()},withdrawJobApp:function(a){"withdrawJobApp"==a.actionCommand?this._confirmationDialog&&(this._confirmationDialog.close(),this.proceedAction(a.actionCommand)):"cancel"==a.actionCommand&&this._confirmationDialog.close()},deleteSavedApp:function(a){"deleteSavedApp"==a.actionCommand?this._confirmationDialog&&(this._confirmationDialog.close(),this.proceedAction(a.actionCommand)):"cancel"==a.actionCommand&&this._confirmationDialog.close()},
resubmitJobApp:function(a){"resubmitJobApp"==a.actionCommand?this._confirmationDialog&&(this._confirmationDialog.close(),this.proceedAction(a.actionCommand)):"cancel"==a.actionCommand&&this._confirmationDialog.close()},_getCancelConfirmationPopupButtons:function(){return[{label:MSGS.COMMON_Ok,eventName:"cancelApplication",active:!0},{label:MSGS.COMMON_Cancel,eventName:"cancel",active:!0}]},_getWithdrawConfirmationPopupButtons:function(){return[{label:MSGS.COMMON_Ok,eventName:"withdrawJobApp",active:!0},
{label:MSGS.COMMON_Cancel,eventName:"cancel",active:!0}]},_getConfirmationPopupButtons:function(a){return[{label:MSGS.COMMON_Ok,eventName:a,active:!0},{label:MSGS.COMMON_Cancel,eventName:"cancel",active:!0}]},cancelJobApplication:function(a){setField("career_ns",a);document.forms[0].submit()},_showUndoConfirmationPopup:function(){if(!this._unDoCandidateProfileDialog){var a=this._getUndoConfirmationPopupButtons();this._unDoCandidateProfileDialog=new RCMResponsiveDialog({dialogTitle:MSGS.COMMON_Undo,
contentComponent:new SFLabel(MSGS.RECRUITING_UNDO_RESUME_PARSING_CHANGES),buttonDefs:a,innerWidth:550,innerHeight:200});window.isMobile()||this._unDoCandidateProfileDialog.setNewButtons([{label:MSGS.COMMON_Ok,eventName:"undoCandidateProfileChanges",active:!0,baseButtonWrapperClass:"aquabtn rightAlignBtn"},{label:MSGS.COMMON_Cancel,eventName:"cancel",active:!0,baseButtonWrapperClass:"aquabtn rightAlignBtn"}]);this._unDoCandidateProfileDialog.addEventListener("action",this,"undoChanges");this._unDoCandidateProfileDialog.setCloseDialogOnEsc(!0)}this._unDoCandidateProfileDialog.showDialog(this.id+
"_undoBtn")},undoChanges:function(a){"undoCandidateProfileChanges"==a.actionCommand?(this._unDoCandidateProfileDialog&&this._unDoCandidateProfileDialog.close(),this.showLoading(),this._isApplyWithLinkedIn=!1,this._dao.getJobApplication({jobReqId:this._jobReqId,fbja_appId:this._appId,career_job_app_sec_key:this._config.career_job_app_sec_key,siteLocale:this._config.siteLocale,isApplyWithLinkedIn:this._isApplyWithLinkedIn}),this.getDeltaModel().setDirty(!1),this.getDeltaModel()._deltas={}):"cancel"==
a.actionCommand&&this._unDoCandidateProfileDialog.close()},_getUndoConfirmationPopupButtons:function(){return[{label:MSGS.COMMON_Ok,eventName:"undoCandidateProfileChanges",active:!0},{label:MSGS.COMMON_Cancel,eventName:"cancel",active:!0}]},_showNoChangesAlert:function(){this._noChangesAlert||(this._noChangesAlert=new RCMResponsiveDialog({dialogTitle:MSGS.COMMON_ALERT,contentComponent:new SFLabel(MSGS.RECRUITING_JOB_APPLY_NO_CHANGES),buttonDefs:[{label:MSGS.COMMON_Ok,eventName:"noChangesApp",active:!0}],
innerWidth:350,innerHeight:75}),this._noChangesAlert.addEventListener("action",this,"noChanges"),this._noChangesAlert.setCloseDialogOnEsc(!0));this._noChangesAlert.showDialog(this.id+"_undoBtn")},noChanges:function(a){"noChangesApp"==a.actionCommand&&this._noChangesAlert&&this._noChangesAlert.close()},getPageTitle:function(){return this._model.getHeaderTitle()},validateJobApplicationContent:function(a){var b=!0;if(!this._rcmJobApplicationFieldsComponent)return b;if(this._rcmJobApplicationFieldsComponent._inputTextFields||
this._rcmJobApplicationFieldsComponent._jobAppQuestionFields)b=this._rcmJobApplicationFieldsSection.validateAllFields(a);b||this._firstInvalidSection||(this._firstInvalidSection=this._rcmJobApplicationFieldsSection);return b},reRender:function(){var a=juic.createRenderContext();this._sections=[];var b={};this._model._modelJSON.assessmentCompletedSuccessfully?(b.msg=MSGS.RECRUITING_CANDIDATE_ASMNT_SUCCESSFUL,b.msgType="confirm",(new RCMJobApplicationRedirect(b)).renderHtml(a)):(this.renderUserMenu(a),
this.renderPageTitle(a),this._model.isReadOnlyMode()||this._model.isUpdateAppicationEnabled()?(this._model.hideProfile(),b=this.getAttachments(!0)):b=this.getAttachments(!1),this.renderHeaderFooterSection(a,"header"),this.renderHeaderActions(a),this._model.isLateStageApplication()&&this.renderLateStageNotificationMsg(a),this._model.isForwardedAsApplicant()&&this.renderForwardedAsApplicantNotificationMsg(a),this._model.showWarnChangeInternationalPref&&this.renderPreferenceChangeNotificationMsg(a),
this._model.isAssessmentPortletRequired&&(this._firstSectionOpen=!0,this.renderAssessment(a)),this._model.isOnlineOffersPortletRequired&&(this._firstSectionOpen=!0,this.renderOnlineOffers(a)),this._model.isInterviewSchedulePortletRequired&&(this._firstSectionOpen=!0,this.renderInterviewScheduling(a)),this._model.displayProfile()?(this.renderDocumentSection(a,b),this.renderPersonalInformationSection(a),this._model.isProfileFirst()?(this.renderCandidateProfileContent(a),this.renderJobApplicationContent(a)):
(this.renderJobApplicationContent(a),this.renderCandidateProfileContent(a))):(0<b.length?this.renderDocumentSection(a,b):this._openSections=!0,this.renderJobApplicationContent(a)),this.renderHeaderFooterSection(a,"footer"),juic.$("rcmJobApplicationCtr").innerHTML=a.join(""))},renderAssessment:function(a){this._assessmentPortlet=new RCMCandAssessment(this._model.getAssessmentData(),this.getDeltaModel(),this._config);this._instructionText=MSGS.RECRUITING_ASSESSMENT_REPORT_NEXT_STEP+" "+MSGS.RECRUITING_CANDIDATE_ASSESSMENT_COMPLETE_ASSESSMENT;
this._assessmentSection=new RCMFormSection(!0,MSGS.RECRUITING_ASSESSMENT_PORTLET_TABLE_HEADER,this._assessmentPortlet,{sectionInstructionText:this._instructionText});this._assessmentSection.renderHtml(a);this._sections.push(this._assessmentSection)},_getDocumentSectionConfig:function(){return{candidateId:this._model.getCandidateId(),candSecKey:null!=this._model.getCandidateProfileFields()?this._model.getCandidateProfileFields().config.hashKey:null,candidateName:null!=this._model.getCandidateProfileFields()?
this._model.getCandidateProfileFields().candidateFullName:null,manualcandidateSecKey:null!=this._model.getCandidateProfileFields()?this._model.getCandidateProfileFields().config.manualcandidateSecKey:null,fieldType:"multiattachmentselection",locale:this._config.siteLocale,source:this._currentSource,isUploadFromDropboxRequired:this._model.isUploadFromDropboxRequired(),isUploadFromGoogleDriveRequired:this._model.isUploadFromGoogleDriveRequired(),googleAppKey:this._model.getGoogleAppKey(),googleClientId:this._model.getGoogleClientId(),
showOnlyRequiredFieldsInMobile:this.showOnlyRequiredFieldsInMobile,viewMode:null!=this._model.getCandidateProfileFields()?this._model.isViewModeForProfile():null,applicationId:this._model.candidateApplicationVO?this._model.candidateApplicationVO.applicationId:null}},renderOnlineOffers:function(a){this._offerPortlet=new RCMOnlineOffer(this._model.getOpenOffersData(),this.getDeltaModel(),this._config);this._offerSection=new RCMFormSection(!this._model.isAssessmentPortletRequired,MSGS.RECRUITING_PENDING_ONLINE_OFFER_AVAILABLE_TITLE,
this._offerPortlet);this._offerSection.renderHtml(a);this._sections.push(this._offerSection)},renderInterviewScheduling:function(a){this._interviewPortlet=new RCMInterviewScheduling(this._model.getOpenInterviewData(),this.getDeltaModel(),this._config);this._interviewSection=new RCMFormSection(!this._model.isAssessmentPortletRequired,MSGS.COMMON_CAREERS_MY_INTERVIEWS,this._interviewPortlet);this._interviewSection.renderHtml(a);this._sections.push(this._interviewSection)},renderLateStageNotificationMsg:function(a){this._lateStgMsg=
new SFSysMsg("info",MSGS.RECRUITING_LATE_STAGE_APPLICATION_CANDIDATE_INFO,MSGS.RECRUITING_LATE_STAGE_APPLICATION_CANDIDATE_INFO_DETAILS);this._lateStgMsg.renderHtml(a)},renderForwardedAsApplicantNotificationMsg:function(a){this._forwardedAsApplicantMsg=new SFSysMsg("info",MSGS.RCM_FORWARDED_AS_APPLICANT_INFO,MSGS.RCM_FORWARDED_AS_APPLICANT_INFO_DETAILS);this._forwardedAsApplicantMsg.renderHtml(a)},renderPreferenceChangeNotificationMsg:function(a){this._preferenceChange=new SFSysMsg("alert",MSGS.RECRUITING_WARN_CHANGE_INTERNATIONAL_PREF,
MSGS.RECRUITING_WARN_CHANGE_INTERNATIONAL_PREF_DETAILS);this._preferenceChange.renderHtml(a)},getAttachments:function(a){var b=[];if(null==a||0==a)b=this._super();if(1==a){a=this._model.getResume();var c=this._model.getCoverLetter(),d=this._model.isResumeVisible(),e=this._model.isCoverLetterVisible();d&&null!=a&&(a=this.getResumeCoverLetterInfo(a,"resume"),a.label=a.templateName||MSGS.RECRUITING_RESUME,a.fieldType="resume",a.required=a.config.fieldConfig.isRequired,b.push(a));e&&null!=c&&(c=this.getResumeCoverLetterInfo(c,
"coverLetter"),c.label=c.templateName||MSGS.RECRUITING_COVERLETTER,c.fieldType="coverLetter",c.required=c.config.fieldConfig.isRequired,b.push(c))}a=this._model.getApplicationMultiAttachmentsVO();null!=a&&0<a.length&&b.push(a);return b},renderJobApplicationContent:function(a){var b=this._model.getApplicationFields(),c={candidateId:this._model.displayProfile()?null!=this._model.getCandidateProfileFields().config?this._model.getCandidateProfileFields().config.candidateId:null:this._model.getCandidateApplicationVO().candidateId,
locale:this._config.siteLocale,resumeParsing:this._resumeParsing,canDelete:!1,source:this._currentSource,showOnlyRequiredFieldsInMobile:this.showOnlyRequiredFieldsInMobile,isSSNValidationEnabled:this._model.isSSNValidationEnabled,fromJobApplication:!0};0<b.applicationFields.length&&(this._rcmJobApplicationFieldsComponent=new RCMJobSpecificInfo(b,this.getDeltaModel(),c),this._rcmJobApplicationFieldsSection=new RCMFormSection(this._openSections,MSGS.RECRUITING_V12_JOB_APP_JOB_SPECIFIC_INFO,this._rcmJobApplicationFieldsComponent,
{canAdd:!1,showContinueBtn:!0}),this._rcmJobApplicationFieldsSection.renderHtml(a),this._sections.push(this._rcmJobApplicationFieldsSection))},renderErrorPage:function(a){this._jobAppErroContent=new RCMJobApplicationError(a);this._jobAppErroContent.renderHtml([])},applyWitLinkedIn:function(){this.showLoading();this._dao.isAuthorizedForLinkedIn()},toggleCandidateFields:function(){SFDom.toggleClass("rcmJobApplicationCtr","hide")},saveCandProfile:function(){var a={OTP:this.otpValue};this.showLoading();
this.saveJobApplication(this.getDeltaModel(),this._model.candidateApplicationVO.applicationId,a)},applyCandidateApplication:function(){this.applyJob(this.getDeltaModel(),this._model.candidateApplicationVO.applicationId)},hideOtpSectionAndApply:function(){this.otpValue=juic.$("passcode").value;juic.$("otpContainer").innerHTML="";this.toggleCandidateFields();this.showLoading();this.applyCandidateApplication()},proceedAction:function(a){switch(a){case "save":!this._config.isInternalCareerSite&&this._config.isOtpVerificationEnabled&&
this.verifyContactEmailChange()?(this.toggleCandidateFields(),this.verifyOtp()):this.saveCandProfile();break;case "submit":!this._config.isInternalCareerSite&&this._config.isOtpVerificationEnabled&&this.verifyContactEmailChange()?(this.removeLoading(),this.toggleCandidateFields(),this.verifyOtp(!0)):this.applyCandidateApplication();break;case "withdrawJobApp":this.showLoading();this.withdrawApplication(this._jobReqId);break;case "resubmitJobApp":this.showLoading();this.resubmitApplication(this._jobReqId);
break;case "update":this.showLoading();this.updateJobApplication();break;case "deleteSavedApp":this.showLoading(),this.deleteDraftedApplication(this._model.candidateApplicationVO.applicationId)}}});function RCMJobApplicationDAO(){}
(function(){var a=AjaxService.getMBeanInstance("rcmHybridJobApplicationController"),b=AjaxService.getMBeanInstance("rcmAppliedJobActionsController");juic.extend(RCMJobApplicationDAO,juic.EventTarget,{getController:function(){a||(a=AjaxService.getMBeanInstance("rcmHybridJobApplicationController"));return a},getApplicationActionController:function(){b||(b=AjaxService.getMBeanInstance("ajaxServiceAppActionController"));return b},getJobApplication:function(a){if(a){var b=this;b.getController().getJobApplication(a,
{callback:function(a){b.dispatch("jobApplicationModelAvailable",{data:a})}})}},isAuthorizedForLinkedIn:function(){var a=this;a.getController().isAuthorizedForLinkedIn({callback:function(b){a.dispatch("isAuthorizedForLinkedInAvailable",{data:b})}})},createOAuthAccessToken:function(a,b,e){var c={model:this,callback:function(a){c.model.dispatch("createOAuthAccessTokenCompleted",{data:a})},errorHandler:function(a,b){alert(a);c.model.dispatch("retryLinkedInPin")}};this.getController().createOAuthAccessToken(a,
b,e,c)},getCandidateProfileWithResumeParsing:function(a){if(a){var b=this;a.resumeParsingRequired=!0;b.getController().getJobApplication(a,{callback:function(a){b.dispatch("resumeParsingModelAvailable",{data:a})}})}},saveJobApplication:function(a,b,e,f){var c=this;c.getController().saveAsDraftJobApplication(JSON.stringify(b.getChanges()),a,e,b.getQuestionResponses(),b.getAttachmentInfos(),f,{callback:function(a){c.dispatch("jobApplicationSaved",{data:a})}})},deleteDraftedApplication:function(a){var b=
this;b.getController().deleteDraftedApplication(a,{callback:function(a){b.dispatch("deleteDraftedApplication",{data:a})}})},updateJobApplication:function(a,b){var c=this;c.getController().updateJobApplication(JSON.stringify(a.getChanges()),a.getQuestionResponses(),a.getAttachmentInfos(),b,{callback:function(a){c.dispatch("jobApplicationUpdated",{data:a})}})},withdrawApplication:function(a){var b=this;b.getApplicationActionController().withdrawJobApplication(a,{callback:function(a){b.dispatch("applicationWithdrawn",
{data:a})}})},resubmitApplication:function(a){var b=this;b.getApplicationActionController().resubmitJobApplication(a,{callback:function(a){b.dispatch("applicationResubmited",{data:a})}})},applyJob:function(a,b){var c=this;c.getController().applyJob(JSON.stringify(a.getChanges()),b,a.getQuestionResponses(),a.getAttachmentInfos(),{callback:function(a){c.dispatch("jobApplied",{data:a})}})},sendEventLogChanges:function(a,b){this.getController().printEventLogChanges(b,JSON.stringify(window.eventsLogForRCMMA),
{callback:function(a){window.eventsLogForRCMMA=[]},exceptionHandler:function(a){window.eventsLogForRCMMA=[]},errorHandler:function(a){window.eventsLogForRCMMA=[]}})}})})();function RCMJobApplicationRedirect(a){this.register();this._config=a;this.init(this._config)}
juic.extend(RCMJobApplicationRedirect,juic.Component,{init:function(a){this._msg=a.msg;this._asmntMsg=a.asmntMsg;this._showQualtrics=a.showQualtrics;this._msgType=a.msgType;this._showTakeAssessmentButton=a.isAssessmentButtonRequired;this._assessmentData=a.assessmentData},renderHtml:function(a){a.push('\x3cdiv class\x3d"msgContent"\x3e');this._asmntMsg&&(a.push('\x3cdiv id\x3d"applyAsmntMsg"\x3e'),a.push(this._asmntMsg),a.push("\x3c/div\x3e"));a.push('\x3cdiv id\x3d"applyConfirmMsg"\x3e');a.push(this._msg);
a.push("\x3c/div\x3e");a.push("\x3cdiv class\x3d'rcmSuccessBackToResultsBtnWrapper'\x3e");a.push('\x3cdiv tabindex\x3d"0" role\x3d"button" onclick\x3d"',this.fireCode("_backToJobList"),'" onkeypress\x3d"',this.fireCode("_handleKeyPress","backToJobList"),'" class\x3d"rcmSuccessBackToResultsBtn"\x3e',MSGS.RECRUITING_JOB_APPLY_BACKTOLIST,"\x3c/div\x3e");a.push('\x3cdiv tabindex\x3d"0" role\x3d"button"  onclick\x3d"',this.fireCode("_backToViewProfile"),'" onkeypress\x3d"',this.fireCode("_handleKeyPress",
"backToViewProfile"),'" class\x3d"rcmSuccessBackToResultsBtn"\x3e',MSGS.RECRUITING_VIEW_PROFILE,"\x3c/div\x3e");this._showTakeAssessmentButton&&a.push('\x3cdiv tabindex\x3d"0" role\x3d"button" onclick\x3d"',this.fireCode("_takeAssessment"),'" onkeypress\x3d"',this.fireCode("_handleKeyPress","takeAssessment"),'" class\x3d"rcmSuccessBackToResultsBtn"\x3e',MSGS.RECRUITING_TAKE_ASSESSMENT,"\x3c/div\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");juic.$("rcmJobApplicationCtr")&&(juic.$("rcmJobApplicationCtr").innerHTML=
a.join(""));if(this._showQualtrics){var b=new sfQualtricsFeedBackPopUp("RECRUITING","EXTERNAL_JOB_APPLY");a.push(b._renderQualtricsFeedback())}},_handleKeyPress:function(a){if("RETURN"==SFDOMEvent.getKeyName(a))switch(action){case "backToJobList":this._backToJobList();break;case "backToViewProfile":this._backToViewProfile();break;case "takeAssessment":this._takeAssessment()}},_backToJobList:function(){try{setField("navBarLevel","JOB_SEARCH"),setFieldAndSubmit("career_ns","job_listing_summary")}catch(a){}},
_backToViewProfile:function(){try{setField("career_ns","none"),setField("career_job_req_id",""),setField("subNavBarLevel",""),setFieldAndSubmit("navBarLevel","MY_PROFILE")}catch(a){}},_takeAssessment:function(){window.open(this._assessmentData.assessmentUrl,"_self",!1)}});