function SMRF(){}
SMRF={AJAXSERVICE_KEY_LEGACY:"legacy\x3d",_newStylesheetIndex:document.styleSheets.length-1,_loadedStyleNum:0,_downloadRequestedMap:{},_urlCallbacks:{},_has31CSSFilesLimitation:!1,__scriptAttributes:{},load:function(a,b){var c={callbackObj:b,urls:a};this.originalParams=c;if(window.DEPS_TREE&&window.DEPS_VERSION_MAP){var d=document.getElementsByTagName("link"),f=document.getElementsByTagName("style");SMRF._loadedStyleNum=d.length+f.length;d=navigator.userAgent;f=/MSIE ([0-9]+\.[0-9]+)/.exec(d);this._has31CSSFilesLimitation=
-1==d.indexOf("Opera")&&10>parseFloat(f&&f[1]);SMRF._load(c)}else this._dynamicLoadingFinished(c)},_findScriptPath:function(a,b,c){juic.assert(a||c,"Module name must be specified when the legacy mode is false (ajaxServiceId\x3d"+b+")");return"/ui/"+(a?"v4":c)+"/js/ajaxservice/"+b+"ASProxy.js"},_isAjaxServiceDirectory:function(a){return-1!=a.indexOf("ajaxservice:")},_normalizeUrl:function(a){if(!this._isAjaxServiceDirectory(a))return a;var b=null,c=a.indexOf(":"),d=Math.max(a.indexOf("."),c),f=a.indexOf("?");
if(0<=c&&0<=d&&d>=c){var b=a.substring(c+1,d==c?c+1:d),c=a.substring(d+1,0<f?f:a.length),e=!1;f>d&&(d=a.indexOf(this.AJAXSERVICE_KEY_LEGACY),d>f&&(f=a.indexOf("\x26",d),0>f&&(f=a.length),e="true"==a.substring(d+this.AJAXSERVICE_KEY_LEGACY.length,f)));b=this._findScriptPath(e,c,b)}return b},_load:function(a){for(var b=a.urls,c=b.length,d=[],f={},e=0;e<c;e++){var g=DEPS_VERSION_MAP[this._normalizeUrl(b[e])];if(g)SMRF._populateURLListForDownload(g,d,f);else throw Error("DEPS_VERSION_MAP does not contain value for url: "+
b[e]);}if(0<d.length)SMRF._downloadFiles(d,a);else{d=!0;for(e=0;e<c;e++)if(g=DEPS_VERSION_MAP[this._normalizeUrl(b[e])],0<DEPS_TREE[g].length){d=!1;break}if(d)this._dynamicLoadingFinished(a);else for(var h in f)this._addCallback(h,a)}},_dynamicLoadingFinished:function(a){a=a.callbackObj;void 0!=a&&("function"==typeof a?(cb=a,cb()):(cb=a.callback,args=a.argument,cb(args)))},_populateURLListForDownload:function(a,b,c){var d=[a],f={};for(f[a]=!0;d.length;){var e=d.pop();a=DEPS_TREE[e]||[];1===a.length?
this._downloadRequestedMap[e]?c[e]=!0:(this._downloadRequestedMap[e]=!0,b.push(e)):d.push.apply(d,a.filter(function(a){var b=!f[a]&&a!==e;f[a]=!0;return b}))}},_deleteDownloadedFileRefs:function(a,b){for(var c=DEPS_TREE[b],d=c.length-1;0<=d;d--)c[d]==a&&c.splice(d,1)},_downloadFiles:function(a,b){for(var c=document.getElementsByTagName("script"),d=document.getElementsByTagName("link"),f=0;f<a.length;f++){var e=a[f];0<e.indexOf(".js")?SMRF._isAlreadyIncluded(e,c,"src")?(this._addCallback(e,b),SMRF._resourceLoadedCallback(e)):
SMRF._appendScriptAndCallCallback(e,b):0<e.indexOf(".css")&&(SMRF._isAlreadyIncluded(e,d,"href")?(this._addCallback(e,b),SMRF._resourceLoadedCallback(e)):(SMRF._loadedStyleNum++,SMRF._appendStylesheet(e,b),this._newStylesheetIndex++,window.opera||-1!=navigator.userAgent.indexOf("MSIE"))?this._has31CSSFilesLimitation&&31<SMRF._loadedStyleNum&&(this._addCallback(e,b),SMRF._resourceLoadedCallback(e)):SMRF._callCallbackForStylesheet(this._newStylesheetIndex,e,b))}},_isAlreadyIncluded:function(a,b,c){if(document.getElementById(a))return!0;
for(var d=b.length,f=0;f<d;f++){var e=b[f],g;if((g="src"==c?e.src:e.href)&&0<=g.indexOf(a))return e.id=a,!0}return!1},_resourceLoadedCallback:function(a){var b=this._urlCallbacks[a];if(b){for(var c in DEPS_TREE)this._deleteDownloadedFileRefs(a,c);this._urlCallbacks[a]=null;b.forEach(function(a){this._load(a)}.bind(this))}},_getLocationOrigin:function(a){a||(a=window.location);var b=a.origin;b||(b=a.protocol+"//"+a.hostname,(a=a.port)&&(b+=":"+a));return b},_ensureBaseDomain:function(a){if(a&&0==a.indexOf("/")){if(null==
this._relativePathPrefix){var b=document.getElementById("bizXRemotableHeader");if(b&&"true"==b.content){var c=window.pageHeaderJsonData,b=c&&c.baseUrl,c=c&&c.defaultBaseUrl,d=this._getLocationOrigin();this._relativePathPrefix=b&&d!==b&&d!==c?b:""}else this._relativePathPrefix=""}a=this._relativePathPrefix+a}return a},_appendStylesheet:function(a,b){var c=document.createElement("link");c.id=a;c.href=this._ensureBaseDomain(a);c.rel="stylesheet";c.type="text/css";this._attachLoadHandlers(c,a,b);document.getElementsByTagName("head")[0].appendChild(c)},
_appendScriptAndCallCallback:function(a,b){var c=document.createElement("script"),d=SMRF.__scriptAttributes;if(d&&"object"===typeof d)for(var f in d)null!=d[f]&&c.setAttribute(f,d[f]);c.id=a;c.type="text/javascript";c.src=this._ensureBaseDomain(a);this._attachLoadHandlers(c,a,b);document.getElementsByTagName("head")[0].appendChild(c)},_addCallback:function(a,b){var c=this._urlCallbacks[a]=this._urlCallbacks[a]||[];0>c.indexOf(b)&&c.push(b)},_attachLoadHandlers:function(a,b,c){this._addCallback(b,
c);a.addEventListener?a.onload=function(){SMRF._resourceLoadedCallback(b)}:a.readyState&&(a.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||SMRF._resourceLoadedCallback(b)})},_callCallbackForStylesheet:function(a,b,c){c&&SMRF._addCallback(b,c);try{document.styleSheets[a].cssRules?SMRF._resourceLoadedCallback(b):document.styleSheets[a].rules&&document.styleSheets[a].rules.length?SMRF._resourceLoadedCallback(b):setTimeout(function(){SMRF._callCallbackForStylesheet(a,
b)},250)}catch(d){setTimeout(function(){SMRF._callCallbackForStylesheet(a,b)},250)}}};