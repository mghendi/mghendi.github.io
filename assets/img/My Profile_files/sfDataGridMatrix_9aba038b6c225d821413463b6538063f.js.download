function SFDataGridMatrix(m,n){this.register();this._init(m,n)}
(function(){function m(){this.register();this._init.apply(this,arguments)}function n(a,b){a||(a=document.createElement("div"),document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a),a.onselectstart=function(){return!1},a.unselectable="on",a.style.display="none",a.style.position="absolute",a.style.zIndex=b);return a}function p(a,b){for(var c=a.getCellManager(),d=c.size(),e=0;e<d.width;e++)if(c.get(0,e)===b)return e}var t={className:"headerRow",fixedSize:23,
header:!0,frozen:!0},u={fixedSize:23},v=Util.browserInfo.ios?20:3;juic.extend(SFDataGridMatrix,juic.Component,{_init:function(a,b){var c=UIVersion.getCurrentInstance();this._themable=c&&0<=c.compareTo(UIVersion.V12);this._draggableColumns=b&&b.draggableColumns;this._dimension=b&&b.dimension;this._autoResize=b&&b.autoResize;this._ellipsis=b&&b.ellipsis;for(var d=b&&b.rows,e=b&&b.rowSpacing,h=b&&b.columnOptions||{adjustmentType:"simple"},k=[t],f=[[]],l=[],c=0;c<a.length;c++){var g=a[c];l.push(this._createDataGridColumn(g));
f[0].push(this._createHeaderComponent(g))}if(d)for(g=0;g<d.length;g++){for(var m=d[g]||[],n=this._createRowSpacing(g,e&&e[g]),p=[],c=0;c<a.length;c++)p[c]=this._createContentComponent(m[c],g);k.push(n);f.push(p)}this._matrixLayout=new SFMatrixLayout(f,{rowSpacing:k,columnSpacing:l,columnOptions:h,scrollableCells:!1,dragByResizing:b&&b.dragByResizing,minimizeSpace:b&&b.minimizeSpace,dimension:this._dimension,adjusterSize:b&&null!=b.adjusterSize?b.adjusterSize:v,useCustomScrollBar:b&&b.useCustomScrollBar,
className:"gridMatrix"+(this._themable?" globalTable":"")});this._matrixLayout.addEventListener("dimensionAdjusted",this);this._cellManager=this._matrixLayout.getCellManager();d=this._cellManager.size();for(g=0;g<d.height;g++)for(c=0;c<d.width;c++)this._cellManager.get(g,c).setMatrixLayout(this._matrixLayout)},renderHtml:function(a){this._matrixLayout.renderHtml(a)},handleEvent:function(a){switch(a.type){case "adjustHeight":this._handleAdjustHeight(a.target);break;case "columnDrop":case "dimensionAdjusted":this.dispatchEvent(a);
break;case "sort":var b=p(this._matrixLayout,a.target);if(this._sortedHeader!=a.target){if(this._sortedHeader){this._sortedHeader.setDirection(null);var c=p(this._matrixLayout,this._sortedHeader);0<=c&&c<this._cellManager.size().width&&this._cellManager.setSpacingOption("x",c,"className","cell")}this._cellManager.setSpacingOption("x",b,"className","sort cell")}this._sortedHeader=a.target;this.dispatch("sort",{column:b,direction:a.target.getDirection()})}},appendRow:function(a,b){this.insertRow(null,
a,b)},appendRows:function(a,b){this.insertRows(null,a,b)},insertRow:function(a,b,c){this.insertRows(a,[b],c&&[c])},insertRows:function(a,b,c){var d=this._cellManager.size(),e=[],h=[],k=b.length;a=null==a?d.height-1:a;for(var f=0;f<k;f++){for(var l=e[f]=[],g=0;g<d.width;g++)l[g]=this._createContentComponent(b[f][g],a+f);h[f]=this._createRowSpacing(a+f,c&&c[f])}this._cellManager.insertMultipleInto("y",a+1,e,h);for(f=0;f<k;f++)for(g=0;g<d.width;g++)e[f][g].adjustDOM();this._updateRowIndices(a+k+1)},
resetRows:function(a){this.removeRows(0,this._cellManager.size().height-1,a)},removeRow:function(a,b){this.removeRows(a,1,b)},removeRows:function(a,b,c){if(c){c=this._cellManager.size();for(var d=0;d<b;d++)for(var e=0;e<c.width;e++)this._cellManager.get(a+d+1,e).cleanupComponent()}this._cellManager.remove("y",a+1,b,!0);this._updateRowIndices(a+1)},moveRow:function(a,b,c){a++;b++;this._cellManager.size();this._cellManager.move("y",a,b,c);this._updateRowIndices(Math.min(a,b),Math.max(a,b,b+c-1)+1)},
appendColumn:function(a,b){this.insertColumn(null,a,b)},insertColumn:function(a,b,c){var d=[],e=this._cellManager.size();c=this._createDataGridColumn(c);a=null==a?e.width:a;d.push(this._createHeaderComponent(c));for(var e=this._cellManager.size().height-1,h=0;h<e;h++)d.push(this._createContentComponent(b[h],h));this._cellManager.insertInto("x",a,d,c)},removeColumn:function(a,b){this.removeColumns(a,1,b)},removeColumns:function(a,b,c){if(c){c=this._cellManager.size();for(var d=0;d<b;d++)for(var e=
0;e<c.height;e++)this._cellManager.get(e,a+d).cleanupComponent()}this._cellManager.remove("x",a,b,!0)},moveColumn:function(a,b,c){this._cellManager.move("x",a,b,c)},setRowClassName:function(a,b){this._cellManager.setSpacingOption("y",a+1,"className",this._getRowClassName(a,b))},setColumnClassName:function(a,b){this._cellManager.setSpacingOption("y",a,"className",b)},setRowSize:function(a,b){this._matrixLayout.setSingleDimension("y",a+1,b)},getRowSize:function(a){return this._matrixLayout.getSingleDimension("y",
a+1)},setColumnSize:function(a,b){this._matrixLayout.setSingleDimension("x",a,b)},getColumnSize:function(a){return this._matrixLayout.getSingleDimension("x",a)},setDimension:function(a){this._dimension=a;this._matrixLayout.setDimension(a)},adjustDOM:function(){this._dimension||this._matrixLayout.adjustDOM();(this._autoResize||this._ellipsis)&&this._matrixLayout.broadcast("adjustDOM")},broadcast:function(){this._matrixLayout.broadcast("call",arguments)},scrollTo:function(a,b){this._matrixLayout.scrollTo(a+
1,b)},scrollToAxis:function(a,b){this._matrixLayout.scrollToAxis(a,b)},scrollToRow:function(a){this._matrixLayout.scrollToAxis("y",a+1)},scrollToColumn:function(a){this._matrixLayout.scrollToAxis("x",a)},cleanup:function(){this._matrixLayout.broadcast("cleanupComponent");this._matrixLayout.cleanup(!0);this.unregister()},sortedBy:function(a,b){var c=null;this._sortedHeader&&(c=p(this._matrixLayout,this._sortedHeader));null!=c&&c!=a&&(this._sortedHeader.setDirection(null),this._cellManager.setSpacingOption("x",
c,"className",null));this._sortedHeader=this._cellManager.get(0,a);this._sortedHeader.setDirection(b);this._cellManager.setSpacingOption("x",a,"className","sort cell")},getComponent:function(a,b){return this._cellManager.get(a+1,b).getComponent()},getColumnOffsets:function(){return this._matrixLayout.getPageOffsets("x")},getColumnOffset:function(a){return this._matrixLayout.getPageOffset("x",a)},getRowOffsets:function(){var a=this._matrixLayout.getPageOffsets("y");a.splice(0,1);return a},getRowOffset:function(a){return this._matrixLayout.getPageOffset("y",
a+1)},getDimension:function(){return this._matrixLayout.getDimension()},getAutoScroller:function(){return this._matrixLayout.getAutoScroller()},getRowCount:function(){return this._matrixLayout.getCellManager().size().height-1},getRowAt:function(a){for(var b=[],c=this._matrixLayout.getCellManager(),d=c.size().width,e=0;e<d;e++)b.push(c.get(a+1,e).getComponent());return b},getColumnWidths:function(){return this._matrixLayout.getAxisSizes("x")},setColumnWidths:function(a){this._matrixLayout.setAxisSizes("x",
a)},_handleAdjustHeight:function(a){this._adjustRows||(this._adjustRows=[]);a=a.getRowIndex();this._adjustRows.contains(a)||this._adjustRows.push(a);this._handleAdjustId||(this._handleAdjustId=setTimeout(Util.createCallback(this,"_batchHandleAdjustHeight"),0))},_batchHandleAdjustHeight:function(){if(this._adjustRows)for(var a=this._cellManager.size(),b=0;b<this._adjustRows.length;b++){for(var c=this._adjustRows[b],d=0,e=0;e<a.width;e++)var h=this._cellManager.get(c,e).getActualHeight(),d=Math.max(d,
h);e=this._matrixLayout.getSingleDimension("y",c);d!=e&&(this._matrixLayout.setSingleDimension("y",c,d),this._cellManager.getSpacingManager("y").setBounds(c,{minSize:d}))}this._adjustRows=[];this._handleAdjustId=null},_updateRowIndices:function(a,b){var c=this._cellManager.size();b=b||c.height;for(var d=a;d<b;d++){this._cellManager.setSpacingOption("y",d,"className",this._getRowClassName(d));for(var e=0;e<c.width;e++)this._cellManager.get(d,e).setRowIndex(d)}},_createRowSpacing:function(a,b){var c=
juic.set({},b||u);c.className=this._getRowClassName(a,b&&b.className);return c},_createDataGridColumn:function(a){a=juic.set({},a);a.className=(a.className?a.className+" ":"")+"cell";return a},_getRowClassName:function(a,b){return(this._themable?0==a%2?"row":"alterRow":0==a%2?"b":"a")+(b?" "+b:"")},_createHeaderComponent:function(a){a=new m(a.label,{className:"gridHeader",sortable:a.sortable,draggable:this._draggableColumns&&!a.frozen,autoResize:this._autoResize,ellipsis:this._ellipsis});a.addEventListener("columnDrop",
this);a.addEventListener("adjustHeight",this);a.addEventListener("sort",this);a.setMatrixLayout(this._matrixLayout);a.setRowIndex(0);return a},_createContentComponent:function(a,b){var c=new m(a,{className:"gridRow",autoResize:this._autoResize,ellipsis:this._ellipsis});c.addEventListener("adjustHeight",this);c.setMatrixLayout(this._matrixLayout);c.setRowIndex(b+1);return c}});m.prototype=function(){return juic.set(new juic.Component,{_init:function(a,b){this._component=a;this._options=b;var c=this._component;
this&&this.addEventListener&&c&&c.handleEvent&&(this._allowedEvents&&!this._allowedEvents.resize||this.addEventListener("resize",c))},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'"');var b=this._options&&this._options.draggable,c=this._options&&this._options.ellipsis,d=[this._options&&this._options.className],e=0>=this.getRowCount();b&&!e&&(d.push("draggable"),a.push(' unselectable\x3d"on" onselectstart\x3d"return false;" onmousedown\x3d"'),a.push(this.fireCode("_fireDragStart"),'" ontouchstart\x3d"',
this.fireCode("_fireDragStart"),'"'));c&&d.push("no-wrap");a.push(' class\x3d"',d.join(" "),'"\x3e\x3cdiv class\x3d"gridCell"\x3e');this._options.sortable&&(a.push('\x3ca href\x3d"javascript:void(0);" onclick\x3d"',this.fireCode("_fireSort")),a.push('return false;" class\x3d"link"\x3e'));this._component&&this._component.renderHtml?this._component.renderHtml(a):a.push(this._component?juic.escapeHTML(this._component.toString()):"");this._options.sortable&&(b="\x26nbsp;",AccessibilityPrefs.isLowVisionEnabled()&&
this._direction&&(b="up"==this._direction?"\x26uArr;":"\x26dArr;"),a.push('\x3cspan id\x3d"',this.id,'arrow" class\x3d"',this._direction?"sort"+this._direction:"",'"\x3e'+b+"\x3c/span\x3e\x3c/a\x3e"));a.push("\x3c/div\x3e");c&&a.push('\x3cdiv class\x3d"ellipsis cellColors"\x3e...\x3c/div\x3e');a.push("\x3c/div\x3e")},_getXpoint:function(a){return Util.isRTL()?SFDom.getViewportWidth()-a:a},handleDragEvent:function(a){var b=r=n(r,"99999"),c="left";Util.isRTL()&&(c="right");switch(a.type){case "dragStart":this._dragging=
!0;this._cellManager.size();this._originIndex=p(this._matrixLayout,this);this._originSection=this._matrixLayout.getSectionName("x",this._originIndex);var d=juic.$(this.id);this._originPosition={top:this._matrixLayout.getPageOffset("y",0),left:this._matrixLayout.getPageOffset("x",this._originIndex)};var e={top:this._originPosition.top+"px",width:this._dimension.width+"px",height:this._dimension.height+"px",display:""};e[c]=this._originPosition.left;b.className="gridHeaderProxy";b.innerHTML=d.innerHTML;
juic.set(b.style,e);this._lastPoint=a.origin;this._movePointer();break;case "drag":b.style.top=this._originPosition.top-a.origin.y+a.point.y+"px";b.style[c]=this._originPosition.left-this._getXpoint(a.origin.x)+this._getXpoint(a.point.x)+"px";this._originSection==SFMatrixLayout.MIDDLE_SECTION&&this._autoScroller.autoScrollAxis(a.point,"x");this._lastPoint=a.point;this._movePointer();break;case "dragEnd":a=this._originIndex,d=this._dropPosition,a<d&&d--,(q=n(q,"100000")).style.display="none",this._cellManager.move("x",
a,d,1),this.dispatch("columnDrop",{index0:a,index1:d}),a=new SFPoint(this._matrixLayout.getPageOffset("x",d),this._originPosition.top),this._autoScroller.stopScrolling(),d={top:a.y},d[c]=a.x,SFAnimUtil.animate(b,d,{duration:.3,easing:"easeOut",complete:function(){b.style.display="none";b.innerHTML="";b.style.width=""}}),this._dragging=!1}},handleEvent:function(a){switch(a.type){case "resize":this.setDimension(a);break;case "autoScroll":this._handleAutoScroll()}},adjustDOM:function(){var a=juic.$(this.id);
if(a&&this._dimension)if(this._options.autoResize){this._heightPadding||(this._heightPadding=parseInt(SFDom.getStyle(a,"padding-top")),this._heightPadding+=parseInt(SFDom.getStyle(a,"padding-bottom")));a.style.height=Math.max(0,this._dimension.height-this._heightPadding)+"px";var a=a.firstChild.offsetHeight+this._heightPadding,b=this._actualHeight&&this._actualHeight!=a||a>this._dimension.height;this._actualHeight=a;b&&this.dispatch("adjustHeight")}else this._options.ellipsis&&(this._widthPadding||
(this._widthPadding=SFDom.getPadding(a,"x")),SFDom[this._dimension.width<a.firstChild.scrollWidth+this._widthPadding?"addClass":"removeClass"](a,"show-ellipsis"))},getActualHeight:function(){return this._actualHeight},setDimension:function(a){this._dimension={width:a.width,height:a.height};this.dispatch("resize",this._dimension);this.adjustDOM()},getDirection:function(){return this._direction},setDirection:function(a){this._direction=a;if(a=juic.$(this.id+"arrow"))a.className=this._direction?"sort"+
this._direction:""},setMatrixLayout:function(a){a&&(this._matrixLayout=a,this._cellManager=a.getCellManager(),this._options&&this._options.draggable&&(this._autoScroller=this._matrixLayout.getAutoScroller(),this._autoScroller.addEventListener("autoScroll",this)))},setRowIndex:function(a){this._rowIndex=a},getRowIndex:function(){return this._rowIndex},getRowCount:function(){return this._cellManager.size().height-1},getComponent:function(){return this._component},cleanupComponent:function(){this._component&&
this._component.cleanup&&this._component.cleanup();delete this._component},setOptions:function(a){juic.set(this._options,a);if(a=juic.$(this.id))a.className=this._options.className},call:function(a,b){this._component[a]&&this._component[a].apply(this._component,b?b:[])},_fireSort:function(){this.setDirection("up"==this._direction?"down":"up");this.dispatch("sort",{direction:this._direction})},_movePointer:function(){var a=0,b="left",c=1;Util.isRTL()&&(b="right",c=-1);var d=Number.POSITIVE_INFINITY;
this._originSection==SFMatrixLayout.MIDDLE_SECTION&&(d=this._autoScroller.getScrollEl(),a=SFDom.getX(d),d=a+d.offsetWidth);for(var e=this._matrixLayout.getPageOffsets("x"),h=Number.POSITIVE_INFINITY,k,f=0;f<e.length;f++)this._originSection==this._matrixLayout.getSectionName("x",f)&&!this._cellManager.isHidden("x",f)&&e[f]>=a&&e[f]<=d&&(k=Math.abs(e[f]-this._getXpoint(this._lastPoint.x)),k<h&&(h=k,this._dropPosition=f),k=f);this._pointerOffset=e[this._dropPosition];var l=e[k]+this._matrixLayout.getSingleDimension("x",
k);l>=a&&l<=d&&(k=Math.abs(e[f]-this._getXpoint(this._lastPoint.x)),k<h&&(this._pointerOffset=l,this._dropPosition+=c));a=q=n(q,"100000");"none"==a.style.display&&(a.className="gridDropPointer",a.innerHTML="\x26nbsp;",juic.set(a.style,{display:"",top:this._originPosition.top+"px"}));a.style[b]=this._pointerOffset+"px"},_handleAutoScroll:function(){this._dragging&&this._movePointer()},_fireDragStart:function(a){SFDragDropMgr.handleMouseDown(a,this,{useShim:!0,shimCursor:"move"})}})}();var r=null,q=
null})();