var AttachmentTypeEnum={RESUME:"RESUME",COVER_LETTER:"COVERLETTER"},ResumeViewerPageContextEnum={CAND_SEARCH:"CANDIDATE_SEARCH_PAGE",CAND_SUMMARY_OR_WB:"CAND_SUMMARY_OR_WORKBENCH_PAGE"};
function AttachmentViewerDialog(a){assert(a.title,"You need to specify a title for the AttachmentViewerDialog.");assert(a.attachmentType,"You need to specify a attachment type for the AttachmentViewerDialog.");this.register();this._title=a.title;this._nextPrevLabel=a.nextPrevLabel;this._attachmentType=a.attachmentType;this._attachObj=a.attachObj;this._pageContext=a.pageContext;this._selectedCandidates=a.selectedCandidates?a.selectedCandidates:null;this._candStatusModel=a.candStatusModel?a.candStatusModel:
null;this._refreshVisible=a.refreshVisible?a.refreshVisible:!1;this._refreshEnabled=a.refreshEnabled?a.refreshEnabled:!1;this.refocusId=a.refocusId?a.refocusId:"";this._init()}
AttachmentViewerDialog.prototype=function(){return set(new Component,{_attachmentViewer:null,_actionDialog:null,_init:function(){try{var a=YAHOO.util.Dom.getViewportHeight(),a=Math.round(a-.2*a);585>a&&(a=585);var b=screen.width,b=1280>b?980:1190;switch(this._attachmentType){case AttachmentTypeEnum.RESUME:var c={viewPortHeight:a,viewPortWidth:b,refreshVisible:this._refreshVisible,refreshEnabled:this._refreshEnabled};this.resumeViewerContainer=new ResumeViewerContainer(this._nextPrevLabel,this._attachmentType,
this._attachObj,this._pageContext,this._selectedCandidates,this._candStatusModel,c);this.resumeViewerContainer.getResumeImageModel();this._actionDialog=this._createDlg(b,a,this.resumeViewerContainer);break;default:this._attachmentViewer=new AttachmentViewer(this._nextPrevLabel,this._attachmentType,this._attachObj,a,c),this._attachmentViewer.getResumeImageModel(),this._actionDialog=this._createDlg(b,a,this._attachmentViewer)}}catch(d){this._hideDlg(),alert(MSGS.COMMON_ATTACHMENT_INTERNAL_ERROR)}},
_createDlg:function(a,b,c){a=new SFDialog(this._title,c,[{label:MSGS.COMMON_Close,eventName:"cancel",btnType:"normal",visible:!1}],a,b);a.addEventListener("action",this);a.setBodyStyle(' style\x3d"padding:0px;"');return a},_hideDlg:function(){SFOverlayMgr.removeOverlay(this.id);switch(this._attachmentType){case AttachmentTypeEnum.RESUME:this.resumeViewerContainer.hideDlg();"CAND_SUMMARY_OR_WORKBENCH_PAGE"==this._pageContext&&this.resumeViewerContainer.reloadParentOnClose&&(window.location.href=window.location.href);
break;default:null!=this._attachmentViewer&&(this._attachmentViewer.unregister(),this._attachmentViewer=null)}null!=this._actionDialog&&(this._actionDialog.cleanup(),this._actionDialog=null)},renderHtml:function(a){a.push("\x3cdiv class\x3d'AttachmentViewerDialog' id\x3d\"",this.id,'"\x3e');this._renderInner(a);a.push("\x3c/div\x3e")},_renderInner:function(a){try{this._actionDialog.renderHtml(a)}catch(b){this._hideDlg(),alert(MSGS.COMMON_ATTACHMENT_INTERNAL_ERROR)}},rerender:function(){if($(this.id)){var a=
[];this._renderInner(a);$(this.id).innerHTML=a.join("")}},handleEvent:function(a){"action"!=a.type||"cancel"!=a.actionCommand&&"hide"!=a.actionCommand||(this._hideDlg(),this.dispatch("action",{actionCommand:"attachmentViewerCancel"}))}})}();
function ResumeViewerContainer(a,b,c,d,e,f,g){this.register();this._pageContextCssClass="";this._nextPrevLabel=a;this._attachmentType=b;this._attachObj=c;this._pageContext=d;this._selectedCandidates=e;this._candStatusModel=f;this._viewPortHeight=g.viewPortHeight;this._commentPermissionRequired=!0;this._commentConfig={};this._portletConfig={};this._init(g);this.reloadParentOnClose=!1}
ResumeViewerContainer.prototype=function(){return set(new Component,{_candidateActionsPanel:null,_resumeViewerVO:null,_currResumeIndex:-1,_init:function(a){this._attachmentViewer=new AttachmentViewer(this._nextPrevLabel,this._attachmentType,this._attachObj,this._viewPortHeight,a);this._attachmentViewer.addEventListener("action",this);this._actionDAO=new ResumeViewerDAO;this._actionDAO.addEventListener("action",this);"CANDIDATE_SEARCH_PAGE"==this._pageContext&&(this._pageContextCssClass="searchResultsPage")},
renderHtml:function(a){a.push("\x3ctable class\x3d'attachmentViewerTblLayout' style\x3d'width:100%'\x3e\x3ctr\x3e");a.push("\x3ctd id\x3d'",this.id,"rvLeftPanel' class\x3d'rvLeftPanel'\x3e\x3cdiv role\x3d'region' aria-label\x3d'",MSGS.COMMON_Resume,"' tabindex\x3d'0'\x3e",this._attachmentViewer,"\x3c/div\x3e\x3c/td\x3e");a.push("\x3ctd class\x3d'rvRightPanel ",this._pageContextCssClass,"'\x3e\x3cdiv id\x3d'",this.id,"_actionsPanelId' class\x3d'rvActionPanel' role\x3d'region' aria-label\x3d'",MSGS.COMMON_ACTIONS,
"' tabindex\x3d'0'\x3e");null!=this._candidateActionsPanel&&this._candidateActionsPanel.renderHtml(a);a.push("\x3c/div\x3e\x3c/td\x3e");a.push("\x3c/tr\x3e\x3c/table\x3e")},hideDlg:function(){null!=this._attachmentViewer&&(this._attachmentViewer.unregister(),this._attachmentViewer=null)},getResumeImageModel:function(){this._attachmentViewer.getResumeImageModel()},_handleResumeImageModelCompleted:function(a){a.actionData&&(this._resumeViewerVO=a.actionData,(a=this._resumeViewerVO.resumeImageVOs)&&
0<a.length&&(this._currResumeIndex=0,this._getActionsForCandidate(a[0],this._commentPermissionRequired)))},_handleUpdateCurrentActions:function(a){this._isValidResumeIndex(a.currAttachmentIndex)&&(this._currResumeIndex=a.currAttachmentIndex,this._getActionsForCandidate(this._resumeViewerVO.resumeImageVOs[a.currAttachmentIndex],this._commentPermissionRequired))},_isValidResumeIndex:function(a){return this._resumeViewerVO&&this._resumeViewerVO.resumeImageVOs&&0<this._resumeViewerVO.resumeImageVOs.length?
0<=a&&a<this._resumeViewerVO.resumeImageVOs.length:!1},_getCandidateModel:function(a){if(null!=this._selectedCandidates&&0<this._selectedCandidates.length)for(var b=0;b<this._selectedCandidates.length;b++)if(this._selectedCandidates[b].candId==a)return this._selectedCandidates[b];return null},_getActionsForCandidate:function(a,b){this._actionDAO.getActionsForCandidate(this._pageContext,this._attachObj.jobReqId,a.candidateId,escapeHTML(a.candidateName),a.applicationId,a.employeeReferral,b)},_handleActionsForCandidateCompleted:function(a){if(a.actionData&&
this._attachmentViewer){this._candidateList=[];this._candStatusModel&&(this._candStatusModel.showDPCSOverride=a.actionData.showDPCSOverride?a.actionData.showDPCSOverride:!1);this._commentPermissionRequired&&(this._commentConfig.readPermissionForComment=a.actionData.readPermissionForComment,this._commentConfig.writePermissionForComment=a.actionData.writePermissionForComment,this._commentConfig.currentUserFullName=a.actionData.currentUserFullName,this._commentConfig.includeShowOnProfile=a.actionData.showOnProfile,
this._commentPermissionRequired=!1);this._portletConfig.tagPortlet={};this._portletConfig.tagPortlet.candidateTagsVisible=a.actionData.candidateTagsVisible;if(this._isValidResumeIndex(this._currResumeIndex)){null!=this._selectedCandidates&&this._currResumeIndex<this._selectedCandidates.length&&this._candidateList.push(this._getCandidateModel(this._resumeViewerVO.resumeImageVOs[this._currResumeIndex].candidateId));var b=!0;1>this._resumeViewerVO.resumeImageVOs[this._currResumeIndex].attachImageIds.length&&
(b=!1)}this._candidateActionsPanel=new CandidateActionsPanel(a.actionData,this._candidateList,this._candStatusModel,{attachmentType:this._attachmentType,resExist:b},this._commentConfig,this._viewPortHeight,this._portletConfig,this._pageContext);this._candidateActionsPanel.addEventListener("action",this);this._candidateActionsPanel.render(this.id+"_actionsPanelId")}},handleEvent:function(a){if("action"==a.type)switch(a.actionCommand){case "nextAttachAction":case "prevAttachAction":case "firstAttachAction":case "lastAttachAction":case "gotoAttachment":this._handleUpdateCurrentActions(a);
break;case "getActionsForCandidateCompleted":this._handleActionsForCandidateCompleted(a);break;case "getActionsForCandidateError":a.actionData&&alert(a.actionData);break;case "getResumeImageModelCompleted":this._handleResumeImageModelCompleted(a);break;case "updateAppStatus":this.reloadParentOnClose=!0;break;case "commentContentExpanded":this._actionDAO.getApplicationComment(a.applicationId,a.jobReqId,this._commentConfig.currentUserFullName,this._commentConfig.includeShowOnProfile);break;case "saveApplicationCommentComplete":this.reloadParentOnClose=
!0;this._candidateActionsPanel.setSavedApplicationComment(a);break;case "getApplicationCommentComplete":this._candidateActionsPanel.setApplicationComment(a);break;case "saveApplicationComments":this._actionDAO.saveApplicationComments(a.changes,a.commentData,a.showOnProfile,a.appId,a.jobReqId,a.candId,this._commentConfig.currentUserFullName);break;case "tagContentExpanded":this._actionDAO.getCandidateTags(a.candId);break;case "updateCandidateTagsComplete":this.reloadParentOnClose=!0;this._candidateActionsPanel.setUpdatedCandidateTags(a);
this._candidateActionsPanel&&this._candidateActionsPanel._candidateActionItems&&this._candidateActionsPanel._candidateActionItems._tagPortletContent&&SFDom.setFocus(this._candidateActionsPanel._candidateActionItems._tagPortletContent.id+"_apply-updates-button",!0);break;case "getCandidateTagsComplete":this._candidateActionsPanel.setCandidateTags(a);break;case "updateCandidateTags":this._actionDAO.updateCandidateTags(a.changes,a.candId,a.pageContext)}}})}();
function CandidateActionsPanel(a,b,c,d,e,f,g,h){this.register();this._success=a.success;this._statusMsg=a.statusMsg;this._jobReqId=a.jobReqId;this._candId=a.candidateId;this._candidateName=a.candidateName;this._userId=a.usersSysId;this._appId=a.applicationId;this._appStatus=a.customizedStatusName;this._appStatusType=a.appStatusType;this._actionItems=a.actionItems;this._isEmployeeReferral=a.employeeReferral;this._candidateList=b;this._candStatusModel=c;this._isResumeOrCoverLetterSensitive=a.resumeOrCoverLetterSensitive;
this._attachmentType=d.attachmentType;this._resExist=d.resExist;this._commentConfig=e?e:{};this._viewHeight=f;this._portletConfig=g?g:{};this._pageContext=h;this._init()}
CandidateActionsPanel.prototype=function(){return set(new Component,{_candidateActionMessage:null,_init:function(){this._candidateInfoHeader=new CandidateInfoHeader(this._userId,this._candidateName,this._appStatus,this._appStatusType,this._isEmployeeReferral,{attachmentType:this._attachmentType,resExist:this._resExist,isResumeOrCoverLetterSensitive:this._isResumeOrCoverLetterSensitive});this._candidateInfoHeader.addEventListener("action",this);this._candidateActionMessage=new CandidateActionMessage(this._statusMsg);
this._candidateActionItems=new CandidateActionItems(this._actionItems,this._jobReqId,this._candidateList,this._candStatusModel,this._appId,this._candId,this._commentConfig,this._portletConfig,this._pageContext);this._candidateActionItems.addEventListener("action",this)},setStatusMsg:function(a){this._statusMsg=a;$(this.id+"_actionStatusMsgId")&&(this._candidateActionMessage.render(this.id+"_actionStatusMsgId"),this.toggleActionMessageTabIndex("0"))},renderHtml:function(a){a.push('\x3cdiv id\x3d"',
this.id,'_candInformation"\x3e');a.push("\x3cdiv id\x3d'candInfoHeader' class\x3d'candidateInfoHeader'\x3e");this._candidateInfoHeader.renderHtml(a);a.push("\x3c/div\x3e\x3cdiv class\x3d'rvSeparator'\x3e\x3c/div\x3e\x3cdiv id\x3d'",this.id,"_actionStatusMsgId' class\x3d'rvCandActionMsg' tabindex\x3d'-1' role\x3d'alert' aria-live\x3d'assertive'\x3e");a.push("\x3cdiv class\x3d'clear'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d'",this.id,"_candActionItemsId' class\x3d'rvCandActionItems' tabindex\x3d'0'\x3e");
a.push("\x3cdiv class\x3d'sr-only'\x3e",MSGS.COMMON_Actions_Menu,"\x3c/div\x3e");this._candidateActionItems.renderHtml(a);a.push("\x3c/div\x3e")},setApplicationComment:function(a){this._candidateActionItems&&this._candidateActionItems.setApplicationComment(a.actionData)},setCandidateTags:function(a){this._candidateActionItems&&this._candidateActionItems.setCandidateTags(a.actionData)},setSavedApplicationComment:function(a){var b=juic.$(this.id+"_actionStatusMsgId");if(b)if(a.actionData){var c=a.actionData.saveActionSuccess;
a.actionData.userAuthorized?c?(this._candidateActionMessage.setValue(MSGS.RECRUITING_INLINE_VIEW_RESUME_COMMENT_SAVE_ACTION_SUCCESSFULL),this._candidateActionMessage.setCssClass("statusSuccess")):(this._candidateActionMessage.setValue(MSGS.RECRUITING_INLINE_VIEW_RESUME_COMMENT_SAVE_ACTION_ERROR),this._candidateActionMessage.setCssClass("actionError")):(this._candidateActionMessage.setValue(MSGS.RECRUITING_INLINE_VIEW_RESUME_COMMENT_SAVE_ACTION_UNAUTHORIZED),this._candidateActionMessage.setCssClass("actionError"));
this._candidateActionMessage.render(this.id+"_actionStatusMsgId");b.setAttribute("tabindex","0");SFDom.setFocus(b.id)}else b.innerHTML="",b.setAttribute("tabindex","-1");this.setApplicationComment(a)},setUpdatedCandidateTags:function(a){var b=juic.$(this.id+"_actionStatusMsgId");b&&(a.actionData?(this._candidateActionMessage.setValue(MSGS.RECRUITING_INLINE_VIEW_RESUME_TAGS_SAVE_ACTION_SUCCESS),this._candidateActionMessage.setCssClass("statusSuccess"),this._candidateActionMessage.render(this.id+"_actionStatusMsgId"),
this.toggleActionMessageTabIndex("0")):(b.innerHTML="",this.toggleActionMessageTabIndex("-1")));this.setCandidateTags(a)},toggleActionMessageTabIndex:function(a){var b=juic.$(this.id+"_actionStatusMsgId");b&&(b.setAttribute("tabindex",a),SFDom.setFocus(b.id))},handleEvent:function(a){if("action"==a.type)switch(a.actionCommand){case "displayStatusMsg":this._candidateActionMessage.setValue(MSGS.RECRUITING_ATTACHMENT_CHANGES_SAVED+" "+a.statusMsg);this._candidateActionMessage.setCssClass("statusSuccess");
this._candidateActionMessage.render(this.id+"_actionStatusMsgId");this.toggleActionMessageTabIndex("0");break;case "displayWarningMsg":this._candidateActionMessage.setValue(a.statusMsg);this._candidateActionMessage.setCssClass("statusWarning");this._candidateActionMessage.render(this.id+"_actionStatusMsgId");this.toggleActionMessageTabIndex("0");break;case "displayCommentSavingError":case "displayLengthyCommentError":this._candidateActionMessage.setValue(a.statusMsg);this._candidateActionMessage.setCssClass("actionError");
this._candidateActionMessage.render(this.id+"_actionStatusMsgId");this.toggleActionMessageTabIndex("0");break;case "updateAppStatus":this._candidateInfoHeader.updateAppStatus(a);this.dispatch("action",{actionCommand:"updateAppStatus"});break;case "commentContentExpanded":this.dispatch("action",{actionCommand:"commentContentExpanded",applicationId:a.applicationId,jobReqId:a.jobReqId});break;case "tagContentExpanded":this.dispatch("action",{actionCommand:"tagContentExpanded",candId:a.candId});break;
case "saveApplicationComments":this.dispatch("action",{actionCommand:"saveApplicationComments",changes:a.changes,commentData:a.commentData,showOnProfile:a.showOnProfile,appId:this._appId,jobReqId:this._jobReqId,candId:this._candId});break;case "updateCandidateTags":this.dispatch("action",{actionCommand:"updateCandidateTags",changes:a.changes,candId:this._candId,pageContext:this._pageContext})}}})}();
function CandidateInfoHeader(a,b,c,d,e,f){this.register();this._userId=a;this._candidateName=b;this._appStatus=c;this._appStatusType=d;this._isEmployeeReferral=e;this._attachmentType=f.attachmentType;this._resExist=f.resExist;this._isResumeOrCoverLetterSensitive=f.isResumeOrCoverLetterSensitive;this._init()}
CandidateInfoHeader.prototype=function(){return set(new Component,{_init:function(){},renderHtml:function(a){a.push("\x3cdiv class\x3d'candIcon globalFloatLeft rvCandidateCell'\x3e",'\x3cimg src\x3d"/localpicture?ps_p_action\x3dshow\x26amp;ps_p_uid\x3d',this._userId,"\x26amp;p_type\x3dquickcard\x26amp;_s.crb\x3d",ajaxSecKey,'" class\x3d"rvCandidatePhoto"\x3e\x3c/img\x3e',"\x3c/div\x3e\x3cdiv class\x3d'candidateInfo'\x3e","\x3cdiv\x3e\x3cspan class\x3d'rvCandidateName' tabindex\x3d'0'\x3e",this._candidateName,
"\x3c/span\x3e");this._isEmployeeReferral&&(this._empReferralIcon=new RCMIcon("empReferralIcon",MSGS.RECRUITING_EMPLOYEE_REFERRAL,!0),this._empReferralIcon.renderHtml(a));a.push("\x3c/div\x3e\x3cdiv class\x3d'candAppStatus' tabindex\x3d'0'\x3e",MSGS.COMMON_Status,": ",this._appStatus,"\x3c/div\x3e\x3cdiv class\x3d'emailCandidate avIcon'\x3e\x3c/div\x3e");a.push("\x3c/div\x3e")},_addResumeHover:function(){var a=juic.$("resume_"+this.id),b=juic.$("findResume_"+this.id);YAHOO.util.Dom.replaceClass(a,
"resumelinkdefault","resumelinkhover");YAHOO.util.Dom.replaceClass(b,"resumedefault","resumehover")},_removeResumeHover:function(){var a=juic.$("resume_"+this.id),b=juic.$("findResume_"+this.id);YAHOO.util.Dom.replaceClass(a,"resumelinkhover","resumelinkdefault");YAHOO.util.Dom.replaceClass(b,"resumehover","resumedefault")},updateAppStatus:function(a){this._appStatus=a.appStatusInfo.statusName;this._appStatusType=a.appStatusInfo.statusType;this.render("candInfoHeader")},handleEvent:function(a){this.dispatch("action",
{actionCommand:"findResLikeMeClicked"})}})}();function CandidateActionMessage(a){this.register();this._statusMsg=a;this._statusCSS=""}CandidateActionMessage.prototype=function(){return set(new Component,{setValue:function(a){this._statusMsg=a},setCssClass:function(a){this._statusCSS=a},renderHtml:function(a){a.push("\x3cspan id\x3d'",this.id,"_statusBandId' class\x3d'statusBand ",this._statusCSS,"'\x3e",this._statusMsg,"\x3c/span\x3e")}})}();
function CandidateActionItems(a,b,c,d,e,f,g,h,k){this.register();this._actionItems=a;this._jobReqId=b;this._appId=e;this._candId=f;this._candidateList=c;this._candStatusModel=d;this._commentConfig=g?g:{};this._candidateTagsLoaded=this._commentsAvailable=!1;this._pageContext=k;this._portletConfig=h?h:{};this._isCandidateTagsVisible=h.tagPortlet?h.tagPortlet.candidateTagsVisible:!1;this._init()}
CandidateActionItems.prototype=function(){return set(new Component,{_init:function(){this._juicItems=[];this._actions=[];if(this._actionItems&&0<this._actionItems.length)for(var a=0;a<this._actionItems.length;a++)this._juicItems[a]=new CandidateActionItem(this._actionItems[a],this._jobReqId,this._candidateList,this._candStatusModel,a),this._juicItems[a].addEventListener("action",this),this._juicItems[a]._actionContent&&this._actions.push(this._juicItems[a]);this._commentConfig.readPermissionForComment&&
0<this._appId&&(this._commentPortletContent=new ActionCommentPortletContent(this._commentConfig,this._jobReqId,this._candId,this._appId),this._commentPortletContent.addEventListener("saveApplicationComments",this,"_saveApplicationComments"),this._commentPortletContent.addEventListener("displayCommentSavingError",this,"_errorSavingComments"),a={isOpenDefault:!1,headerIconClass:this._commentPortletContent.getCssClass(),rowClass:this._actionItems?this._actionItems.length:0,isDisabled:!1,toolTip:""},
this._commentHeader=new CollapsiblePanel(!0,this._commentPortletContent.getLabel(),this._commentPortletContent,"",a),this._commentHeader.addEventListener("action",this,"_getApplicationComments"));this._isCandidateTagsVisible&&(this._tagPortletContent=new AttachmentTagPortlet(this._candId,this._appId,this._pageContext),this._tagPortletContent.addEventListener("updateCandidateTags",this,"_updateCandidateTags"),a={isOpenDefault:!1,headerIconClass:this._tagPortletContent.getCssClass(),rowClass:this._actionItems?
this._actionItems.length:0,isDisabled:!1,toolTip:""},this._tagHeader=new CollapsiblePanel(!0,this._tagPortletContent.getLabel(),this._tagPortletContent,"",a),this._tagHeader.addEventListener("action",this,"_getCandidateTags"))},_getApplicationComments:function(a){"open"===a.openState?(this._commentsAvailable||(this._commentPortletContent.turnOnLoading(MSGS.COMMON_loading),this.dispatch("action",{actionCommand:"commentContentExpanded",applicationId:this._appId,jobReqId:this._jobReqId})),this.closeOthers(this._commentHeader.id)):
this._commentHeader.close()},_getCandidateTags:function(a){"open"===a.openState?(this._candidateTagsLoaded||(this._tagPortletContent.turnOnLoading(MSGS.COMMON_loading),this.dispatch("action",{actionCommand:"tagContentExpanded",candId:this._candId})),this.closeOthers(this._tagHeader.id)):this._tagHeader.close()},_saveApplicationComments:function(a){this.dispatch("action",{actionCommand:"saveApplicationComments",changes:a.changes,commentData:a.commentData,showOnProfile:a.showOnProfile})},_updateCandidateTags:function(a){this.dispatch("action",
{actionCommand:"updateCandidateTags",changes:a.changes,candId:a.candId,pageContext:a.pageContext})},_errorSavingComments:function(a){this.dispatch("action",{actionCommand:"displayCommentSavingError",statusMsg:a.statusMsg})},setApplicationComment:function(a){this._commentPortletContent&&(this._commentsAvailable=!0,this._commentPortletContent.showCommentPortlet(a))},setCandidateTags:function(a){this._tagPortletContent&&(this._candidateTagsLoaded=!0,this._tagPortletContent.showTagContent(a))},renderHtml:function(a){0<
this._actions.length&&a.push("\x3cdiv id\x3d'actionTitle' class\x3d'textBold'\x3e",MSGS.COMMON_ACTIONS,"\x3c/div\x3e");a.push(this._actions);this._commentConfig.readPermissionForComment&&0<this._appId&&(a.push("\x3cdiv id\x3d'commentActionPortlet' class\x3d'actionPortlet ",this._commentPortletContent.getCssClass(),"'\x3e"),this._commentHeader.renderHtml(a),a.push("\x3c/div\x3e"));this._isCandidateTagsVisible&&(a.push("\x3cdiv id\x3d'tagActionPortlet' class\x3d'actionPortlet ",this._tagPortletContent.getCssClass(),
"'\x3e"),this._tagHeader.renderHtml(a),a.push("\x3c/div\x3e"));a.push("\x3cdiv class\x3d'rvbottomBorder'\x3e\x3c/div\x3e")},closeOthers:function(a){if(this._juicItems&&0<this._juicItems.length)for(var b=0;b<this._juicItems.length;b++)this._juicItems[b].id!=a&&this._juicItems[b].close();this._commentHeader&&a!=this._commentHeader.id&&this._commentHeader.close();this._tagHeader&&a!=this._tagHeader.id&&this._tagHeader.close()},handleEvent:function(a){this.closeOthers(a.target.id);this.dispatchEvent(a)}})}();
function CandidateActionItem(a,b,c,d,e){this.register();this._actionItem=a;this._jobReqId=b;this._candidateList=c;this._candStatusModel=d;this._isExpand=!1;this._rowStatus=e;this._init()}
CandidateActionItem.prototype=function(){return set(new Component,{_actionContent:null,_actionHeader:null,_init:function(){if(!this._actionItem.hidden){switch(this._actionItem.action){case "DISQUALIFY":this._actionContent=new ActionDisqualifyCandidateContent(this._jobReqId,this._candidateList,this._candStatusModel);break;case "UPDATE_STATUS":this._actionContent=new ActionMoveCandidateContent(this._jobReqId,this._candidateList,this._candStatusModel);break;case "ADD_TO_TALENT_POOL":this._actionContent=
new AttachmentAddToTalentPoolPortlet(this._candidateList)}if(this._actionContent){this._actionContent.addEventListener("action",this);var a=0==this._actionContent.getApplicableListSize(),b=a?MSGS.RECRUITING_ATTACHMENT_STATUS_NOT_CONFIGURED:"",a={isOpenDefault:!1,headerIconClass:this._actionContent.getCssClass(),rowClass:this._rowStatus,isDisabled:a,toolTip:b};this._actionHeader=new CollapsiblePanel(!0,this._actionContent.getLabel(),this._actionContent,"",a);this._actionHeader.addEventListener("action",
this)}}},renderHtml:function(a){this._actionHeader&&(a.push("\x3cdiv class\x3d'actionPortlet ",this._actionContent.getCssClass(),"'\x3e"),this._actionHeader.renderHtml(a),a.push("\x3c/div\x3e"))},handleEvent:function(a){this.dispatchEvent(a)},close:function(){this._actionHeader&&this._actionHeader.close();this._actionContent&&this._actionContent.setViewToDefault&&this._actionContent.setViewToDefault()}})}();function BaseActionContent(){}
BaseActionContent.prototype=function(){return set(new Component,{getLabel:function(){return MSGS.COMMON_Unknown},getCssClass:function(){return""},turnOnLoading:function(a){this._loadingMessage=a;this._rerender()},turnOffLoading:function(){this._loadingMessage=null;this._rerender()},getAppStatusName:function(a,b){if(a&&0<a.length)for(var c=0;c<a.length;c++)if(b==a[c].applicationStatus){var d=this.getAppStatusType(a[c].statusType);return{statusName:a[c].stepLabel,statusType:d}}return{statusName:MSGS.RECRUITING_APP_STATUS_UNKNOWN,
statusType:null}},getAppStatusType:function(a){switch(a){case "FORWARD_STATUS":a="FORWARDED";break;case "WITHDRAW_STATUS":a="WITHDRAW";break;case "IN_PROCESS_STATUS":a="IN_PROCESS";break;case "ONBOARD_STATUS":a="ONBOARD";break;case "DISPOSITION_STATUS":a="DISPOSITION";break;default:a=null}return a},renderLoadingIndicator:function(a){(new SFLoading(this._loadingMessage,"",{isNewLoadingIndicator:!0,isSectionLoadingIndicator:!0,isCenterLoadingIndicator:!0})).renderHtml(a)},renderApplyButton:function(a,
b){a.push("\x3cspan class\x3d'buttonset aquabtn'\x3e\x3cspan\x3e\x3cbutton type\x3d'button' onclick\x3d",this.fireCode(b)," class\x3d'globalRoundedCorners globalPrimaryButton' id\x3d'",this.id,"_apply-updates-button'\x3e",MSGS.RECRUITING_STATUS_UPDATE_APPLY_BTN,"\x3c/button\x3e\x3c/span\x3e\x3c/span\x3e")},renderHtml:function(a){a.push("\x3cdiv id\x3d'",this.id,"_actionContent'\x3e");this._renderInner(a);a.push("\x3c/div\x3e")},_rerender:function(){if($(this.id+"_actionContent")){var a=[];this._renderInner(a);
$(this.id+"_actionContent").innerHTML=a.join("")}},_renderInner:function(a){null!=this._loadingMessage?this.renderLoadingIndicator(a):(this._renderContent(a),this.renderApplyButton(a,"_onClick"))},_renderContent:function(a){a.push("This is the Action Content")}})}();function ActionMoveCandidateContent(a,b,c){this.register();this._loadingMessage=null;this._jobReqId=a;this._candidateList=b;this._candStatusModel=c;this._applicableStatusListSize=0;this._init()}
ActionMoveCandidateContent.prototype=function(){return set(new BaseActionContent,{_init:function(a,b,c){this._statusSelection=new WorkbenchActionStatusList(this._candidateList,this._candStatusModel,null,{itemLabel:MSGS.COMMON_ATTACHMENT_ACTION_ITEM,screenReaderLabel:MSGS.COMMON_ATTACHMENT_ACTION_ITEM_LABEL,doNotAppendDisqualifyStatuses:!1,inlineResume:!0});this._statusSelection.addEventListener("change",this);this._applicableStatusListSize=this._statusSelection.getApplicableListSize()},getLabel:function(){return MSGS.RECRUITING_CSW_MOVE_CANDIDATE},
getApplicableListSize:function(){return this._applicableStatusListSize},getCssClass:function(){return"moveCandidate"},_renderContent:function(a){this._statusSelection.renderHtml(a)},_onClick:function(){if(this._candidateList[0].currStatus==this._statusSelection._statusDropDown.getValue())this.dispatch("action",{actionCommand:"displayWarningMsg",statusMsg:MSGS.RECRUITING_ATTACHMENT_SAME_STATUS});else if(this._statusSelection.validate()){var a=this._statusSelection.getSkipComment();a&&1E3<a.length?
this.dispatch("action",{actionCommand:"displayLengthyCommentError",statusMsg:sfMessageFormat.format(MSGS.RECRUITING_Candidate_Comment_Length_Exceeds_Message,a.length,1E3)}):(this._applyMoveAction=new ApplyMoveAction(null,this._jobReqId,this._candidateList,this._statusSelection,this._statusSelection.allowCandidatesWithoutDpcsWarning._checked,"Resume Viewer"),this._applyMoveAction.addEventListener("action",this),this._applyMoveAction.applyUpdate())}},setViewToDefault:function(){this._statusSelection.setViewToDefault()},
_hideBubble:function(a){"TAB"==SFDOMEvent.getKeyName(a)&&SFInfoInContext.hide()},_showMultiStageErrorFields:function(a,b){SFInfoInContext.hide();this._helpTextObj=new RCMMultiStageErrorHelpText(b);var c=juic.$(a);c&&c.setAttribute("aria-describedby",this._helpTextObj.id+"_helpText");SFInfoInContext.show(this._helpTextObj,a,{closeButtonEnabled:!1,autoHide:!0})},handleEvent:function(a){switch(a.type){case "action":switch(a.actionCommand){case "moveCandidateSaveComplete":this.turnOffLoading();if(0==
YAHOO.util.Dom.getElementsByClassName("AttachmentViewerDialog").length)return;if(a.data.error){var b=a.data;if(b.multiStageErrorList&&0<b.multiStageErrorList.length)for(var c=0;c<b.multiStageErrorList.length;c++)if(b.multiStageErrorList[c].errorFieldList){var d=b.multiStageErrorList[c],e=[];d.errorMessage?e.push(d.errorMessage):(e.push(MSGS.RECRUITING_FLELD_VALIDATION_MULTISTAGE_MISSING_REQ_FIELD),e.push('\x3ca style\x3d"margin-left: 10px;" onclick\x3d"',this.fireCode("_showMultiStageErrorFields",
this.Id+"_help",this.Id+"_fieldslist"),'" onkeyup\x3d"',this.fireCode("_showMultiStageErrorFields",this.Id+"_help",this.Id+"_fieldslist"),'" onkeydown\x3d"',this.fireCode("_hideBubble"),'" aria-label\x3d"'+MSGS.RECRUITING_FORWARD_ERROR_MORE_DETAILS+'" tabindex\x3d"0" id\x3d"'+this.Id+'_help"\x3e'+MSGS.RECRUITING_FORWARD_ERROR_MORE_DETAILS+"\x3c/a\x3e"));e.push('\x3cdiv id\x3d"'+this.Id+'_fieldslist" style\x3d"display: none;"\x3e\x3ctable role\x3d"presentation"\x3e');e.push('\x3ctr role\x3d"row" class\x3d"row"\x3e\x3cth class\x3d"cell" fixedwidth\x3d"true"\x3e'+
MSGS.RECRUITING_FLELD_VALIDATION_MULTISTAGE_REQ_FIELD+"\x3c/th\x3e\x3c/tr\x3e");for(var f=0;f<d.errorFieldList.length;f++)e.push('\x3ctr role\x3d"row" class\x3d"row"\x3e\x3ctd class\x3d"cell" fixedwidth\x3d"true"\x3e'+d.errorFieldList[f]+"\x3c/td\x3e\x3c/tr\x3e");e.push("\x3c/table\x3e\x3c/div\x3e");a.data.message=e.join("")}this.dispatch("action",{actionCommand:"displayCommentSavingError",statusMsg:a.data.message})}else this.dispatch("action",{actionCommand:"displayStatusMsg",statusMsg:a.data.message}),
a=this.getAppStatusName(this._candStatusModel.getMoveToStatusList(),this._newStatus),this.dispatch("action",{actionCommand:"updateAppStatus",appStatusInfo:a}),this._candidateList[0].currStatus=this._newStatus,this._candidateList[0].status=a.statusName,this._candidateList[0].withdrawn="WITHDRAW"==a.statusType,this._statusSelection.setViewToDefault();break;case "moveActionStart":this.turnOnLoading(MSGS.COMMON_SAVING);break;case "moveActionError":this.dispatch("action",{actionCommand:"displayStatusMsg",
statusMsg:a.errMsg})}break;case "change":this._newStatus=a.newStatus}}})}();function ActionDisqualifyCandidateContent(a,b,c){this.register();this._jobReqId=a;this._candidateList=b;this._candStatusModel=c;this._newStatus=this._loadingMessage=null;this._applicableStatusListSize=0;this._init()}
ActionDisqualifyCandidateContent.prototype=function(){return set(new BaseActionContent,{_init:function(){this._statusSelection=new WorkbenchActionStatusList(this._candidateList,this._candStatusModel,this._candStatusModel.getDisqualifiedStatusList(),{itemLabel:MSGS.COMMON_ATTACHMENT_ACTION_ITEM,doNotAppendDisqualifyStatuses:!0});this._statusSelection.addEventListener("change",this);this._applicableStatusListSize=this._statusSelection.getApplicableListSize()},getLabel:function(){return MSGS.RECRUITING_CSW_DISQUALIFY_CANDIDATE},
getApplicableListSize:function(){return this._applicableStatusListSize},getCssClass:function(){return"disqualifyCandidate"},_renderContent:function(a){this._statusSelection.renderHtml(a)},setViewToDefault:function(){this._statusSelection.setViewToDefault()},getDisqualifiedStatus:function(){if(this._candStatusModel){var a=this._candStatusModel.getDisqualifiedStatusList();if(a&&1==a.length)return a[0].applicationStatus}return""},_onClick:function(){this._candidateList[0].currStatus==this._statusSelection._statusDropDown.getValue()?
this.dispatch("action",{actionCommand:"displayWarningMsg",statusMsg:MSGS.RECRUITING_ATTACHMENT_SAME_STATUS}):(this._applyDisqualifyAction=new ApplyDisqualifyAction(this._jobReqId,this._candidateList,this._statusSelection,"Resume Viewer"),this._applyDisqualifyAction.addEventListener("action",this),this._applyDisqualifyAction.applyUpdate())},handleEvent:function(a){switch(a.type){case "action":switch(a.actionCommand){case "disqualCandidateSaveComplete":this.turnOffLoading();if(0==YAHOO.util.Dom.getElementsByClassName("AttachmentViewerDialog").length)return;
this.dispatch("action",{actionCommand:"displayStatusMsg",statusMsg:a.data.message});a.data.error||(a=this.getAppStatusName(this._candStatusModel.getDisqualifiedStatusList(),this._newStatus),this.dispatch("action",{actionCommand:"updateAppStatus",appStatusInfo:a}),this._candidateList[0].currStatus=this._newStatus?this._newStatus:this.getDisqualifiedStatus(),this._statusSelection.setViewToDefault());break;case "disqualifyActionStart":this.turnOnLoading(MSGS.COMMON_SAVING);break;case "disqualifyActionError":this.dispatch("action",
{actionCommand:"displayStatusMsg",statusMsg:a.errMsg})}break;case "change":this._newStatus=a.newStatus}}})}();function AttachmentAddToTalentPoolPortlet(a){this.register();this._candidateList=a;this._loadingMessage=null;this._init()}
AttachmentAddToTalentPoolPortlet.prototype=function(){return set(new BaseActionContent,{_init:function(){this._addToTalentPoolLabel=new SFLabel(MSGS.RCM_RESUME_VIEWER_ADD_TO_TALENT_POOL_TEXT);this._addToTalentPoolButton=new SFCommandButton(MSGS.RCM_CRM_ADD_TO_TALENT_POOL,!0,!0,!0,{baseButtonWrapperClass:"applicantProfileFooterButton"});this._addToTalentPoolButton.addEventListener("action",this,"addToTalentPool")},getApplicableListSize:function(){return 1},addToTalentPool:function(){var a=[];a.push(this._candidateList[0].candId.toString());
a=new RCMAddToCRMEntity("talentPool",{selectedCandidates:a});SFOverlayMgr.showOverlay(a,!0)},getLabel:function(){return MSGS.RCM_CRM_ADD_TO_TALENT_POOL},getCssClass:function(){return"comment_portlet_header_icon"},_renderInner:function(a){this._renderContent(a)},_renderContent:function(a){a.push('\x3cdiv id\x3d"addToTalentPool_content_',this.id,'" style\x3d"width:281px;"\x3e');this._addToTalentPoolLabel.renderHtml(a);this._addToTalentPoolButton.renderHtml(a);a.push("\x3c/div\x3e")}})}();
function ActionCommentPortletContent(a,b,c,d){this.register();this._config=a?a:{};this._jobreqId=b;this._candidateId=c;this._appId=d}
juic.extend(ActionCommentPortletContent,BaseActionContent,{_init:function(){},getLabel:function(){return MSGS.RECRUITING_Comments},showCommentPortlet:function(a){if(this._commentData=a)this._deltaModel=new RCMProfileDeltaModel,this._portletContent=new CommentsPortletContent(this._commentData,this._deltaModel,!1,!1,this._config.includeShowOnProfile),this._portletContent.setContainerId(this.id),this._config.writePermissionForComment&&(this._addLink=new SFSimpleLink(MSGS.COMMON_Add,{onClick:"addField"}),
this._addLink.addEventListener("action",this._portletContent)),this.turnOffLoading(),this._renderCommentData()},_renderCommentData:function(){this._config.writePermissionForComment&&this._addLink.render("portlet_addLink");this._portletContent.render("portlet_content_"+this.id)},_onClick:function(){this._deltaModel.getChanges()&&0<this._deltaModel.getChanges().length&&this._checkCommentLength()&&(this.turnOnLoading(MSGS.COMMON_SAVING),this.dispatch("saveApplicationComments",{changes:this._deltaModel.getChanges(),
commentData:this._commentData,showOnProfile:this._deltaModel.isShowOnProfile()}))},_checkCommentLength:function(){for(var a=this._deltaModel.getChanges(),b=0,c=a.length;b<c;b++)if("COMMENT_FIELD"==a[b].type&&4E3<a[b].newValue.length)return a=sfMessageFormat.format(MSGS.RECRUITING_Candidate_Comment_Length_Exceeds_Message,a[b].newValue.length,4E3),this.dispatch("displayCommentSavingError",{statusMsg:a}),!1;return!0},_renderInner:function(a){null!=this._loadingMessage?this.renderLoadingIndicator(a):
(this._renderContent(a),this._config.writePermissionForComment&&this.renderApplyButton(a,"_onClick"))},_renderContent:function(a){this._config.writePermissionForComment&&(a.push('\x3cdiv id\x3d"portlet_addLink" class\x3d"bg_info opposite_floats"\x3e'),a.push("\x3c/div\x3e"));a.push('\x3cdiv class\x3d  "comment_content_portlet"\x3e');a.push('\x3cdiv id\x3d"portlet_content_',this.id,'" style\x3d"width:281px;"\x3e');a.push("\x3c/div\x3e\x3c/br\x3e\x3c/div\x3e")},getCssClass:function(){return"comment_portlet_header_icon"}});
function AttachmentTagPortlet(a,b,c){this.register();this._candId=a;this._appId=b;this._pageContext=c;this._loadingMessage=null;this._tagInfo={};this._init()}
AttachmentTagPortlet.prototype=function(){return set(new BaseActionContent,{_init:function(){},getApplicableListSize:function(){return this._applicableStatusListSize},_renderTagData:function(){this._tagPortlet.render("tag_content_"+this.id)},showTagContent:function(a){if(this._tagInfo=a)this._deltaModel=new RCMProfileDeltaModel,this._tagPortlet=new TagPortletContent(this._tagInfo,this._deltaModel,{printPreview:!1}),this.turnOffLoading(),this._renderTagData()},_onClick:function(){this._deltaModel.getChanges()&&
0<this._deltaModel.getChanges().length&&(this.turnOnLoading(MSGS.COMMON_SAVING),this.dispatch("updateCandidateTags",{changes:this._deltaModel.getChanges(),candId:this._candId,pageContext:this._pageContext}))},getLabel:function(){return MSGS.RECRUITING_CANDIDATE_TAG_TITLE},getCssClass:function(){return"comment_portlet_header_icon"},_renderInner:function(a){null!=this._loadingMessage?this.renderLoadingIndicator(a):(this._renderContent(a),this._tagInfo.editable&&this.renderApplyButton(a,"_onClick"))},
_renderContent:function(a){a.push('\x3cdiv id\x3d"tag_content_',this.id,'" style\x3d"width:281px;"\x3e');a.push("\x3c/div\x3e\x3c/br\x3e\x3c/div\x3e")}})}();function AttachmentViewer(a,b,c,d,e){assert(b,"You need to specify a attachment type for the AttachmentViewer.");this.register();this._nextPrevLabel=a;this._attachmentType=b;this._attachObj=c;this._viewPortHeight=d;this._layoutConfig=e?e:{};this._init()}
AttachmentViewer.prototype=function(){return set(new Component,{_actionLayout:null,_actionDAO:null,_onTheFlyAttachIndices:[],_init:function(){switch(this._attachmentType){case AttachmentTypeEnum.RESUME:case AttachmentTypeEnum.COVER_LETTER:this.initResume();break;default:alert(MSGS.COMMON_INVALID_ATTACHMENT_TYPE)}},_isNull:function(a){return null==a||"undefined"==a},initResume:function(){var a=!1;this._isNull(this._attachObj)?a=!0:(this._jobReqId=this._attachObj.jobReqId,this._resumeImageVOs=this._attachObj.resumeImageVOs,
!this._isNull(this._resumeImageVOs)&&this._resumeImageVOs instanceof Array&&0!=this._resumeImageVOs.length||(a=!0));if(null==this._actionLayout){var b=this._isNull(this._jobReqId)||0>=this._jobReqId?"":"\x26jobReqId\x3d"+this._jobReqId;this._resumeImageVOs&&0<this._resumeImageVOs.length&&(b+=this._isNull(this._resumeImageVOs[0].candidateId)||0>this._resumeImageVOs[0].candidateId?"":"\x26candidateId\x3d"+this._resumeImageVOs[0].candidateId);b+=this._isNull(this._candidateId)||0>this._candidateId?"":
"\x26candidateId\x3d"+this._candidateId;this._actionLayout=new AttachmentViewerLayout(this._nextPrevLabel,this._attachmentType,b,this._viewPortHeight,this._layoutConfig);this._actionLayout.addEventListener("action",this)}this._actionLayout.reset();a?this._actionLayout.setErrorMessage(MSGS.RECRUITING_RESUME_INVALID_PARAMETERS):this._actionLayout.initMsgBasedOnAttachType(this._attachmentType==AttachmentTypeEnum.RESUME?MSGS.RECRUITING_RESUME_NOT_UPLOAD:MSGS.RECRUITING_COVERLETTER_NOT_UPLOAD,this._attachmentType==
AttachmentTypeEnum.RESUME?MSGS.COMMON_MISSING_ATTACH_IMAGES:MSGS.COMMON_MISSING_ATTACH_IMAGES_FOR_COVER_LETTER,MSGS.COMMON_loading)},getResumeImageModel:function(){this._actionDAO=new ResumeViewerDAO;this._actionDAO.addEventListener("action",this);this._actionDAO.getResumeImageModel(this._attachmentType,this._attachObj)},setAttachObj:function(a){this._attachObj=a},renderHtml:function(a){this._actionLayout.renderHtml(a)},_hasAttachIndexBeenProcessed:function(a){for(var b=0;b<this._onTheFlyAttachIndices.length;b++)if(this._onTheFlyAttachIndices[b]==
a)return!0;return!1},handleEvent:function(a){if("action"==a.type)switch(a.actionCommand){case "nextAttachAction":case "prevAttachAction":case "firstAttachAction":case "lastAttachAction":case "gotoAttachment":this.dispatchEvent(a);break;case "getResumeImageModelCompleted":if(a.actionData){this._resumeViewerVO=a.actionData;this._attachViewerVO=this._convertToAttachmentImageVO(a.actionData);var b=this._convertToCandidateIds(a.actionData);this._actionLayout.refreshAttachData(this._resumeViewerVO.jobReqId,
b,this._attachViewerVO);"success"!=a.actionData.status&&this._actionLayout.setStatusMsg(this._actionLayout.getAttachmentNotAvailMsg(),a.actionData.statusMsg);this._actionLayout._rerender();this._actionLayout.updateCount(a.actionData.resumeImageVOs.length)}this.dispatchEvent(a);break;case "getResumeImageOnTheFly":!a.isRefresh&&this._hasAttachIndexBeenProcessed(a.attachImageVO.currAttachmentIndex)?(this._actionLayout.setStatusMsg(this._actionLayout.getAttachmentNotAvailMsg(),null),this._actionLayout._updateAttachmentNotAvailMsg()):
(this._onTheFlyAttachIndices.push(a.attachImageVO.currAttachmentIndex),this._actionDAO.getResumeImageOnTheFly(a.attachImageVO,this._jobReqId,this._resumeImageVOs[a.attachImageVO.currAttachmentIndex],this._attachmentType,a.isRefresh));break;case "getResumeImageOnTheFlyCompleted":if(a.actionData){var b=a.actionData.attachImageVO.attachImageIds,c="success"==a.actionData.status&&null!=b&&0<b.length,d=a.actionData.attachImageVO.currAttachmentIndex;d==this._actionLayout.getCurrAttachmentIndex()?(c?this._actionLayout.updateBodyWithOnTheFly(b):
(this._actionLayout.setStatusMsg(this._actionLayout.getAttachmentNotAvailMsg(),a.actionData.statusMsg),this._actionLayout._updateAttachmentNotAvailMsg()),a.isRefresh&&this._actionLayout.enableRefreshBtn(!0)):c?this._actionLayout.updateAttachImageIds(d,b):(this._actionLayout.setCurrAttachmentIndex(d),this._actionLayout.setStatusMsg(this._actionLayout.getAttachmentNotAvailMsg(),a.actionData.statusMsg),this._actionLayout._updateAttachmentNotAvailMsg())}break;case "getResumeImageModelError":case "getResumeImageOnTheFlyError":a.actionData&&
(this._actionLayout.setErrorMessage(a.actionData),this._actionLayout._rerender());break;case "refreshResumeImage":a.actionData&&a.actionData.attachmentId&&this._actionDAO.deleteAttachmentImages(a.actionData.attachmentId,"deleteAttachmentImagesRefreshStepCompleted","deleteAttachmentImagesRefreshStepError");break;case "deleteAttachmentImagesRefreshStepCompleted":this._actionLayout.getResumeImagesOnTheFly(!0);break;case "deleteAttachmentImagesRefreshStepError":a.actionData&&(this._actionLayout.setErrorMessage(a.actionData),
this._actionLayout._updateErrMsg())}},_convertToAttachmentImageVO:function(a){if(null==a)return null;a=a.resumeImageVOs;for(var b=[],c=[],d=0,e=a.length;d<e;d++){var f=a[d].attachmentId;null!=f&&0<f&&c.push(f);b.push({attachmentId:f,attachImageIds:a[d].attachImageIds,attachmentHeaderText:a[d].resumeHeader,attachmentURL:a[d].attachmentURL,employeeReferral:a[d].employeeReferral})}b.attachmentIds=c;return b},_convertToCandidateIds:function(a){a=a.resumeImageVOs;for(var b=[],c=0,d=a.length;c<d;c++){var e=
a[c].candidateId;null!=e&&0<e&&b.push(e)}return b}})}();function ResumeViewerDAO(){this._init()}
ResumeViewerDAO.prototype=function(){return set(new EventTarget,{_init:function(){this._resumeViewerController=AjaxService.getMBeanInstance("resumeViewerController")},_createCallbackObj:function(a,b){var c=this;return{callback:function(b){c.dispatch("action",{actionCommand:a,actionData:b})},errorHandler:function(a,e){c.dispatch("action",{actionCommand:b,actionData:MSGS.RECRUITING_RESUME_INTERNAL_ERROR+"\x3cbr /\x3eAJAX errorString\x3d"+a+", exception.javaClassName\x3d"+e.javaClassName+", exception.message\x3d"+
e.message})}}},_handleJavaScriptException:function(a,b){this.dispatch("action",{actionCommand:a,actionData:MSGS.RECRUITING_RESUME_INTERNAL_ERROR+"\x3cbr /\x3eJavaScript Exception\x3d"+b})},getResumeImageModel:function(a,b){try{var c=this._createCallbackObj("getResumeImageModelCompleted","getResumeImageModelError");this._resumeViewerController.getResumeImageModel(a,b,c)}catch(d){this._handleJavaScriptException("getResumeImageModelError",d)}},getActionsForCandidate:function(a,b,c,d,e,f,g){try{var h=
this._createCallbackObj("getActionsForCandidateCompleted","getActionsForCandidateError");this._resumeViewerController.getItemActions(a,b+"",c+"",d,e+"",f,g,h)}catch(k){this._handleJavaScriptException("getActionsForCandidateError",k)}},getResumeImageOnTheFly:function(a,b,c,d,e){try{var f=this;this._resumeViewerController.getResumeImageOnTheFly(a,b,c,d,{callback:function(a){f.dispatch("action",{actionCommand:"getResumeImageOnTheFlyCompleted",actionData:a,isRefresh:e})},errorHandler:function(a,b){f.dispatch("action",
{actionCommand:"getResumeImageOnTheFlyError",actionData:MSGS.RECRUITING_RESUME_INTERNAL_ERROR+"\x3cbr /\x3eAJAX errorString\x3d"+a+", exception.javaClassName\x3d"+b.javaClassName+", exception.message\x3d"+b.message,isRefresh:e})}})}catch(g){this.dispatch("action",{actionCommand:"getResumeImageOnTheFlyError",actionData:MSGS.RECRUITING_RESUME_INTERNAL_ERROR+"\x3cbr /\x3eJavaScript Exception\x3d"+g,isRefresh:e})}},getApplicationComment:function(a,b,c,d){try{var e=this._createCallbackObj("getApplicationCommentComplete",
"getApplicationCommentError");this._resumeViewerController.getApplicationComments(a,b,d,c,e)}catch(f){this._handleJavaScriptException("getApplicationCommentError",f)}},saveApplicationComments:function(a,b,c,d,e,f,g){try{var h=this._createCallbackObj("saveApplicationCommentComplete","getApplicationCommentError");this._resumeViewerController.saveApplicationComments(JSON.stringify(a),b,c,d,e,f,g,h)}catch(k){this._handleJavaScriptException("getApplicationCommentError",k)}},getCandSecKey:function(a,b){for(var c,
d=0;d<a.length;d++)if(a[d].candId==b){c=a[d].secretKey;break}return c},updateCandidateTags:function(a,b,c){try{var d=this._createCallbackObj("updateCandidateTagsComplete","updateCandidateTagsError"),e=this.getCandSecKey(this._events.action[0].handler._candidateList,b);this._resumeViewerController.updateCandidateTags(JSON.stringify(a),b,c,e,d)}catch(f){this._handleJavaScriptException("updateCandidateTagsError",f)}},getCandidateTags:function(a){try{var b=this._createCallbackObj("getCandidateTagsComplete",
"getCandidateTagsError");this._resumeViewerController.getCandidateTags(a,b)}catch(c){this._handleJavaScriptException("getCandidateTagsError",c)}},deleteAttachmentImages:function(a,b,c){try{var d=this._createCallbackObj(b,c);this._resumeViewerController.deleteAttachmentImages(a,d)}catch(e){this._handleJavaScriptException(c,e)}}})}();
function AttachmentViewerLayout(a,b,c,d,e){this.register();this._nextPrevLabel=a;this._attachmentType=b;this._additionalParamStr=c;this._viewPortHeight=d;this._refreshVisible=e&&e.refreshVisible?e.refreshVisible:!1;this._refreshEnabled=e&&e.refreshEnabled?e.refreshEnabled:!1;this._refreshBtnFirst=e&&e.refreshBtnFirst?e.refreshBtnFirst:!1;this._init()}
AttachmentViewerLayout.prototype=function(){return set(new Component,{_currPageIndex:0,_pageSize:null,_currAttachmentIndex:0,_attachmentImageVO:null,_errorMessage:null,_infoMessage:null,_loadingMessage:null,_detailedMessage:null,_nextPrevAttach:null,_attachmentNotUploadedMsg:MSGS.COMMON_ATTACHMENT_NOT_UPLOAD,_attachmentNotAvailMsg:MSGS.COMMON_ATTACHMENT_NOT_AVAIL,_init:function(){this._toolbar=new AttachToolbar;this._refreshBtn=new AttachButton("attachIcon_refresh","attachIcon_refresh_disabled","Refresh Resume Image",
"refreshResumeImage",this._refreshVisible,this._refreshEnabled,!0);this._refreshBtn.addEventListener("action",this);this._refreshBtnFirst&&this._toolbar.addCustom(this._refreshBtn);this._saveDropMenu=new AttachDropMenu({attachmentType:this._attachmentType,anchorType:"attachIcon_download",anchorTitle:this._attachmentType==AttachmentTypeEnum.RESUME?MSGS.RECRUITING_SAVE_RESUME_MENU:MSGS.RECRUITING_SAVE_COVERLETTER_MENU,action1:{label:MSGS.RECRUITING_Save_Resume,actionValue:"save1Resume"},actionAll:{label:MSGS.RECRUITING_Save_All_Resumes,
actionValue:"saveAllResume"},singleBtn:{css:"attachIcon_download",disabledCSS:"attachIcon_download_disabled",label:this._attachmentType==AttachmentTypeEnum.RESUME?MSGS.RECRUITING_Save_Resume:MSGS.RECRUITING_SAVE_COVERLETTER_MENU,actionValue:"downloadAttachAction"}});this._toolbar.addCustom(this._saveDropMenu);this._printDropMenu=new AttachDropMenu({attachmentType:this._attachmentType,anchorType:"attachIcon_print",anchorTitle:this._attachmentType==AttachmentTypeEnum.RESUME?MSGS.RECRUITING_PRINT_RESUME_MENU:
MSGS.RECRUITING_PRINT_COVERLETTER_MENU,action1:{label:MSGS.RECRUITING_Print_Resume,actionValue:"print1Resume"},actionAll:{label:MSGS.RECRUITING_Print_All_Resumes,actionValue:"printAllResume"},singleBtn:{css:"attachIcon_print",disabledCSS:"attachIcon_print_disabled",label:this._attachmentType==AttachmentTypeEnum.RESUME?MSGS.RECRUITING_Print_Resume:MSGS.RECRUITING_PRINT_COVERLETTER_MENU,actionValue:"printAttachAction"}});this._toolbar.addCustom(this._printDropMenu);this._refreshBtnFirst||this._toolbar.addCustom(this._refreshBtn);
this._attachHdrText=new RCMAccessibleText("");this._attachHdrText.setCSSClass("attachName");this._toolbar.addCustom(this._attachHdrText);this._empReferralIcon=new RCMIcon("empReferralIcon",MSGS.RECRUITING_EMPLOYEE_REFERRAL,!1);this._toolbar.addCustom(this._empReferralIcon);this._nextPrevAttach=new NextPrevAttach(this._nextPrevLabel,this._currAttachmentIndex,this._attachmentImageVO);this._nextPrevAttach.addEventListener("action",this);this._toolbar.addCustom(this._nextPrevAttach)},enableRefreshBtn:function(a){this._refreshBtn.setEnabled(a)},
getCurrAttachmentIndex:function(){return this._currAttachmentIndex},setCurrAttachmentIndex:function(a){this._currAttachmentIndex=a},turnOnLoading:function(a){this._loadingMessage=a},turnOffLoading:function(){this._loadingMessage=null},setInfoMessage:function(a){this._infoMessage=a},setErrorMessage:function(a){this._errorMessage=a},_clearMsg:function(){this.turnOffLoading();this.setErrorMessage(null);this.setInfoMessage(null)},setStatusMsg:function(a,b){this.turnOffLoading();this.setErrorMessage(null);
this.setInfoMessage(a)},initMsgBasedOnAttachType:function(a,b,c){this.setAttachmentNotUploadedMsg(a);a=b.replace("{0}",this.fireCode("_downloadAttachment"));this.setAttachmentNotAvailMsg(a);this.turnOnLoading(c)},updateAttachmentImageVO:function(a){this._attachmentImageVO=a},refreshAttachData:function(a,b,c){assert(c instanceof Array,"Coding error, input to refreshAttachData() is not an array, expect an array of AttachmentImageVO value objects.");assert(null!=c&&0<c.length,"Coding error, input to refreshAttachData() is not an array, expect an array of AttachmentImageVO value objects.");
this._clearMsg();this._jobReqId=a;this._candidateIds=b;this._attachmentImageVO=c;this._currAttachmentIndex=0;this._updateHeaderText();this._updatePrintDownloadBtns();this._updateNextPrevAttach()},_updateHeaderText:function(){this._setHdrText(this._attachmentImageVO[this._currAttachmentIndex].attachmentHeaderText);var a=this._attachmentImageVO[this._currAttachmentIndex].employeeReferral;this._empReferralIcon&&this._empReferralIcon.setVisible(a)},_setHdrText:function(a){this._attachHdrText.setValue(a);
this._attachHdrText.refresh()},_updatePrintDownloadBtns:function(){var a=this._attachmentImageVO[this._currAttachmentIndex].attachmentId;this._printDropMenu.update(this._jobReqId,this._candidateIds,a,this._attachmentImageVO.attachmentIds,null);this._saveDropMenu.update(this._jobReqId,this._candidateIds,a,this._attachmentImageVO.attachmentIds,this._attachmentImageVO[this._currAttachmentIndex].attachmentURL);this.enableRefreshBtn(null!=a&&0<a)},_updateNextPrevAttach:function(){if(1<this._attachmentImageVO.length){var a=
1<this._attachmentImageVO.length;this._nextPrevAttach._toggleArrows(!1,!1,a,a);this._nextPrevAttach.setVisible(!0)}else this._nextPrevAttach.setVisible(!1)},_updateBody:function(a){if(null==this._attachmentImageVO||0==this._attachmentImageVO.length)this.setErrorMessage(MSGS.COMMON_ATTACHMENT_INTERNAL_ERROR),this._updateErrMsg();else{var b=this._attachmentImageVO[this._currAttachmentIndex].attachmentId;null==b||0>=b?(this.setInfoMessage(this.getAttachmentNotUploadedMsg()),this._updateInfoMsg()):0==
this._attachmentImageVO[this._currAttachmentIndex].attachImageIds.length?a?(this.setInfoMessage(this.getAttachmentNotAvailMsg()),this._updateAttachmentNotAvailMsg()):this.getResumeImagesOnTheFly(!1):this._rerenderImage()}},getResumeImagesOnTheFly:function(a){this._attachmentImageVO[this._currAttachmentIndex].currAttachmentIndex=this._currAttachmentIndex;this.dispatch("action",{actionCommand:"getResumeImageOnTheFly",attachImageVO:this._attachmentImageVO[this._currAttachmentIndex],isRefresh:a})},_isValidAttachIndex:function(a){return null==
this._attachmentImageVO||0==this._attachmentImageVO.length||0>a||a>=this._attachmentImageVO.length?(alert("Invalid currAttachIndex "+a+" returned by on the fly image conversion servlet."),!1):!0},updateBodyWithOnTheFly:function(a){this._isValidAttachIndex(this._currAttachmentIndex)&&(this._attachmentImageVO[this._currAttachmentIndex].attachImageIds=a,this._resetAttachment(!0))},updateAttachImageIds:function(a,b){this._isValidAttachIndex(a)&&(this._attachmentImageVO[a].attachImageIds=b)},_updateErrMsg:function(){var a=
[];(new SFSysMsg("error",this._errorMessage)).renderHtml(a);this._updateBodyInnerHTML(a)},_updateInfoMsg:function(){var a=[];(new SFSysMsg("info",this._infoMessage)).renderHtml(a);this._updateBodyInnerHTML(a)},_updateAttachmentNotAvailMsg:function(){var a=[];(new SFSysMsg("info",this._infoMessage)).renderHtml(a);this._updateBodyInnerHTML(a)},_updateBodyInnerHTML:function(a){this._setAttachBody(a.join(""))},_getPageSize:function(){return this._attachmentImageVO[this._currAttachmentIndex].attachImageIds.length},
setAttachmentNotUploadedMsg:function(a){this._attachmentNotUploadedMsg=a},getAttachmentNotUploadedMsg:function(){return this._attachmentNotUploadedMsg},setAttachmentNotAvailMsg:function(a){this._attachmentNotAvailMsg=a},getAttachmentNotAvailMsg:function(){return this._attachmentNotAvailMsg},renderHtml:function(a){a.push('\x3cdiv id\x3d"'+this.id+'"\x3e');this._renderInner(a);a.push("\x3c/div\x3e")},_renderInner:function(a){null==this._errorMessage&&null==this._loadingMessage&&this._toolbar.renderHtml(a);
var b="attachType_"+this._attachmentType.toLowerCase();a.push('\x3cdiv class\x3d"',b,'" id\x3d"',this.id,'_attachBody" style\x3d"overflow: auto; width:100%; height:',this._viewPortHeight-37,'px"\x3e');if(null!=this._loadingMessage)this._getLoadingIndicator(this._loadingMessage).renderHtml(a);else if(null!=this._errorMessage)this._renderErrMsg(a);else if(null!=this._infoMessage)this._renderInfoMsg(a);else if(null!=this._attachmentImageVO)if(0==this._attachmentImageVO.length)this.setErrorMessage(MSGS.COMMON_ATTACHMENT_INTERNAL_ERROR),
this._renderErrMsg(a);else if(b=this._attachmentImageVO[this._currAttachmentIndex].attachmentId,null==b||0>=b)this.setInfoMessage(this.getAttachmentNotUploadedMsg()),this._renderInfoMsg(a);else if(0==this._attachmentImageVO[this._currAttachmentIndex].attachImageIds.length)this.setInfoMessage(this.getAttachmentNotAvailMsg()),this._renderInfoMsg(a);else for(var b=this._getImagesUrl(),c=0,d=b.length;c<d;c++)a.push('\x3cdiv class\x3d"imageWrapper"\x3e'),a.push('\x3cimg tabindex\x3d"0" alt\x3d"',MSGS.RECRUITING_DOCUMENT_IMAGE,
" ",c+1,'" class\x3d"resumeImage" id\x3d"',this.id,'_attachImgTag" src\x3d"',b[c],'"\x3e\x3c/img\x3e'),a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},_rerender:function(){var a=$(this.id);if(a){var b=[];this.renderHtml(b);a.innerHTML=b.join("")}},updateCount:function(a){this._nextPrevAttach.updateCount(a)},_getImageUrl:function(){var a=[];a.push("/attachImage?type\x3d",this._attachmentType,"\x26attachmentId\x3d",this._attachmentImageVO[this._currAttachmentIndex].attachmentId,"\x26attachImageId\x3d",
this._attachmentImageVO[this._currAttachmentIndex].attachImageIds[this._currPageIndex]);return a.join("")},_getImagesUrl:function(){for(var a=this._attachmentImageVO[this._currAttachmentIndex].attachmentId,b=[],c=0,d=this._attachmentImageVO[this._currAttachmentIndex].attachImageIds.length;c<d;c++)b.push("/attachImage?type\x3d"+this._attachmentType+"\x26attachmentId\x3d"+a+this._additionalParamStr+"\x26attachImageId\x3d"+this._attachmentImageVO[this._currAttachmentIndex].attachImageIds[c]+"\x26_s.crb\x3d"+
ajaxSecKey);return b},_getImageUrlWithSecurityCrumb:function(){var a=this._getImageUrl(),b=[];b.push(a,this._additionalParamStr,"\x26_s.crb\x3d",ajaxSecKey);return b.join("")},_renderErrMsg:function(a){(new SFSysMsg("error",this._errorMessage)).renderHtml(a)},_renderInfoMsg:function(a){(new SFSysMsg("info",this._infoMessage)).renderHtml(a)},_rerenderImage:function(){var a=$(this.id+"_attachImgTag");if(a)a.src=this._getImageUrlWithSecurityCrumb();else{for(var a=this._getImagesUrl(),b="",c=0;c<a.length;c++)b=
b+'\x3cdiv class\x3d"imageWrapper"\x3e'+('\x3cimg class\x3d"resumeImage" id\x3d"'+this.id+'_attachImgTag" src\x3d"'+a[c]+'" tabindex\x3d"0" alt\x3d"'+MSGS.RECRUITING_DOCUMENT_IMAGE+" "+(c+1)+'"\x3e\x3c/img\x3e')+"\x3c/div\x3e";this._setAttachBody(b+"\x3c/div\x3e")}},handleEvent:function(a){if("action"==a.type)switch(a.actionCommand){case "nextAttachAction":this._nextAttachment(a);break;case "prevAttachAction":this._previousAttachment(a);break;case "lastAttachAction":this._lastAttachment(a);break;
case "firstAttachAction":this._firstAttachment(a);break;case "downloadAttachAction":this._downloadAttachment();break;case "gotoAttachment":this._gotoAttachment(a);break;case "refreshResumeImage":this._displayLoadingIndicator();this.enableRefreshBtn(!1);this.dispatch(a.type,{actionCommand:a.actionCommand,actionData:{attachmentId:this._attachmentImageVO[this._currAttachmentIndex].attachmentId}});break;default:alert("Invalid action command dispatched to AttachmentViewerLayout.")}},_downloadAttachment:function(){RCMAttachmentDownload.retrieveAttachment(this._attachmentImageVO[this._currAttachmentIndex].attachmentURL)},
setAttachmentImage:function(a){this._attachmentImageVO[this._currAttachmentIndex]=a},_getLoadingIndicator:function(a){return new SFLoading(a,"",{isNewLoadingIndicator:!0,isSectionLoadingIndicator:!0,isCenterLoadingIndicator:!0})},_displayLoadingIndicator:function(){juic.render(this._getLoadingIndicator(MSGS.COMMON_loading),this.id+"_attachBody")},_setAttachBody:function(a){var b=$(this.id+"_attachBody");b&&(b.innerHTML=a)},_previousAttachment:function(a){this._displayLoadingIndicator();this._currAttachmentIndex=
0==this._currAttachmentIndex?0==this._attachmentImageVO.length?0:this._attachmentImageVO.length-1:this._currAttachmentIndex-1;this._nextPrevAttach.setFirstEnabled(!0);0==this._currAttachmentIndex&&(this._nextPrevAttach.setPrevEnabled(!1),this._nextPrevAttach.setFirstEnabled(!1));this._nextPrevAttach.setLastEnabled(!0);this._nextPrevAttach.setNextEnabled(!0);this._resetAttachment(!1);this._dispatchCurrAttachmentEvent(a)},_nextAttachment:function(a){this._displayLoadingIndicator();this._nextPrevAttach.setLastEnabled(!0);
2==this._attachmentImageVO.length-this._currAttachmentIndex&&(this._nextPrevAttach.setNextEnabled(!1),this._nextPrevAttach.setLastEnabled(!1));this._nextPrevAttach.setPrevEnabled(!0);this._nextPrevAttach.setFirstEnabled(!0);this._currAttachmentIndex=this._currAttachmentIndex+1>=this._attachmentImageVO.length?0:this._currAttachmentIndex+1;this._resetAttachment(!1);this._dispatchCurrAttachmentEvent(a)},_lastAttachment:function(a){this._displayLoadingIndicator();this._nextPrevAttach._toggleArrows(!0,
!0,!1,!1);this._currAttachmentIndex=this._attachmentImageVO.length-1;this._resetAttachment(!1);this._dispatchCurrAttachmentEvent(a)},_firstAttachment:function(a){this._displayLoadingIndicator();this._nextPrevAttach._toggleArrows(!1,!1,!0,!0);this._currAttachmentIndex=0;this._resetAttachment(!1);this._dispatchCurrAttachmentEvent(a)},_dispatchCurrAttachmentEvent:function(a){a.currAttachmentIndex=this._currAttachmentIndex;this.dispatchEvent(a)},_gotoAttachment:function(a){this._displayLoadingIndicator();
var b=a.attachmentIndex;b>this._attachmentImageVO.length||0>=b?(this._currAttachmentIndex=0,this._nextPrevAttach.setFirstEnabled(!1),this._nextPrevAttach.setPrevEnabled(!1)):this._currAttachmentIndex=b-1;this._resetAttachment(!1);this._dispatchCurrAttachmentEvent(a)},_resetAttachment:function(a){this._currPageIndex=0;this._pageSize=this._getPageSize();this._clearMsg();this._updateHeaderText();this._updatePrintDownloadBtns();this._nextPrevAttach.updateTextbox(this._currAttachmentIndex+1);this._nextPrevAttach.updatePaginationArrows(this._currAttachmentIndex,
this._attachmentImageVO.length);this._updateBody(a)},reset:function(){this._clearMsg();this._setHdrText("");this._pageSize=this._currPageIndex=this._currAttachmentIndex=0}})}();function NextPrevAttach(a){this.register();this._nextPrevLabel=a;this._init()}
NextPrevAttach.prototype=function(){return set(new Component,{_visible:!1,_init:function(){var a=Util.isRTL();this.className="attachmentNvgtrWidget";this._firstAttachButton=new AttachButton("first","first_disabled",MSGS.COMMON_First+" "+this._nextPrevLabel,"firstAttachAction",!0,!0,!1);this._firstAttachButton.addEventListener("action",this);this._prevAttachButton=new AttachButton(a?"attachNext":"attachPrev",a?"attachNext_disabled":"attachPrev_disabled",a?MSGS.COMMON_Next:MSGS.COMMON_Previous+" "+
this._nextPrevLabel,"prevAttachAction",!0,!0,!1);this._prevAttachButton.addEventListener("action",this);this._nextAttachButton=new AttachButton(a?"attachPrev":"attachNext",a?"attachPrev_disabled":"attachNext_disabled",a?MSGS.COMMON_Previous:MSGS.COMMON_Next+" "+this._nextPrevLabel,"nextAttachAction",!0,!0,!1);this._nextAttachButton.addEventListener("action",this);this._lastAttachButton=new AttachButton("last","last_disabled",MSGS.COMMON_Last+" "+this._nextPrevLabel,"lastAttachAction",!0,!0,!1);this._lastAttachButton.addEventListener("action",
this)},setFirstEnabled:function(a){this._firstAttachButton.setEnabled(a)},setLastEnabled:function(a){this._lastAttachButton.setEnabled(a)},setPrevEnabled:function(a){this._prevAttachButton.setEnabled(a)},setNextEnabled:function(a){this._nextAttachButton.setEnabled(a)},isVisible:function(){return this._visible},setVisible:function(a){this._visible=a;var b=$(this.id);b&&(b.style.display=a?"block":"none")},updateCount:function(a){var b=$(this.id+"_totalCount");b&&(b.innerHTML=a);if(b=juic.$(this.id+
"_attachmentIndex")){var c=MSGS.RECRUITING_ATTACHMENT_CANDIDATE_PAGINATOR+" ",c=c+sfMessageFormat.format(MSGS.COMMON_PAGINATOR_Type_Desired_Page_from_x_to_y,1,a);b.setAttribute("aria-label",c)}},updateTextbox:function(a){var b=juic.$(this.id+"_attachmentIndex");b&&(b.value=a)},updatePaginationArrows:function(a,b){0==a?this._toggleArrows(!1,!1,!0,!0):a+1==b?this._toggleArrows(!0,!0,!1,!1):this._toggleArrows(!0,!0,!0,!0)},_toggleArrows:function(a,b,c,d){this.setFirstEnabled(a);this.setPrevEnabled(b);
this.setNextEnabled(c);this.setLastEnabled(d)},renderHtml:function(a){if(this.isVisible()){a.push('\x3cspan class\x3d"attachmentPaginate globalFloatRight" id\x3d"',this.id,'" \x3e');this._prevAttachButton.renderHtml(a);var b=[];b.push('\x3cinput id\x3d"',this.id,'_attachmentIndex" size\x3d"4" maxLength\x3d"4"');b.push(' onchange\x3d"',this.fireCode("_switchToAttachment"),'"');b.push(' onkeydown\x3d"',this.fireCode("_validateNumberKeyDown"),'"');b.push(' value\x3d"1" class\x3d"pageInput"\x3e');b=b.join("");
a.push("\x3cspan class\x3d'attachmentNavigator globalFloatLeft'\x3e");a.push(sfMessageFormat.format(MSGS.RECRUITING_ATTACHMENT_PAGINATOR,b,'\x3cspan id\x3d"'+this.id+'_totalCount" class\x3d"totalCount"\x3e\x3c/span\x3e'));a.push("\x3c/span\x3e");this._nextAttachButton.renderHtml(a);a.push("\x3c/span\x3e")}},_switchToAttachment:function(){var a=juic.$(this.id+"_attachmentIndex").value;this._isValidNumber(a)&&this.dispatch("action",{actionCommand:"gotoAttachment",attachmentIndex:a})},_isValidNumber:function(a){return a&&
/^([+-]?(((\d+(\.)?)|(\d*\.\d+))([eE][+-]?\d+)?))$/.test(a)},_validateNumberKeyDown:function(a){var b=a.srcElement;a=a.which?a.which:a.keyCode;if(190==a||110==a)return-1==b.value.indexOf(".");13==a&&this._switchToAttachment();return 31>=a||48<=a&&57>=a||96<=a&&105>=a||37<=a&&40>=a},handleEvent:function(a){if("action"==a.type)switch(a.actionCommand){case "nextAttachAction":this.dispatch("action",{actionCommand:"nextAttachAction"});break;case "prevAttachAction":this.dispatch("action",{actionCommand:"prevAttachAction"});
break;case "lastAttachAction":this.dispatch("action",{actionCommand:"lastAttachAction"});break;case "firstAttachAction":this.dispatch("action",{actionCommand:"firstAttachAction"});break;default:alert("Invalid action command dispatched to NextPrevAttach.")}}})}();function AttachToolbar(){this.register();this._toolbarItems=[];this._separators=[]}
AttachToolbar.prototype=function(){function a(){this.register()}a.prototype=function(){return set(new Component,{renderHtml:function(a){a.push('\x3cspan id\x3d"',this.id,'" class\x3d"attachSeparator"\x3e|\x3c/span\x3e')}})}();return set(new Component,{addCustom:function(a){this._toolbarItems.push(a)},addSeparator:function(){var b=new a;this._separators.push(b);this._toolbarItems.push(b)},renderHtml:function(a){a.push("\x3cdiv class\x3d'attachViewerHeader backgroundColor' id\x3d'",this.id,"'\x3e\x3ctable class\x3d'attachmentHeader'\x3e\x3c/tr\x3e");
this._getItemsHtml(a);a.push("\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e")},_getItemsHtml:function(a){for(var b=0,d=this._toolbarItems.length;b<d;b++)if("attachmentNvgtrWidget"!=this._toolbarItems[b].className||"attachmentNvgtrWidget"==this._toolbarItems[b].className&&this._toolbarItems[b]._visible)a.push("\x3ctd class\x3d'",this._toolbarItems[b].className,"'\x3e"),this._toolbarItems[b].renderHtml(a),a.push("\x3c/td\x3e")}})}();function AttachDropMenu(a){this.register();this._init(a)}
AttachDropMenu.prototype=function(){return set(new Component,{_init:function(a){this._attachmentType=a.attachmentType;this._ctxMenu=new SFContextualMenu("","arrowDown",!0,null,!1,"padding:0px;");this._ctxMenu.setAnchorType(a.anchorType);this._ctxMenu.setMenuFocusPoint("anchor");a.anchorTitle&&this._ctxMenu.setAnchorTitle(a.anchorTitle);this._menuItemSingle=new WBLink(a.action1.label,{css:"",clickParam:{actionValue:a.action1.actionValue},enabled:!1});this._menuItemSingle.addEventListener("click",this);
this._menuItemSingle.setStyle("color: #CCC; cursor: default");this._menuItemAll=new SFLink(a.actionAll.label,{css:"attachNoPad",title:a.actionAll.label,clickParam:{actionValue:a.actionAll.actionValue}});this._menuItemAll.addEventListener("click",this);this._ctxMenu.addMenuItem(this._menuItemSingle);this._ctxMenu.addMenuItem(this._menuItemAll);this._singleBtn=new AttachButton(a.singleBtn.css,a.singleBtn.disabledCSS,a.singleBtn.label,a.singleBtn.actionValue,!0,!0,!1);this._singleBtn.addEventListener("action",
this);this.className="btnIcon"},renderHtml:function(a){a.push("\x3cspan class\x3d'btn left' style\x3d'display: ",this._showMenu?"":"none","'"," id\x3d'","ctx",this.id,"'\x3e ");this._ctxMenu.renderHtml(a);a.push("\x3c/span\x3e");a.push("\x3cspan style\x3d'display: ",this._showMenu?"none":"","'"," id\x3d'","btn",this.id,"'\x3e ");this._singleBtn.renderHtml(a);a.push("\x3c/span\x3e")},update:function(a,b,c,d,e){this._jobReqId=a;this._candidateArray=b;this._curAttachmentId=c;this._attachmentArray=d;
this._curAttachURL=e;this._totalAttachment=null==d?0:d.length;this._totalCandidate=null==b?0:b.length;this._showMenu=null!=this._totalAttachment&&1<this._totalAttachment;this._enableCurrent=null!=c&&0<c;a=$("btn"+this.id);b=$("ctx"+this.id);c=void 0!=a&&void 0!=b;this._showMenu&&c?(a.style.display="none",b.style.display=""):c&&(b.style.display="none",a.style.display="");this._singleBtn.setEnabled(this._enableCurrent);this._enableCurrent?(this._menuItemSingle.setEnabled(!0),this._menuItemSingle.setStyle(!1)):
(this._menuItemSingle.setEnabled(!1),this._menuItemSingle.setStyle("color: #CCC; cursor: default"))},getAttachmentIds:function(){for(var a=this._attachmentArray[0],b=1;b<this._totalAttachment;b++)a+=","+this._attachmentArray[b];return a},getCandidateIds:function(){for(var a=this._candidateArray[0],b=1;b<this._totalCandidate;b++)a+=","+this._candidateArray[b];return a},handleEvent:function(a){switch(a.type){case "action":"printAttachAction"==a.actionCommand&&this._enableCurrent?AttachmentViewerUtil.openPreview(this._attachmentType,
this._curAttachmentId):"downloadAttachAction"==a.actionCommand&&this._enableCurrent&&RCMAttachmentDownload.retrieveAttachment(this._curAttachURL);break;case "click":"print1Resume"==a.param.actionValue?this._enableCurrent&&AttachmentViewerUtil.openPreview(this._attachmentType,this._curAttachmentId):"printAllResume"==a.param.actionValue?AttachmentViewerUtil.openPreview(this._attachmentType,this.getAttachmentIds()):"save1Resume"==a.param.actionValue?this._enableCurrent&&RCMAttachmentDownload.retrieveAttachment(this._curAttachURL):
"saveAllResume"==a.param.actionValue&&AttachmentViewerUtil.downloadMultiple(this._attachmentType,this._jobReqId,this.getCandidateIds(),this.getAttachmentIds(),this._attachmentArray.length)}}})}();function AttachButton(a,b,c,d,e,f,g){this.register();this._iconClass=a;this._disabledIconClass=b;this._tooltip=c;this._actionCommand=d;this._enabled=f?f:!1;this._visible=e?e:!1;this.className=g?"btnIcon":""}
AttachButton.prototype=function(){return set(new Component,{renderHtml:function(a){a.push("\x3cspan class\x3d'btn' title\x3d'",this._tooltip,"' ","' alt\x3d'",this._tooltip,"' ",this._visible?"":"style\x3d'display:none;' ","id\x3d'",this.id,"' onclick\x3d'",this.fireCode("_click"),"' onkeydown\x3d'",this.fireCode("_keydown"),"'"," aria-disabled\x3d'",this._enabled?"false":"true","' tabindex\x3d'0' role\x3d'button'\x3e\x3cspan class\x3d'left'\x3e","\x3ca id\x3d'pictureButton_",this.id,"' class\x3d'",
this._enabled?this._iconClass:this._disabledIconClass,"'"," aria-disabled\x3d'",this._enabled?"false":"true","' style\x3d'padding:0px;'\x3e\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e")},_keydown:function(a){a=SFDOMEvent.getCharCode(a);a!=SFDOMEvent.KEY_CODE.SPACE&&a!=SFDOMEvent.KEY_CODE.RETURN||this._click()},_click:function(){this.isEnabled()&&this.dispatch("action",{actionCommand:this._actionCommand})},isEnabled:function(){return this._enabled},isVisible:function(){return this._visible},setEnabled:function(a){this._enabled=
a;var b=$("pictureButton_"+this.id);b&&(b.disabled=!a,b.className=a?this._iconClass:this._disabledIconClass)},setVisible:function(a){this._visible=a;var b=$(this.id);b&&(b.style.display=a?"":"none")}})}();function AttachSpaceGap(a){this.register();this._width=a?a:!1}AttachSpaceGap.prototype=function(){return set(new Component,{renderHtml:function(a){a.push('\x3cspan id\x3d"',this.id,'" class\x3d"attachGap" ');this._width&&a.push('style\x3d"width:',this._width,'"');a.push("\x3e\x26#160;\x3c/span\x3e")}})}();
function AttachmentViewerUtil(){}AttachmentViewerUtil.openPreview=function(a,b){var c=[];c.push("attachmentType\x3d",a,"\x26attachmentIds\x3d",b,"\x26attachSecKey\x3d",ajaxSecKey);c=c.join("");PrintPreview.openHtmlPreviewWindowWithParams("/xi/ui/attachment/pages/attachmentImagePreview.xhtml",c,!0,"preview_popup",null)};
AttachmentViewerUtil.downloadMultiple=function(a,b,c,d,e){e=[];e.push("attachmentType\x3d",a,"\x26jobId\x3d",b,"\x26candIdList\x3d",c,"\x26attachmentIds\x3d",d);a=e.join("");PrintPreview.openHtmlPreviewWindowWithParams("/xi/ui/attachment/pages/attachmentMultipleDownload.xhtml",a,!0,"zip_popup"+Number(new Date),"innerWidth\x3d260,width\x3d280,innerHeight\x3d130,height\x3d140,resizable\x3d0,scrollbars\x3d0")};