/*
 !! BEGIN /ui/juic/js/components/sfAbstractAdjustableHeight.js !!! !! BEGIN /ui/juic/js/components/sfHeightAdjuster.js !!! !! BEGIN /ui/juic/js/components/sfButtonLayout.js !!! !! BEGIN /ui/juic/js/components/sfScrollBox.js !!! !! BEGIN /ui/juic/js/components/sfList.js !!! !! BEGIN /ui/juic/js/components/sfPanel.js !!! !! BEGIN /ui/juic/js/components/sfRevolutionPanel.js !!! !! BEGIN /ui/juic/js/components/sfCalloutPanel.js !!! !! BEGIN /ui/juic/js/components/sfContextPopup.js !!! !! BEGIN /ui/juic/js/components/sfAbstractDropComponent.js !!! !! BEGIN /ui/juic/js/components/sfCalloutPopup.js !!! !! BEGIN /ui/juic/js/components/sfTriangle.js !!! !! BEGIN /ui/juic/js/components/sfComboListSelect.js !!! !! BEGIN /ui/juic/js/components/sfComboBox.js !!! !! BEGIN /ui/juic/js/components/sfDropMenuPopup.js !!! !! BEGIN /ui/juic/js/components/sfDropMenu.js !!! !! BEGIN /ui/juic/js/components/sfMenuDropDown.js !!! !! BEGIN /ui/juic/js/components/sfDialogBox.js !!! !! BEGIN /ui/juic/js/components/sfMessageBox.js !!!*/
function SFAbstractAdjustableHeight(){juic.assert(!1,"[SFAbstractAdjustableHeight] Please do not instantiate")}juic.extend(SFAbstractAdjustableHeight,juic.Component,{setHeight:function(b){juic.assert(!1,"[SFAbstractAdjustableHeight] Must implement setHeight")}});function SFHeightAdjuster(b,c){this.register();this._init(b,c)}
(function(){juic.extend(SFHeightAdjuster,juic.Component,{_init:function(b,c){this._child=b;this._padding=c&&null!=c.padding?c.padding:0;this._minHeight=c&&c.minHeight||0;SFBodyEventDispatcher.addResizeListener(this,"resize");"undefined"!=typeof TopNavBar&&TopNavBar.showEvent&&(TopNavBar.hideEvent.subscribe(this.resize,this,!0),TopNavBar.showEvent.subscribe(this.resize,this,!0))},cleanup:function(){this._child instanceof juic.Component&&this._child.cleanup();this._super()},renderHtml:function(b){b.push('\x3cdiv id\x3d"',
this.id,'" class\x3d"sf-height-adjuster"\x3e');this._child instanceof juic.Component?this._child.renderHtml(b):b.push(this._child?this._child.toString():"");b.push("\x3c/div\x3e")},resize:function(){var b=SFDom.getY(this.id);if(null!=b){var c=SFDom.getViewportHeight(),b=Math.max(c-b-this._padding,this._minHeight);juic.$(this.id).style.height=b+"px";this._child instanceof SFAbstractAdjustableHeight&&this._child.setHeight(b);this.dispatch("heightAdjusted",{height:b})}},setChild:function(b){this._child=
b;if(b=juic.$(this.id))this._child instanceof juic.Component?this._child.render(this.id):b.innerHTML=this._child?this._child.toString():""}})})();function SFButtonLayout(b,c){this._baseButtonWrapperClass=c;this._super(b,{styleClass:"buttonLayout",innerClass:"buttonWrapper",outerBlock:!0,innerBlock:!1})}
(function(){SFButtons={OK:{actionCommand:"ok",label:MSGS.COMMON_Ok,active:!0},CANCEL:{actionCommand:"cancel",label:MSGS.COMMON_Cancel},PREVIOUS:{actionCommand:"previous",label:MSGS.COMMON_Previous},NEXT:{actionCommand:"next",label:MSGS.COMMON_Next,active:!0},DONE:{actionCommand:"done",label:MSGS.COMMON_Done,active:!0},OK_CANCEL:["CANCEL","OK"],PREVIOUS_NEXT_CANCEL:["CANCEL","PREVIOUS","NEXT"],PREVIOUS_NEXT:["PREVIOUS","NEXT"],normalize:function(b){if(b){var c=SFButtons[b];c&&!Array.isArray(c)&&(b=
c);return{label:b.label||b.text||b.toString(),active:b.active,actionCommand:b.eventName||b.actionCommand||b.command||("string"==typeof b?b:null),size:b.size,enabled:null==b.enabled?null==b.disabled?!0:!b.disabled:b.enabled,data:b.data,ariaLabel:b.ariaLabel,baseButtonWrapperClass:b.baseButtonWrapperClass}}return null},normalizeSet:function(b){"string"==typeof b&&SFButtons[b]&&(b=SFButtons[b]);var c=[];b&&(Array.isArray(b)||(b=[b]),b.forEach(function(b){c.push(SFButtons.normalize(b))},this));return c}};
juic.extend(SFButtonLayout,SFListContainer,{setModel:function(b){b=SFButtons.normalizeSet(b);Array.isArray(b)&&(b=new SFDefaultListModel(b));assert(b instanceof SFDefaultListModel,"SFButtonLayout: invalid model");this._buttonModel=b;this._super(new SFFactoryListModel(this._buttonModel,this._createButton,this))},getModel:function(){return this._buttonModel},getButtonDefinitions:function(){return this._buttonModel.getItems()},setButtonDefinitions:function(b){this._buttonModel.setItems(SFButtons.normalizeSet(b))},
getButtonDefinition:function(b){return this._buttonModel.get(b)},setButtonDefinition:function(b,c){this._buttonModel.set(b,SFButtons.normalize(c))},insertButton:function(b,c){this._buttonModel.insertItemAt(b,SFButtons.normalize(c))},appendButton:function(b){this._buttonModel.add(SFButtons.normalize(b))},removeButton:function(b){this._buttonModel.removeItemAt(b)},setButtonsEnabled:function(b){this.broadcast(function(c,h){c.setEnabled(b);this._buttonModel.get(h).enabled=b})},setButtonEnabled:function(b,
c){var h=this.get(b);h&&(this._buttonModel.get(b).enabled=c,h.setEnabled(c))},setButtonLabel:function(b,c){var h=this.get(b);h&&(this._buttonModel.get(b).label=c,h.setLabel(c))},setButtonActionCommand:function(b,c){var h=this.get(b);h&&(this._buttonModel.get(b).actionCommand=c,h.setActionCommand(c))},setButtonVisible:function(b,c){var h=this.get(b);h&&(this._buttonModel.get(b).visible=c,h.setVisible(c))},_createButton:function(b){b=SFButtons.normalize(b);juic.assert(b,"SFButtonLayout: You cannot pass null for the button definition");
if(b){var c=new SFCommandButton(b.label,b.active,b.enabled,!0,{baseButtonWrapperClass:this._baseButtonWrapperClass||b.baseButtonWrapperClass,ariaLabel:b.ariaLabel});c.setActionCommand(b.actionCommand);c.setData(b.data);b.size&&c.setSize(b.size);c.addEventListener("action",this,"dispatchEvent");return c}}})})();function SFScrollBox(b,c){this.register();this._init(b,c)}
(function(){function b(b,a,d){return b&&b[a].size-b[a].scrollArea>d}var c={autoHide:!0,scrollMargin:!0,vertical:!0,horizontal:!0,height:null,scrollTickSize:void 0,scrollInterval:void 0,minimumScroll:10,dragScroll:!1,dragInertia:!1,bubbleMouseWheel:!0};juic.extend(SFScrollBox,SFAbstractAdjustableHeight,{_init:function(b,a){var d=a,g={};set(g,c);if(d)for(var e in d){var f=d[e];null!=f&&(g[e]=f)}a=g;this._child=b;this._child instanceof juic.Component&&this._child.addEventListener("changeDimensions",
this,"adjustDOM");this._autoHide=a.autoHide;this._scrollMargin=a.scrollMargin;this._height=a.height;this._verticalOption=a.vertical;this._horizontalOption=a.horizontal;this._minimumScroll=a.minimumScroll;this._dragScroll=a.dragScroll;this._dragInertia=a.dragInertia;this._bubbleMouseWheel=a.bubbleMouseWheel;Util.browserInfo.ff||(this._focusMarker=new SFFocusMarker,this._focusMarker.addEventListener("focus",this,"_onFocus"),this._focusMarker.addEventListener("blur",this,"_onBlur"));this._autoScroller=
new SFAutoScroller({scrollEl:this.id+"scroller",tickSize:a.scrollTickSize,interval:a.scrollInterval});this._horizontal=this._horizontalOption&&new SFScrollBar({autoScroller:this._autoScroller,minimumScroll:this._minimumScroll,axisType:"x"});this._vertical=this._verticalOption&&new SFScrollBar({autoScroller:this._autoScroller,minimumScroll:this._minimumScroll,axisType:"y"});this._horizontalOption&&this._horizontal.addEventListener("action",this,"_onScrollBarAction");this._verticalOption&&this._vertical.addEventListener("action",
this,"_onScrollBarAction")},renderHtml:function(b){b.push('\x3cdiv id\x3d"',this.id,'" class\x3d"sfScrollBox',this._autoHide?" autoHideScroll":"",'"');SFDom.renderStyle(b,this._getContainerStyle());b.push(' onmouseover\x3d"',this.fireCode("_onHover",!0),'" onmouseout\x3d"',this.fireCode("_onHover",!1),'"\x3e\x3cdiv id\x3d"',this.id,'cutoff" class\x3d"scrollCutoff"');SFDom.renderStyle(b,this._getCutoffStyle());b.push('\x3e\x3cdiv id\x3d"',this.id,'scroller" class\x3d"scrollWrapper"');SFDom.renderStyle(b,
this._getScrollerStyle());b.push(' onscroll\x3d"',this.fireCode("_onScroll"),'" onfocus\x3d"',this.fireCode("_setFocus",!0),'" onblur\x3d"',this.fireCode("_setFocus",!1),'"');this._dragScroll&&b.push('ondragstart\x3d"return false" onmousedown\x3d"',this.fireCode("_onDragStart"),'" ontouchstart\x3d"',this.fireCode("_onDragStart"),'" unselectable\x3d"on" onselectstart\x3d"return false"');b.push("\x3e",this._focusMarker,this._child,'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scrollBars',this._autoHide?
" autoHideHover":"",'"\x3e');this._verticalOption&&b.push(this._vertical);this._horizontalOption&&b.push(this._horizontal);b.push("\x3c/div\x3e\x3c/div\x3e");b.addAfterRenderListener(this,"_onLoad")},setChild:function(b){this._child=b;var a=juic.createRenderContext();a.push(b);a.renderInto(this.id);this.adjustDOM()},adjustDOM:function(){var b=juic.$(this.id);b&&(this._height||(this._height=parseInt(SFDom.getStyle(b,"height"))),SFDom.updateStyle(b,this._getContainerStyle()),SFDom.updateStyle(this.id+
"scroller",this._getScrollerStyle()),SFDom.updateStyle(this.id+"cutoff",this._getCutoffStyle()),this._horizontal&&this._horizontal.adjustDOM(),this._vertical&&this._vertical.adjustDOM(),this._vertical&&!this._height&&this._vertical.setEnabled(!1),this._child instanceof SFAbstractAdjustableHeight&&(b=b.offsetHeight-SFDom.getOffsets(b),this._child.setHeight(b)))},getAutoScroller:function(){return this._autoScroller},setHeight:function(b){this._height=b;this.adjustDOM()},cleanup:function(){this._child instanceof
juic.Component&&this._child.cleanup();this._focusMarker&&this._focusMarker.cleanup();this._vertical&&this._vertical.cleanup();this._horizontal&&this._horizontal.cleanup();this._super()},handleDragEvent:function(b){switch(b.type){case "dragStart":null!=this._intervalId&&clearInterval(this._intervalId);this._last=this._last2=null;break;case "drag":this._last2=this._last;this._last={x:b.lastPoint.x-b.point.x,y:b.lastPoint.y-b.point.y};this._autoScroller.scrollMove(this._last.x,this._last.y);break;case "dragEnd":try{if(this._last2&&
this._dragInertia){var a=this._autoScroller.getScrollInfo(),d=a.x.position,g=a.y.position,e=Math.max(0,Math.min(a.x.size-a.x.scrollArea,d+(this._last2.x+this._last.x)/2*6)),f=Math.max(0,Math.min(a.y.size-a.y.scrollArea,g+(this._last2.y+this._last.y)/2*6)),h=(new Date).getTime(),c=this;this._intervalId=setInterval(function(){var a=(new Date).getTime()-h;300<a?(c._autoScroller.setScrollPosition(e,f),clearTimeout(c._intervalId),c._intervalId=null):(a=SFAnimUtil.calculateEasing(a/300,"easeOut"),c._autoScroller.setScrollPosition(d+
a*(e-d),d+a*(f-g)))},10)}}catch(n){console.log(n)}}},_onLoad:function(){if(el=juic.$(this.id))this._loadTime=null,this._bubbleMouseWheel||SFDOMEvent.addListener(el,Util.browserInfo.ff?"DOMMouseScroll":"mousewheel",this._onMouseWheel,this),this.adjustDOM();else{var b=(new Date).getTime();this._loadTime=this._loadTime||b;if(5E3>b-this._loadTime){var a=this;setTimeout(function(){a._onLoad()},10)}}},_onMouseWheel:function(b){if(!this._bubbleMouseWheel){var a=0;b=b||window.event;b.wheelDelta?(a=b.wheelDelta/
120,window.opera&&(a=-a)):b.detail&&(a=-b.detail/3);var a=100*(0>a?1:0<a?-1:0),d=b.axis==b.VERTICAL_AXIS?"y":"x",g=this._autoScroller.getScrollInfo(),e=g[d],a=e.position+a;if(a+e.scrollArea>=e.size||0>a)this._autoScroller.setScrollPosition("x"==d?a:g.x.position,"y"==d?a:g.y.position),SFDOMEvent.stopEvent(b)}},_setFocus:function(b){SFDom[b?"addClass":"removeClass"](this.id,"scrollBoxFocused")},_onFocus:function(){this._setFocus(!0)},_onBlur:function(){this._setFocus(!1)},_onDragStart:function(b){SFDragDropMgr.handleDragStart(b,
this,{useShim:!0,shimCursor:"move"})},_onHover:function(b,a){Util.isMouseLeaveOrEnter(a,juic.$(this.id))&&(SFDom[b?"addClass":"removeClass"](this.id,"scrollBoxHover"),b&&this.adjustDOM())},_onScroll:function(){null!=this._scrollingTimeout?clearTimeout(this._scrollingTimeout):SFDom.addClass(this.id,"scrollBoxScrolling");this.adjustDOM();var b=this;this._scrollingTimeout=setTimeout(function(){SFDom.removeClass(b.id,"scrollBoxScrolling");b._scrollingTimeout=null},1E3)},_getContainerStyle:function(){var h=
{};0<this._height&&(h.height=this._height+"px");if(this._scrollMargin){var a=this._autoScroller.getScrollInfo();a&&(this._height?(a=this._verticalOption&&b(a,"y",this._minimumScroll),h["padding-right"]=a?this._vertical.getOffset()+"px":0):(a=this._horizontalOption&&b(a,"x",this._minimumScroll),h["padding-bottom"]=a?this._horizontal.getOffset()+"px":0))}return h},_getCutoffStyle:function(){var h=juic.$(this.id+"scroller");if(h){var a={};if(0<this._height){var d=this._autoScroller.getScrollInfo(),h=
this._horizontalOption&&b(d,"x",this._minimumScroll)?h.offsetHeight-d.y.scrollArea:0;a.height=this._height-h+"px"}return a}},_getScrollerStyle:function(){var h=juic.$(this.id+"scroller");if(h){var a={},d=this._autoScroller.getScrollInfo(),g=this._verticalOption&&b(d,"y",0),e=this._verticalOption&&b(d,"y",this._minimumScroll),f=this._horizontalOption&&b(d,"x",0),l=this._horizontalOption&&b(d,"x",this._minimumScroll),c=e?h.offsetWidth-d.x.scrollArea:0,h=l?h.offsetHeight-d.y.scrollArea:0,d=Util.isRTL()?
"margin-left":"margin-right";a[d]=e?-c+"px":0;0<this._height?a.height=this._height+h+"px":(a["margin-bottom"]=l?-h+"px":0,Util.browserInfo.ie&&8>Util.ieVersion()&&(a["padding-bottom"]=l?h+"px":0,a["overflow-y"]="hidden"));g&&!e&&(a["overflow-y"]="hidden");f&&!l&&(a["overflow-x"]="hidden");return a}},_onScrollBarAction:function(b){var a=juic.$(this.id);switch(b.actionCommand){case "dragStart":SFDom.addClass(a,"scrollBoxDragging");break;case "dragEnd":SFDom.removeClass(a,"scrollBoxDragging")}}})})();
function SFList(b,c){this.register();this._init(b,c)}
SFList.prototype=function(){function b(b,a){this.register();this.actionItem=b;this._options=a||{};this._ariaRole=this._options.ariaRole||null}function c(){}b.prototype=function(){return juic.set(new juic.Component,{renderHtml:function(b){b.push('\x3cli id\x3d"',this.getDomId(),'"');this._ariaRole&&b.push('role\x3d"',this._ariaRole,'"');b.push("\x3e");this.actionItem&&this.actionItem.renderHtml(b);b.push("\x3c/li\x3e")},getDomId:function(){return this.id+"_listitem"}})}();c.prototype=function(){return juic.set(new juic.Component,
{renderHtml:function(b){b.push('\x3cli class\x3d"separator"\x3e\x3cdiv\x3e\x26nbsp;\x3c/div\x3e\x3c/li\x3e')}})}();return juic.set(new juic.Component,{_defaultUseFocusLoopMap:{CheckBoxList:!1,RadioButtonList:!1,ckrbList:!1,comboDropDown:!0,comboField:!1,floatList:!1,bulletList:!1,dataGridList:!1,popMenu:!0},_scrollBarWidth:18,_fixedHeight:!1,add:function(h,a){if(h.length)for(var d=0,g=h.length;d<g;d++)this._listItems.push(new b(h[d],a));else this._listItems.push(new b(h,a));this._drawList()},getItemAtIndex:function(b){return this._listItems[b]},
addSeparator:function(){this._listItems.push(new c);this._drawList()},remove:function(b){for(var a=0,d=this._listItems.length;a<d;a++)this._listItems[a].actionItem===b&&this._listItems.splice(a,1);this._drawList()},addClass:function(b){this._styleClass+=" "+b},_init:function(b,a){this._type=b?b:"";this._options=a?a:{};this._ariaRole=this._options.ariaRole||null;this._addFocusLoop=this._useFocusMarker();var d;switch(b){case "CheckBoxList":case "RadioButtonList":d="ckrbList";break;case "comboDropDown":d=
"comboField";break;case "floatList":d="floatList";break;case "bulletList":d="bulletList";break;case "dataGridList":d="dataGridList";break;case "menuItemList":d="menuItemList";break;default:d="sf-PopMenu"}this._styleClass=d;this._listItems=[];this._domReady=!1;this._addFocusLoop&&(this._focusLoop=new SFFocusLoop(this.id),this._focusMarkers=this._focusLoop.getMarkers())},_useFocusMarker:function(){if("boolean"==typeof this._options.addFocusLoop)return this._options.addFocusLoop;var b=this._defaultUseFocusLoopMap[this._type];
return"boolean"==typeof b?b:!0},setFocus:function(b){this._focusLoop.setFocus(b)},_focusNext:function(b){var a=juic.$(this.id);if(a){var d=document.activeElement;d?(b=SFDom.findNextFocusableElement(d,a,!0,b))&&SFDom.setFocus(b):this.setFocus(b)}},focus:function(b){this.setFocus(b)},onItemFocus:function(b){},_drawListItems:function(b){b.push('\x3cul class\x3d"',this._styleClass,'"');this._ariaRole&&b.push('role\x3d"',this._ariaRole,'"');b.push("\x3e");for(var a=0,d=this._listItems.length;a<d;a++)this._listItems[a].renderHtml(b);
b.push("\x3c/ul\x3e")},_drawList:function(){if(!this._domReady)return!1;var b=[];this._drawListItems(b);juic.$(this.id).innerHTML=b.join("")},setFixedHeight:function(b){juic.assert(!b||"number"==typeof b||"auto"==b,"[SFList] : innerWidth parameter must be a number or auto.");var a=juic.$(this.id);"auto"!=b&&a&&a.offsetHeight>b?(a.style.height=b+"px",a.style.width=a.offsetWidth+this._scrollBarWidth+"px",a.style.overflow="auto",this._fixedHeight=!0):this._fixedHeight=!1},hasFixedHeight:function(){return this._fixedHeight},
show:function(){var b=juic.$(this.id);b&&Util.show(b)},hide:function(){var b=juic.$(this.id);b&&Util.hide(b)},renderHtml:function(b){b.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',this._styleClass,'"\x3e');this._addFocusLoop&&this._focusMarkers[0].renderHtml(b);this._drawListItems(b);this._addFocusLoop&&this._focusMarkers[1].renderHtml(b);b.push("\x3c/div\x3e");this._domReady=!0},addMenuitemRoles:function(){var b=juic.$(this.id);b&&SFDom.walk({starter:b,visitor:function(a){SFDom.isFocusable(a,!0)&&
!a.getAttribute("role")&&a.setAttribute("role","menuitem")}})}})}();function SFPanel(b){this.register();this._init(b)}
(function(){var b=["header","content","buttonLayout","footer"],c={header:"panelHeader globalPortletHeader",content:"panelContent globalPortletBody",buttonLayout:"panelButtonLayout",footer:"panelFooter"},h=document.createElement("div");juic.extend(SFPanel,SFAbstractAdjustableHeight,{_init:function(a){a?("undefined"!=typeof a.titleHeaderTagLevel&&(juic.assert("number"==typeof a.titleHeaderTagLevel,"[SFPanel] : titleHeaderTagLevel must be a number."),juic.assert(-1<a.titleHeaderTagLevel&&7>a.titleHeaderTagLevel,
"[SFPanel] : titleHeaderTagLevel must be a number between 0 and 6.")),this._header=a.header,this._title=a.title,this._titleTip=a.titleTip,this._titleHeaderTagLevel=a.titleHeaderTagLevel,this._useNameAnchor=a.useNameAnchor,this._showCloseIcon=a.showCloseIcon,this._closeDialogOnEsc=a.closeDialogOnEsc,this._headerTag=!0===this._useNameAnchor?"a":"span",this._content=a.content,this._footer=a.footer,this._type=a.type,this._width=a.width,this._height=a.height,this._scrollable=null!=a.scrollable?a.scrollable:
!1,this._escapeHtml=null!=a.escapeHtml?a.escapeHtml:!0,this._ownChildren=!1!==a.ownChildren,this._baseButtonWrapperClass=a.baseButtonWrapperClass,this._ignoreAccessibility=a.ignoreAccessibility,this._focusable=a.focusable,this._ariaLabel=a.ariaLabel,this._panelRole=a.panelRole,(a=a.buttonDefinitions||a.buttons)&&0<a.length&&(this._buttonLayout=new SFButtonLayout(a,this._baseButtonWrapperClass),this._buttonLayout.addEventListener("action",this,"handleButton"))):(this._scrollable=!1,this._ownChildren=
!0)},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',this._getSectionClassName(),'"');SFDom.renderStyle(a,this._getStyle());this._ignoreAccessibility?(this._ariaLabel&&a.push(" aria-label\x3d'",juic.escapeHTML(this._ariaLabel),"'"),this._panelRole&&a.push(" role\x3d'",this._panelRole,"'")):(this.renderAriaAttributes(a),a.push(' role\x3d"group"'));this._focusable&&a.push(" tabindex\x3d'0'");a.push("\x3e");for(var d=this._getSectionOrder(),b=0;b<d.length;b++){var e=d[b];this._renderSection(a,
e,this["_"+e])}a.push("\x3c/div\x3e")},renderAriaAttributes:function(a){null!=this._title&&a.push(' aria-labelledby\x3d"',this.id,'_panelTitle"');null!=this._content&&a.push(' aria-describedby\x3d"',this.id,'content"')},handleButton:function(a){this.dispatchEvent(a)},_renderSection:function(a,d,b){if(this._isSectionRendered(d,b)){var g=this._getSectionClassName(d);a.push('\x3cdiv id\x3d"',this.id,d,'"');g&&a.push(' class\x3d"',g,'"');SFDom.renderStyle(a,this._getStyle(d));a.push("\x3e");this._renderContent(a,
d,b);a.push("\x3c/div\x3e")}},_renderContent:function(a,d,b){null!=b&&(a=(d=Array.isArray(a)?a:null)?juic.createRenderContext():a,!this._escapeHtml||b instanceof juic.Component?a.push(b):a.push(juic.escapeHTML(b.toString())),d&&d.push(a.join("")))},_renderStandardHeader:function(a){a.push('\x3cspan id\x3d"',this.id,'headerContainer", class\x3d"sfPanelHeaderContainer"\x3e');this._renderStandardHeaderContent(a);a.push("\x3c/span\x3e")},_renderStandardHeaderContent:function(a){this._renderTitle(a);this._showCloseIcon&&
(a.push("\x26nbsp;"),a.push('\x3cbutton id\x3d"',this.id,'closeIcon" class\x3d"closeDialog globalPortletCloseIcon globalIconFont1Support" title\x3d"',MSGS.COMMON_Close,'"  onclick\x3d"',this.fireCode("_handleClose"),'return false;" style\x3d"display:',this._showCloseIcon?"block":"none",'"\x3e\x3cspan class\x3d"legacyFont1Icon"\x3e\x3c/span\x3e\x3c/button\x3e'))},_usesStandardHeader:function(){return!1},setShowCloseIcon:function(a){this._showCloseIcon=a;var d=juic.$(this.id+"closeIcon");d&&(d.style.display=
a?"":"none")},isShowCloseIcon:function(){return this._showCloseIcon},_handleClose:function(){},_renderTitle:function(a){this._closeDialogOnEsc&&a.push('\x3cspan id\x3d"',this.id,'descTitle" class\x3d"hiddenAriaContent"\x3e',MSGS.COMMON_PRESS_ESC_KEY,"\x3c/span\x3e");if(this._title||this._useNameAnchor)this._titleHeaderTagLevel&&a.push("\x3ch",this._titleHeaderTagLevel,"\x3e"),a.push("\x3c",this._headerTag,' id\x3d"',this.id,'_panelTitle"',this._ignoreAccessibility?' aria-hidden\x3d"true"':' role\x3d"heading" ',
'style\x3d"',this._showCloseIcon?'width: 90%; text-align: left;"':'"',' title\x3d"',juic.escapeHTML(this._titleTip||this._title||""),'"',' class\x3d"panelHeaderTitle'),!0===this._useNameAnchor?(a.push(" namedAnchor"),this._title||a.push(" hiddenAriaContent"),a.push('" tabindex\x3d"-1" name\x3d"',this._getAnchorName(),'"\x3e')):a.push('"\x3e'),this._title&&"string"==typeof this._title?a.push(juic.escapeHTML(this._title)):a.push(this._title||"\x26nbsp;"),a.push("\x3c/",this._headerTag,"\x3e"),this._titleHeaderTagLevel&&
a.push("\x3c/h",this._titleHeaderTagLevel,"\x3e")},getTitle:function(){return this._title},setTitle:function(a){this._title=a;this._usesStandardHeader()&&this._setSectionContent("header","\x26nbsp;")},setFocusNamedAnchor:function(){if(""==location.hash||0>location.hash.indexOf("/"))location.hash="#"+this._getAnchorName()},setFocus:function(a){this.isShown()&&this._useNameAnchor&&!a&&this.setFocusNamedAnchor()},_handleRefocus:function(){var a=this._refocusRef;a&&setTimeout(function(){a.setFocus?a.setFocus():
a.focus?a.focus():SFDom.setFocus(a)},0)},isShown:function(){},_getAnchorName:function(){return Util.createAnchorName("sfPanelHeaderAnchor_"+this.id)},adjustDOM:function(){this._updateStyles()},setWidth:function(a){this._width=a;this._updateStyles()},setHeight:function(a){this._height=a;this._updateStyles()},getWidth:function(){return this._width},getHeight:function(){var a=juic.$(this.id);return"auto"===this._height&&a?a.offsetHeight:this._height},setType:function(a){this._type=a;this._updateClassName()},
getType:function(){return this._type},setHeader:function(a){this._setSectionContent("header",a)},getHeader:function(){return this._header},setContent:function(a){this._setSectionContent("content",a)},getContent:function(){return this._content},setFooter:function(a){this._setSectionContent("footer",a)},getFooter:function(){return this._footer},getButtonLayout:function(){this._buttonLayout||(this._buttonLayout=new SFButtonLayout([],this._baseButtonWrapperClass),this._buttonLayout.addEventListener("action",
this,"handleButton"),this._setSectionContent("buttonLayout",this._buttonLayout));return this._buttonLayout},getButtonModel:function(){return this._buttonLayout&&this._buttonLayout.getModel()},setScrollable:function(a){this._scrollable=a;this._updateStyles()},isScrollable:function(){return this._scrollable},cleanup:function(){this._ownChildren&&(this._header instanceof juic.Component&&this._header.cleanup(),this._content instanceof juic.Component&&this._content.cleanup(),this._footer instanceof juic.Component&&
this._footer.cleanup());this._buttonLayout&&this._buttonLayout.cleanup();this._super()},_setSectionContent:function(a,d){this["_"+a]=d;var b=juic.$(this.id+a),e=this._isSectionRendered(a,d);if(b)if(e){var f=juic.createRenderContext();this._renderContent(f,a,d);f.renderInto(b)}else{for(e=juic.$(this.id);b.parentNode!==e;)b=b.parentNode;e.removeChild(b)}else if(e&&(e=juic.$(this.id))){f=juic.createRenderContext();this._renderSection(f,a,d);h.innerHTML=f.join("");for(var b=h.firstChild,f=this._getSectionOrder(),
l,c=0;c<f.length;c++)if(f[c]==a){l=c;break}for(var n=null,c=l+1;!n&&c<f.length;c++)n=juic.$(this.id+f[c]);n?e.insertBefore(b,n):e.appendChild(b)}this._margins=null;this._updateStyles()},_isSectionRendered:function(a,b){return b||"content"==a},_getStyle:function(a){var b={};switch(a){case void 0:this._width&&(b.width="number"==typeof this._width?this._width+"px":this._width);break;case "content":b={},this._scrollable&&(b.overflow="auto"),a=this._getInnerHeight(),b.height=a?a+"px":""}return b},_updateClassName:function(a){var b;
if(b=a?juic.$(this.id+a):juic.$(this.id))b.className=this._getSectionClassName(a)},_updateStyles:function(a){var b=juic.$(this.id+(a?a:""));if(b&&(SFDom.updateStyle(b,this._getStyle(a)),null==a)){a=this._getSectionOrder();for(b=0;b<a.length;b++)this._updateStyles(a[b]);a=this._getInnerHeight();null!=a&&this._content instanceof SFAbstractAdjustableHeight&&this._content.setHeight(a)}},_getInnerHeight:function(){var a=null;null!=this._height&&(a=this._getMarginToFitContent(),a=null!=a?Math.max(0,this._height-
a):this._height);return a},_getMarginToFitContent:function(a){this._margins=this._margins||{};a=a||"y";var b=this._margins[a];if(null==b){var g=juic.$(this.id);if(g){var b=juic.$(this.id+"content"),e="x"==a?"width":"height",f=g.style[e];g.style[e]="";b=SFDom.getMarginToFitDescendant(g,b,a);g.style[e]=f;this._margins[a]=b}}return b},_getSectionClassName:function(a){if(a){var b=c[a];"header"!=a||!this._usesStandardHeader()||this._title||this._showCloseIcon||(b+=" hiddenAriaContent");return b}a=["sfPanelComponent"];
this._type&&a.push(this._type);(this._title||this._header)&&a.push("hasTitle");return a.join(" ")},_getSectionOrder:function(){return b}})})();function SFRevolutionPanel(b){this._super(b)}
juic.extend(SFRevolutionPanel,SFPanel,{_init:function(b){var c="globalContainer globalPortletBodyBackground globalRoundedCorners revolutionPanel";b.type&&(c+=" "+b.type);this._super(juic.set(b,{type:c}))},_getSectionClassName:function(b){var c=this._super(b);"header"==b&&(c+=" globalRoundedCornersHeader globalModernStyleSupport");return c}});function SFCalloutPanel(b){this._super(b)}
(function(){var b="startMarker header content buttonLayout footer pointerContainer pointer endMarker".split(" "),c={direction:"top",offset:"middle"};juic.extend(SFCalloutPanel,SFPanel,{_init:function(b){b=b?juic.set({},b):{};var a=b.pointerOptions;if(a){var d=a.direction,g=a.offset,a=!!a.flipOffset;["top","right","bottom","left"].contains(d)||(d=c.direction);if("middle"!=g)if(isNaN(g))g=c.offset;else var e=["top","bottom"].contains(d)?30:50,g=Math.max(parseInt(g),e);a={direction:d,offset:g,flipOffset:a}}else a=
juic.set({},c);d=b.type;b.type="globalRoundedCorners revolutionPanel revolutionCallout"+(d?" "+d:"");b.pointerOptions=a;this._super(b);this._pointerOptions=b.pointerOptions;this._clickOutsideClosesPopup=b&&b.clickOutsideClosesPopup;juic.assert(this._pointerOptions,"SFCalloutPanel: Invalid pointer options.")},_getStyle:function(b){if("pointer"==b||"pointerContainer"==b){var a=this._pointerOptions,d={};if(a){var g=a.direction,e=a.offset,e="middle"==e?"50%":e+"px";switch(g){case "top":case "bottom":d[a.flipOffset?
"right":"left"]=e;d[a.flipOffset?"left":"right"]="auto";break;case "left":case "right":d[a.flipOffset?"bottom":"top"]=e,d[a.flipOffset?"top":"bottom"]="auto"}"pointerContainer"==b&&Util.browserInfo.ie&&9>=Util.ieVersion()?d[g]="-1px":d[g]=0;switch(g){case "top":d.bottom="auto";break;case "bottom":d.top="auto";break;case "left":d.right="auto";break;case "right":d.left="auto"}}return d}return this._super(b)},_getSectionClassName:function(b){var a=this._super(b);switch(b){case void 0:if(!this._header)return a+
" globalContentBackground globalContentForeground noTitle";break;case "pointer":a="globalCalloutPointer calloutPointer";this._pointerOptions&&this._pointerOptions.direction&&(a+=" calloutDirection-"+this._pointerOptions.direction);break;case "pointerContainer":a="globalCalloutPointerContainer calloutPointer";this._pointerOptions&&this._pointerOptions.direction&&(a+=" calloutDirection-container-"+this._pointerOptions.direction);break;case "header":"header"==b&&(a+=" globalRoundedCornersHeader")}return a},
_isSectionRendered:function(b,a){return"pointer"==b||"pointerContainer"==b?!0:this._super(b,a)},_getSectionOrder:function(){return b}})})();function SFContextPopup(b,c){this.register();this._init(b,c)}
(function(){function b(a,b){var f=Util.isRTL()?"right":"left",f={origin:c(a.origin,{vertical:"bottom",horizontal:f}),menu:c(a.menu,{vertical:"top",horizontal:f}),offset:c(a.offset)};if(b){if(f.offset){if(f.origin.vertical!=b.origin.vertical||f.menu.vertical!=b.menu.vertical)f.offset.vertical*=-1;if(f.origin.horizontal!=b.origin.horizontal||f.menu.horizontal!=b.menu.horizontal)f.offset.horizontal*=-1}f.origin=b.origin;f.menu=b.menu}return f}function c(a,b){return a?juic.set({},a):b}var h=Util.browserInfo.android||
Util.browserInfo.ios,a={context:SFPositionManager,originId:null,refocusRef:null,visibleOverflow:!1,preventRedisplay:!0,loopFocus:!1,setFocusOnSelf:!1,closeOnEscape:!1,closeOnClick:!1,closeOnMouseout:!1,hideLatency:.5,viewportPadding:20},d={context:SFAbstractPositionManager};juic.extend(SFContextPopup,juic.Component,{_init:function(b,e){e=new juic.Config(e,a,d);this._originalPoint={offset:e&&e.offset,menu:e&&e.menu,origin:e&&e.origin};this.setChild(b);this._context=e.context;this._originId=e.originId;
this._visibleOverflow=e.visibleOverflow;this._preventRedisplay=e.preventRedisplay;this._lastHiddenTimeStamp=0;this._loopFocus=e.loopFocus;this._setFocusOnSelf=e.setFocusOnSelf;this._closeOnEscape=e.closeOnEscape;this._closeOnClick=e.closeOnClick;this._refocusRef=e.refocusRef;this._closeOnMouseout=e.closeOnMouseout;this._hideLatency=e.hideLatency;this._fullScreen=e.fullScreen;this._fullScreenThreshold=e.fullScreenThreshold;this._showRelativeToViewport=e.showRelativeToViewport;this._stopTouchMove=e.stopTouchMove;
this._viewportPadding=e.viewportPadding;this._loopFocus&&(this._focusLoop=new SFFocusLoop(this.id),this._focusMarkers=this._focusLoop.getMarkers())},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" onmousedown\x3d"',this.fireCode("_onMouseDown"),'" ontouchstart\x3d"',this.fireCode("_onMouseDown"),'" style\x3d"max-height: ',SFDom.getViewportHeight()-this._viewportPadding,"px; max-width: ",SFDom.getViewportWidth()-this._viewportPadding,"px");this._visibleOverflow||a.push("; overflow: hidden");
this._stopTouchMove&&a.push('" ontouchmove\x3d"SFDOMEvent.stopPropagation(event)');a.push('"\x3e');this._focusMarkers&&a.push(this._focusMarkers[0]);this._child.renderHtml(a);this._focusMarkers&&a.push(this._focusMarkers[1]);a.push("\x3c/div\x3e")},show:function(a,d){var f=this._showRelativeToViewport;d=d||{};d.refocusRef&&(this._refocusRef=d.refocusRef);null!=d.setFocusOnSelf&&(this._setFocusOnSelf=d.setFocusOnSelf);"boolean"==typeof d.showRelativeToViewport&&(f=d.showRelativeToViewport);var e=a==
this._currentOriginId;this._currentOriginId=a||this._originId;this._allowShow()?(this._shown=!0,this._isFullScreen=this._fullScreen,this._isFullScreen||null==this._fullScreenThreshold||(this._isFullScreen=SFDom.getViewportWidth()<=this._fullScreenThreshold),this._isFullScreen?(SFOverlayMgr.addEventListener("overlayRendered",this,"_onFullScreenRendered"),SFOverlayMgr.show(this,{fullScreen:!0,viewport:!0,modal:!0,centered:!1,css:{top:0,left:0}})):(this._context.addEventListener("positionFixed",this,
"_onPositionFixed"),this._context.show({component:this,originId:this._currentOriginId,fixPoint:b(this._originalPoint,this._currentPoint),alwaysInViewport:!0,showRelativeToViewport:f})),h?(SFDOMEvent.addListener(window.document,"touchstart",this._onWindowMouseDown,this),SFDOMEvent.addStopPropagationListener("touchstart",this,"_onNotifyClick")):(SFDOMEvent.addListener(window.document,"mousedown",this._onWindowMouseDown,this),SFDOMEvent.addStopPropagationListener("mousedown",this,"_onNotifyClick")),
this._closeOnEscape&&SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this),this._closeOnMouseout&&this._bindMouseOutAndOver()):e||this._isFullScreen||this._context.moveTo(this.id,b(this._originalPoint,this._currentPoint),this._currentOriginId,!0)},hide:function(){this._shown&&(this._shown=!1,this.dispatch("hide"),this._isFullScreen?SFBodyEventDispatcher.removeResizeListener(null,this):this._context.removeEventListener("positionFixed",this),h?(SFDOMEvent.removeListener(window.document,
"touchstart",this._onWindowMouseDown,this),SFDOMEvent.removeStopPropagationListener("touchstart",this)):(SFDOMEvent.removeListener(window.document,"mousedown",this._onWindowMouseDown,this),SFDOMEvent.removeStopPropagationListener("mousedown",this)),this._closeOnEscape&&SFDOMEvent.removeListener(window.document,"keydown",this._onWindowKeyDown,this),this._refocusRef&&this._handleRefocus(),this._closeOnMouseout&&(this._unBindMouseOutAndOver(),this._cleanHidePopupTimeout()))},setChild:function(a){this._child&&
(this._child.removeEventListener("changeDimensions",this),this._child.removeEventListener("hide",this),this._child.removeEventListener("action",this));if(this._child=a)this._child.addEventListener("changeDimensions",this,"_onChangeDimension"),this._child.addEventListener("hide",this,"hide"),this._child.addEventListener("action",this,"_onChildAction")},setFocus:function(a){this._focusLoop&&this._focusLoop.setFocus(a)},isFullScreen:function(){return this._isFullScreen},_onFullScreenRendered:function(a){SFOverlayMgr.removeEventListener("overlayRendered",
this);SFBodyEventDispatcher.addResizeListener(this,"_onFullScreenResize");this._child instanceof SFAbstractPositionable&&this._child.handleFullScreenResize(this._getViewportDims(),!0);this._setFocusOnSelf&&this.setFocus()},_onFullScreenResize:function(a){this._child instanceof SFAbstractPositionable&&this._child.handleFullScreenResize(this._getViewportDims(),!1)},_getViewportDims:function(){return{width:SFDom.getViewportWidth(),height:SFDom.getViewportHeight()}},_handleRefocus:function(){var a=this._refocusRef;
a&&setTimeout(function(){a.setFocus?a.setFocus():a.focus?a.focus():SFDom.setFocus(a)},0)},isShown:function(){return this._shown},cleanup:function(a){!1!==a&&this._child.cleanup();this._focusLoop&&this._focusLoop.cleanup();this.unregister()},resetCurrentPosition:function(){this._currentPoint=null},preventClose:function(){this._clickedInsidePopup=!0;var a=this;setTimeout(function(){a._clickedInsidePopup=!1},0)},_updateClassName:function(){var a=juic.$(this.id);a&&(a.className="popupAligned-"+this._currentPoint.menu.horizontal+
" popupAligned-"+this._currentPoint.menu.vertical)},_onChildAction:function(a){"hide"==a.actionCommand&&this.dispatch("hide")},_allowShow:function(){var a=!this._shown;a&&this._preventRedisplay&&250>=(new Date).getTime()-this._lastHiddenTimeStamp&&(a=!1);return a},_onPositionFixed:function(a){a.componentId==this.id&&(this._childChangedDimension||(this._currentPoint=a.positionInfo.fixPoint,this._updateClassName(),"undefined"!=typeof SFAbstractPositionable&&this._child instanceof SFAbstractPositionable?
this._child.positionFixed(a):"undefined"!=typeof SFAbstractResizable&&this._child instanceof SFAbstractResizable?(a.newComponentWidth||a.newComponentHeight)&&this._child.setDimension({width:a.newComponentWidth,height:a.newComponentHeight}):"undefined"!=typeof SFAbstractAdjustableHeight&&this._child instanceof SFAbstractAdjustableHeight&&a.newComponentHeight&&this._child.setHeight(a.newComponentHeight)),this._loopFocus&&this._setFocusOnSelf&&this.setFocus(),this.dispatch("positionFixed"))},_bindMouseOutAndOver:function(){var a=
juic.$(this._currentOriginId);a&&(SFDOMEvent.addListener(a,"mouseover",this._handleMouseOver,this),SFDOMEvent.addListener(a,"mouseout",this._handleMouseOut,this));if(a=juic.$(this.id))SFDOMEvent.addListener(a,"mouseover",this._handleMouseOver,this),SFDOMEvent.addListener(a,"mouseout",this._handleMouseOut,this)},_unBindMouseOutAndOver:function(){var a=juic.$(this._currentOriginId);a&&(SFDOMEvent.removeListener(a,"mouseover",this._handleMouseOver,this),SFDOMEvent.removeListener(a,"mouseout",this._handleMouseOut,
this));if(a=juic.$(this.id))SFDOMEvent.removeListener(a,"mouseover",this._handleMouseOver,this),SFDOMEvent.removeListener(a,"mouseout",this._handleMouseOut,this)},_handleMouseOver:function(a){this._cleanHidePopupTimeout()},_handleMouseOut:function(a){var b=juic.$(this._currentOriginId),f=juic.$(this.id),d=this,g=SFDOMEvent.getRelatedTarget(a);this._cleanHidePopupTimeout();0<this._hideLatency&&(this._hidePopupTimeout=setTimeout(function(){!f||SFDom.isAncestor(b,g)||SFDom.isAncestor(f,g)||d.hide()},
1E3*this._hideLatency))},_cleanHidePopupTimeout:function(){this._hidePopupTimeout&&clearTimeout(this._hidePopupTimeout)},_onNotifyClick:function(a){this._onWindowMouseDown(a.userEvent)},_onWindowMouseDown:function(a){a||(a=window.event);if(!this._clickedInsidePopup){var b=a&&SFDOMEvent.getTarget(a);SFDom.isAncestor(this.id,b)?this._onMouseDown(a):(this.dispatch("clickedOutsidePopup",{userEvent:a}),this._closeOnClick&&this.hide(),this._lastHiddenTimeStamp=(new Date).getTime())}},_onMouseDown:function(a){this.preventClose();
this.dispatch("preventBlur",{mouseEvent:a})},isTopOverlay:function(){return SFOverlayMgr.isTopOverlay(this)},_onWindowKeyDown:function(a){switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":this.isTopOverlay()&&this.hide()}},_onChangeDimension:function(){if(this._shown){var a=juic.$(this.id);this.dispatch("changeDimensions",{width:a.offsetWidth,height:a.offsetHeight});this._childChangedDimension=!0;this.reposition();this._childChangedDimension=!1}},reposition:function(){this._isFullScreen||this._context.moveTo(this.id,
b(this._originalPoint,this._currentPoint),this._currentOriginId,!0)},setCloseOnClick:function(a){this._closeOnClick=a},setRefocusId:function(a){this._refocusRef=a}})})();function SFAbstractDropComponent(b){this.register();this._init(b)}
(function(){var b={useButton:!1},c={};juic.extend(SFAbstractDropComponent,juic.Component,{_init:function(h){h=new juic.Config(h,b,c);this._useButton=h.useButton;this._stableId=h.stableId;this._popup=new SFContextPopup(this._createPopupContents(),this._getPopupOptions());this._popup.addEventListener("hide",this,"_onPopupHidden")},cleanup:function(){this.hide();this._popup.cleanup();this._super()},renderHtml:function(b){this._useButton?b.push("\x3cbutton"):b.push('\x3ca role\x3d"button" tabindex\x3d"0"');
b.push(' id\x3d"',this.getReferenceId(),'" class\x3d"',this._getClassName(),this._stableId?'" data-help-id\x3d"'+this._stableId:"",'" aria-haspopup\x3d"true" role\x3d"menu" onkeydown\x3d"',this.fireCode("_handleKeypress"),'" onclick\x3d"',this.fireCode("show"),'return false;" aria-owns\x3d"',this._popup.getReferenceId(),'"\x3e');this._renderButtonContents(b);this._useButton?b.push("\x3c/button\x3e"):b.push("\x3c/a\x3e")},_renderButtonContents:function(b){throw Error("SFAbstractDropComponent: Must implement _renderButtonContents");
},_createPopupContents:function(){throw Error("SFAbstractDropComponent: Must implement _createPopupContents");},_getClassName:function(){return"sfDropComponent"},_getPopupOptions:function(){return{visibleOverflow:!0,originId:this.getReferenceId(),refocusRef:this,loopFocus:!0,closeOnEscape:!0,closeOnClick:!0,setFocusOnSelf:!0}},_onPopupHidden:function(){},focus:function(){SFDom.setFocus(this.getReferenceId())},isPopupShown:function(){return this._popup.isShown()},show:function(){this._popup.show()},
hide:function(){this._popup.hide()},_handleKeypress:function(b){"SPACEBAR"==SFDOMEvent.getKeyName(b||window.event)&&(this.show(),SFDOMEvent.stopEvent(b))},updateClassName:function(){var b=juic.$(this.id);b&&(b.className=this._getClassName())},updateContent:function(){var b=juic.$(this.id);if(b){b.className=this._getClassName();var a=juic.createRenderContext();this._renderButtonContents(a);a.renderInto(b)}}})})();function SFDropComponentContents(b){this.register();this._init(b)}
(function(){var b={contents:["string",juic.Component],className:["string",null]},c={};juic.extend(SFDropComponentContents,SFAbstractAdjustableHeight,{_init:function(h){h=new juic.Config(h,c,b);this._contents=h.contents;this._className=h.className;this._contents instanceof juic.Component&&this._contents.addEventListener("hide",this,"dispatchEvent")},cleanup:function(){this._contents instanceof juic.Component&&this._contents.cleanup();this._super()},renderHtml:function(b){b.push('\x3cdiv id\x3d"',this.id,
'" class\x3d"',this.getClassName(),'"\x3e',this._contents,"\x3c/div\x3e")},getClassName:function(){return this._className?this._className:"sfDropComponentContents"},setHeight:function(b){var a=juic.$(this.id);a&&(this._offsets||(this._offsets=SFDom.getOffsets(a)),b=Math.max(0,b-this._offsets),this._contents instanceof SFAbstractAdjustableHeight?this._contents.setHeight(b):(SFDom.updateStyle(a,{overflow:"auto",height:b+"px"}),this.dispatch("changeDimensions")))}})})();
function SFCalloutPopup(b){this._super(b)}
(function(){function b(a){this._panel=a;this._panel.addEventListener("action",this,"dispatchEvent");this._panel.addEventListener("changeDimensions",this,"dispatchEvent")}function c(b,d,f,c){b=b[d];null==b||c&&"middle"==b||(b=isNaN(b)?null:Math.max(f,parseInt(b)));return null==b?a[d]:b}function h(a){var b=d[a.direction],f={menu:{},origin:{},offset:{}};f.menu[b.directionType]=b.opposite;f.origin[b.directionType]=b.direction;f.menu[b.oppositeType]="middle"==a.pointerOffset?"middle":a.flipPointerOffset?
b.oppositeAnchor:b.anchor;f.origin[b.oppositeType]="middle"==a.originOffset?"middle":a.flipOriginOffset?b.oppositeAnchor:b.anchor;f.offset[b.directionType]=(b.flipped?1:-1)*a.margin;var g=0,c=a.flipPointerOffset?-1:1,h=a.flipOriginOffset?-1:1;"middle"!=a.pointerOffset&&(g-=c*(a.pointerOffset+10));"middle"!=a.originOffset&&(g+=h*a.originOffset);f.offset[b.oppositeType]=g;return f}var a={direction:"bottom",originOffset:"middle",flipOriginOffset:!1,pointerOffset:"middle",flipPointerOffset:!1,margin:0};
juic.extend(SFCalloutPopup,SFCalloutPanel,{_init:function(b){b=b?juic.set({},b):{};var e=b.originOptions;if(e){var f=e.direction;d[f]||(f=a.direction);var g="vertical"==d[f].directionType?30:50,e={direction:f,originOffset:c(e,"originOffset",0,!0),flipOriginOffset:!!e.flipOriginOffset,pointerOffset:c(e,"pointerOffset",g,!0),flipPointerOffset:!!e.flipPointerOffset,margin:c(e,"margin",0,!1)}}else e=juic.set({},a);b.originOptions=e;b.pointerOptions={direction:d[e.direction].opposite,offset:e.pointerOffset,
flipOffset:e.flipPointerOffset};this._super(b);this._originOptions=b.originOptions;this._originId=b.originId;this._closeOnClick=null==b.closeOnClick?!0:b.closeOnClick;this._closeOnMouseout=null==b.closeOnMouseout?!0:b.closeOnMouseout;this._hideLatency=null==b.hideLatency?.5:b.hideLatency;this._role=b.role;this._refocusRef=b.refocusRef;this._showRelativeToViewport=b.showRelativeToViewport;this._closeOnScroll=null==b.closeOnScroll?!0:b.closeOnScroll},show:function(a,d){var f=new juic.Config(d);"boolean"!=
typeof f.showRelativeToViewport&&(f.showRelativeToViewport=this._showRelativeToViewport);this._currentOriginId=a||this._originId;if(!this._popup){var e=h(this._originOptions);this._popup=new SFContextPopup(new b(this),juic.set({originId:this._originId,closeOnClick:this._closeOnClick,closeOnMouseout:this._closeOnMouseout,hideLatency:this._hideLatency,loopFocus:!0,closeOnEscape:!0,refocusRef:this._refocusRef},e));this._popup.addEventListener("clickedOutsidePopup",this,"dispatchEvent");this._popup.addEventListener("hide",
this,"dispatchEvent");this._popup.addEventListener("positionFixed",this,"_onPositionFixed")}this._setFocusOnSelf=f.setFocusOnSelf;f.setFocusOnSelf=!1;this._popup.show(this._currentOriginId,f);SFBodyEventDispatcher.addResizeListener(this,"reposition");if(this._closeOnScroll){this._justShow=!0;var g=this;setTimeout(function(){g._justShow=!1},100);SFDOMEvent.addListener(window.document,"scroll",this._onWindowScroll,this)}},_onWindowScroll:function(){!this._justShow&&this.hide()},_onPositionFixed:function(){this._setFocusOnSelf&&
this.setFocus()},exclusiveShow:function(a,b){this.isShown()&&this._currentOriginId!==a&&this.hide();if(!this.isShown()||this.isShown()&&this._currentOriginId!==a)b&&(b.header&&(this._usesStandardHeader()?this.setTitle(b.header):this.setHeader(b.header)),b.title&&this.setTitle(b.title),b.content&&this.setContent(b.content)),this.show(a,b)},hide:function(){this._popup&&this._popup.hide();this.dispatch("hide");this._currentOriginId=null;SFBodyEventDispatcher.removeResizeListener(null,this);SFDOMEvent.removeListener(window.document,
"scroll",this._onWindowScroll,this)},setFocus:function(a){this._popup&&this._popup.setFocus(a);this._super(a)},_handleClose:function(){this.hide.apply(this,arguments)},_isSectionRendered:function(a,b){switch(a){case "header":return!0}return this._super(a,b)},_renderContent:function(a,b){switch(b){case "header":this._renderStandardHeader(a);break;default:this._super.apply(this,arguments)}},_usesStandardHeader:function(){return!0},reposition:function(){this._popup.reposition()},isShown:function(){return this._popup&&
this._popup.isShown()},positionFixed:function(a){var b=this._originOptions,f=a.positionInfo.fixPoint,g=d[b.direction],c=h(b);this._pointerOptions={direction:f.menu[g.directionType]!=c.menu[g.directionType]?g.direction:g.opposite,offset:b.pointerOffset,flipOffset:f.menu[g.oppositeType]!=c.menu[g.oppositeType]?!b.flipPointerOffset:b.flipPointerOffset};b=d[this._pointerOptions.direction];g=a[b.offsetNewDimension];0<g&&(f=a.positionInfo.overlay[b.offsetDimension],g=f-g,10>parseInt(SFDom.getStyle(juic.$(a.positionInfo.overlay.overlayId),
b.offsetOverlayPosition))&&(g*=-1),this._pointerOptions.flipOffset&&(g*=-1),a=this._pointerOptions.offset,"middle"==a&&(a=juic.$(this.id),a=f/2-parseInt(SFDom.getStyle(a,this._pointerOptions.flipOffset?b.offsetMarginEnd:b.offsetMarginStart))),this._pointerOptions.offset=a+g);this._updateStyles("pointerContainer");this._updateClassName("pointerContainer");this._updateStyles("pointer");this._updateClassName("pointer")},setCloseOnClick:function(a){this._popup.setCloseOnClick(a)},getRole:function(){return this._role},
cleanup:function(){this._popup&&(this._popup.cleanup(!1),delete this._popup);this._focusMarkers&&(this._focusMarkers[0].cleanup(),this._focusMarkers[1].cleanup());this._super()}});juic.extend(b,SFAbstractPositionable,{renderHtml:function(a){var b=this._panel.getRole();a.push('\x3cdiv id\x3d"',this._panel.getReferenceId(),'wrapper" ');b&&a.push('role\x3d"',b,'" ');a.push('class\x3d"globalCallout calloutPopupWrapper"\x3e');this._panel.renderHtml(a);a.push("\x3c/div\x3e")},positionFixed:function(a){this._panel.positionFixed(a)}});
var d={top:{flipped:!1,direction:"top",opposite:"bottom",directionType:"vertical",oppositeType:"horizontal",offsetMarginStart:"margin-left",offsetMarginEnd:"margin-right",offsetDimension:"width",offsetNewDimension:"newComponentWidth",offsetOverlayPosition:"left",anchor:"left",oppositeAnchor:"right"},bottom:{flipped:!0,direction:"bottom",opposite:"top",directionType:"vertical",oppositeType:"horizontal",offsetMarginStart:"margin-left",offsetMarginEnd:"margin-right",offsetDimension:"width",offsetNewDimension:"newComponentWidth",
offsetOverlayPosition:"left",anchor:"left",oppositeAnchor:"right"},left:{flipped:!1,direction:"left",opposite:"right",directionType:"horizontal",oppositeType:"vertical",offsetMarginStart:"margin-top",offsetMarginEnd:"margin-bottom",offsetDimension:"height",offsetNewDimension:"newComponentHeight",offsetOverlayPosition:"top",anchor:"top",oppositeAnchor:"bottom"},right:{flipped:!0,direction:"right",opposite:"left",directionType:"horizontal",oppositeType:"vertical",offsetMarginStart:"margin-top",offsetMarginEnd:"margin-bottom",
offsetDimension:"height",offsetNewDimension:"newComponentHeight",offsetOverlayPosition:"top",anchor:"top",oppositeAnchor:"bottom"}}})();function SFTriangle(b){this.register();this._init(b)}
(function(){var b={size:20,direction:"top",cssClass:"",inherit:void 0},c={color:["string",null],size:["number",null],direction:["string",null],cssClass:["string",null],inherit:["boolean",null]};juic.extend(SFTriangle,juic.Component,{_init:function(h){this._options=new juic.Config(h,b,c)},renderHtml:function(b){this._renderTriangle(b)},pivot:function(b){var a=juic.$(this._getDomId());a&&(this._clearDirections(a),Util.addClass(a,"direction"+b),this._options.direction=b||this._options.direction)},_renderTriangle:function(b){this._options.cssClass+=
" direction"+this._options.direction;b.push('\x3cspan class\x3d"globalArrowColor sfTriangle globalIconFont1Support globalIconFont1',this._options.cssClass,'"',' id\x3d"triangle_',this.id,'"');b.push(' onclick\x3d"',this.fireCode("_click"),'"');this._options.color&&!this._options.inherit&&b.push(' style\x3d"color:',this._options.color,'"');b.push('"\x3e\x3cspan class\x3d"legacyFont1Icon globalIconFont1 ',this._options.direction,'"\x3e\x3c/span\x3e\x3c/span\x3e')},_getDomId:function(){return"triangle_"+
this.id},_click:function(){this.dispatch("triangleClickEvent")},getDirection:function(){return this._options.direction},_clearDirections:function(b){Util.removeClass(b,"directiontop");Util.removeClass(b,"directionbottom");Util.removeClass(b,"directionleft");Util.removeClass(b,"directionright")}})})();
function SFComboListSelect(b,c){this._mutatorClass=(this._options=c)&&c.mutatorClass;this._itemClass=c&&c.itemClass;this._itemFocusClass=c&&c.itemFocusClass;this._visionClasses=c&&c.visionClasses||"";this._pageSize=c&&c.pageSize||10;this._filterType=c&&c.filterType;this._filterValue=c&&c.filterValue;this._width=c&&c.width;this._height=c&&c.height;this._scrollItemTop=c&&c.scrollItemTop;this._fetchPageDelay=c&&"number"==typeof c.fetchPageDelay?c.fetchPageDelay:0;this._focusIndex=this._getInitFocusIndex();
this._noResultsMessage=c&&c.noResultsMessage;this._useGlobalMenuTheming=!c||!1!==c.useGlobalMenuTheming;this._fetchPagesInOrder=c&&c.fetchPagesInOrder;this.setItemProvider(b);this.register()}
(function(){function b(){h||(h=document.createElement("div"),Util.hide(h),h.style.position="absolute",document.body.firstChild?document.body.insertBefore(h,document.body.firstChild):document.body.appendChild(h));return h}var c=Util.browserInfo.ff&&7>Util.ffVersion();juic.extend(SFComboListSelect,SFAbstractResizable,{renderHtml:function(a){this._calculateDims();this._initScroll=!0;a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',this._getGlobalMenuThemingClass("globalMenu")?this._getGlobalMenuThemingClass("globalMenu")+
" ":"","sf-combo-listselect",this._visionClasses,this._mutatorClass?" "+this._mutatorClass:"",'" onscroll\x3d"',this.fireCode("_fetchVisiblePages"),'"');var b={};this._height&&(b.height=this._height);this._width&&(b.width=this._width);SFDom.renderStyle(a,b);a.push('\x3e\x3cdiv id\x3d"',this.id,'container" class\x3d"scrollPage" ontouchstart\x3d"',this.fireCode("_onTouchStart"),'"');this._containerHeight&&a.push(' style\x3d"height:',this._containerHeight,'px"');a.push("\x3e");this._renderPage(a,0);
a.push("\x3c/div\x3e\x3c/div\x3e");this._fetchPagesInOrder&&a.addAfterRenderListener(this,"_fetchVisiblePages")},cleanup:function(){this.setItemProvider(null);this._super()},_renderPage:function(a,b){var d=this._pageStatus[b],e=(this._pageHeight||0)*b,f={},c=["scrolling-page"];this._fetchPagesInOrder?c.push("fetch-page-in-order"):f.top=e+"px";0==b&&c.push("first-page");!d||d.loading?c.push("page-loading"):d.error&&c.push("page-error");a.push('\x3cdiv id\x3d"',this.id,b,'"');SFDom.renderStyle(a,f);
a.push(' class\x3d"',c.join(" "),'"\x3e');!d||d.loading?this._fetchPagesInOrder&&a.push(MSGS.COMMON_loading):d.error||this._renderPageContent(a,b,d.items);a.push("\x3c/div\x3e")},_adjustPageHeight:function(a){var b=this.id,c=juic.$(b),e=juic.$(b+a).offsetHeight;if(e>this._pageHeight){var f=c.scrollTop%this._pageHeight/this._pageHeight;this._pageHeight=e;this._itemHeight=e/this._pageSize;this._containerHeight=this._itemCount*this._itemHeight;var l=juic.$(b+"container");l.style.height=this._containerHeight+
"px";c.scrollTop=e*(a+f);Array.prototype.forEach.call(l.childNodes,function(a){var f=a.id;0==f.indexOf(b)&&(f=parseInt(f.substring(b.length)),a.style.top=e*f+"px")})}},_renderPageContent:function(a,b,c){a.push('\x3cul id\x3d"',this.id,'_listSelect" class\x3d"',"sf-list-select",'" role\x3d"listbox" aria-expanded\x3d"true"\x3e');if(0==b&&0==c.length)a.push('\x3cli role\x3d"option" class\x3d"',"no-results"," ",this._getGlobalMenuThemingClass("globalMenuItem"),'" unselectable\x3d"on" onselectstart\x3d"return false" role\x3d"menuitem"\x3e'),
a.push(this._noResultsMessage||MSGS.COMMON_No_Results),a.push("\x3c/li\x3e");else for(var d=0,f=c.length;d<f;d++){var g=c[d],k=b*this._pageSize+d;this._fetchPagesInOrder&&0<b&&(k=this._lastItemIndex+1);a.push('\x3cli role\x3d"option" id\x3d"',this._getItemDomId(k),'"');a.push(' class\x3d"',this._getGlobalMenuThemingClass("globalMenuItem"));g&&g.disabled&&a.push(" ","disabled-item");this._itemClass?a.push(" ",this._itemClass):a.push(" ","sf-list-item");this._focusIndex==k&&(a.push(" ",this._getFocusClass()),
a.push(" ",this._getGlobalMenuThemingClass("globalMenuItemFocus")));a.push('" onmouseover\x3d"',this.fireCode("_mouseover",k));a.push('" onmouseout\x3d"',this.fireCode("_mouseout",k));a.push('" ontouchstart\x3d"',this.fireCode("_touchstart",k));a.push('" ontouchend\x3d"',this.fireCode("_touchend",k));a.push('" onclick\x3d"',this.fireCode("_selectItem",k),'"\x3e');this._renderItem(a,g,k);a.push("\x3c/li\x3e");this._fetchPagesInOrder&&(this._lastItemIndex=k)}a.push("\x3c/ul\x3e")},_renderItem:function(a,
b,g){c&&a.push('\x3cspan class\x3d"ellipsis"\x3e...\x3c/span\x3e');a.push('\x3ca title\x3d"',juic.escapeHTML(this._itemProvider.getLabel(b)),'" onclick\x3d"',this.fireCode("_selectItem",g),'" unselectable\x3d"on" onselectstart\x3d"return false" role\x3d"menuitem"\x3e');b&&(b instanceof juic.Component?b.renderHTML(a):(b=juic.escapeHTML(this._itemProvider.getLabel(b)),""==b&&(b="\x26nbsp;"),this._filterValue&&(b=b.replace(new RegExp("("+RegExp.escape(juic.escapeHTML(this._filterValue))+")","i"),"\x3cem\x3e$1\x3c/em\x3e")),
a.push(b)));a.push("\x3c/a\x3e")},_renderPageError:function(a,b,c){a.push(c)},resetPagination:function(){if(this._focusItem)this.setFocusItem(this._focusItem);else{this._focusIndex=this._getInitFocusIndex();var a=this;setTimeout(function(){a.changeItemFocus(a._focusIndex,!0)},300)}this._lastFetchIndex=null;this._pageAvailable=!1;this._containerHeight=this._height=this._itemCount=this._pageCount=this._pageHeight=null;this._pageStatus=[];this._fetchPagesInOrder&&(this._cachedItems=[]);var b=juic.$(this.id);
b&&(b.scrollTop=0,b.firstChild.innerHTML="")},setFilter:function(a,b){var d=this;this._filterType=a;this._filterValue=b;this.resetPagination();0<this._fetchPageDelay?(this._fetchPageTimeout&&clearTimeout(this._fetchPageTimeout),this._fetchPageTimeout=setTimeout(function(){d._fetchPage(0);delete d._fetchPageTimeout},this._fetchPageDelay)):this._fetchPage(0)},_getInitFocusIndex:function(){return this._options&&this._options.focusIndex||0},getFocusItemId:function(){return this._getItemDomId(this._focusIndex)},
_getItemDomId:function(a){return this.id+"item"+a},resetFilter:function(){this._filterValue=null;this._fetchPageTimeout&&(clearTimeout(this._fetchPageTimeout),this._fetchPageTimeout=null)},clearFilter:function(){this.setFilter(null,null)},selectFocus:function(){if(null!=this._focusIndex){var a=this.getCachedItem(this._focusIndex);a&&!a.disabled&&(this._focusItem=a,this.dispatch("itemSelected",{item:a}))}},moveFocusUp:function(){0<this._itemCount&&0<=this._focusIndex&&this.changeItemFocus(this._focusIndex-
1)},moveFocusDown:function(){if(0<this._itemCount){var a=null==this._focusIndex?0:this._focusIndex+1,b=this._itemCount-1;this._fetchPagesInOrder&&(b=this._lastItemIndex);a=Math.min(a,b);this.changeItemFocus(a)}},changeItemFocus:function(a,b){var d=this._itemCount-1;this._fetchPagesInOrder&&(d=this._lastItemIndex);0<this._itemCount&&a<=d&&(this._setItemFocus(this._focusIndex,!1),this._focusIndex=a,b||this.scrollToItem(this._focusIndex),this._setItemFocus(this._focusIndex,!0))},setFocusItem:function(a){var b=
a?this._itemProvider.indexOf(a,{filterType:this._filterType,filterValue:this._filterValue}):-1;0<=b?(this._focusItem=a,this._focusIndex=b):(this._focusItem=null,this._focusIndex=this._getInitFocusIndex())},getFocusItem:function(){return this._focusItem},scrollToItem:function(a,b){var d=juic.$(this.id);if(d){var e=a*this._itemHeight,f=e+this._itemHeight,c=d.scrollTop,k=c+d.clientHeight;e<c&&(d.scrollTop=e);f>k&&(d.scrollTop=b?e:f-d.clientHeight);this._fetchVisiblePages()}},selectOnlyValue:function(){1==
this._itemCount&&this.selectFocus()},resize:function(){var a=juic.$(this.id);if(a){var b=a.offsetHeight,c=a.offsetWidth,e=a.firstChild;this._calculateDims();!this._height&&this._pageHeight&&(this._height=this._pageHeight+"px");if(this._height){var f=this._height;this._itemCount<this._pageSize&&this._height>this._containerHeight&&(f="auto");a.style.height=f}else a.style.height="auto";this._width&&(a.style.width=this._width);this._containerHeight?e.style.height=this._containerHeight+"px":0==this._itemCount&&
(this._containerHeight=a.offsetHeight-SFDom.getOffsets(a));"auto"==this._width&&this._containerHeight>a.offsetHeight&&(this._width=a.offsetWidth+17+"px",a.style.width=this._width);this._initScroll&&this._focusIndex?(this.scrollToItem(this._focusIndex,this._scrollItemTop),this._initScroll=!1):this._fetchVisiblePages();b==a.offsetHeight&&c==a.offsetWidth||this.dispatch("changeDimensions",this.getDimension())}},getContainerHeight:function(){this._calculateDims();return this._containerHeight},isVerticalScrollRequired:function(){if(this._fetchPagesInOrder)return this._isPageAvailable(0)?
this._itemCount>this._pageSize:!1;this._calculateDims();return this.getContainerHeight()>this._pageHeight},getPageHeight:function(){return this.getPageDimension().height},getPageWidth:function(){return this.getPageDimension().width},getPageDimension:function(){this._calculateDims();return{width:this._pageWidth,height:this._pageHeight}},getPageCount:function(){return this._pageCount},setWidth:function(a){this.setDimension(a,null)},setHeight:function(a){this.setDimension(null,a)},setDimension:function(a,
b){if(a&&(a.width||a.height))this.setDimension(a.width,a.height);else{var d=SFDom.getViewportRegion(),e=this.getMaxDimension();a&&(e&&e.width&&(a=Math.min(a,e.width)),a=Math.min(a,d.width-17),this._width="string"==typeof a?a:Math.max(a,117)+"px");b&&("string"==typeof b?this._height=b:(e&&e.height&&(b=Math.min(b,e.height)),b=Math.min(b,d.height-17),this._height=Math.max(b,10)+"px"));this.resize();this.dispatch("changeDimensions",this.getDimension())}},getDimension:function(){var a=juic.$(this.id);
if(a)return this._offsetsX||(this._offsetsX=SFDom.getBorder(a,"x")+SFDom.getPadding(a,"x"),this._offsetsY=SFDom.getBorder(a,"y")+SFDom.getPadding(a,"y")),{width:a.offsetWidth-this._offsetsX,height:a.offsetHeight-this._offsetsY}},getMinDimension:function(){return{width:117,height:Math.max(0<this._itemHeight?1*this._itemHeight:this._containerHeight,10)}},getMaxDimension:function(){if(this._containerHeight)return{height:this._containerHeight}},resetDimension:function(){this._width=this._height=null},
isPageAvailable:function(){return this._pageAvailable},setItemProvider:function(a){this._itemProvider&&(this._itemProvider.removeEventListener("itemsAvailable",this),this._itemProvider.removeEventListener("itemsError",this));a instanceof SFAbstractItemProvider?this._itemProvider=a:a instanceof Array&&(this._itemProvider=new SFArrayItemProvider(a));this._itemProvider&&(this._itemProvider.addEventListener("itemsAvailable",this,"_onItemsAvailable"),this._itemProvider.addEventListener("itemsError",this,
"_onItemsError"))},getItemProvider:function(){return this._itemProvider},setPageSize:function(a){this._pageSize=a},getPageSize:function(){return this._pageSize},getScrollThreshold:function(){return 20},_adjustPageDOM:function(a){if(c){var b=Math.min(this._itemCount,(a+1)*this._pageSize)-1;for(a*=this._pageSize;a<=b;a++)this._adjustItemDOM(a)}},_adjustItemDOM:function(a){if(a=juic.$(this._getItemDomId(a)))SFDom[a.childNodes[1]&&a.childNodes[1].offsetWidth>a.offsetWidth-5?"addClass":"removeClass"](a,
"display-ellipsis")},_selectItem:function(a,b){b=b||window.event;SFDOMEvent.stopPropagation(b);this._focusIndex=a;this.selectFocus()},_touchstart:function(a,b){this._mouseover(a,b)},_touchend:function(a,b){this._mouseout(a,b)},_mouseover:function(a,b){var d=juic.$(this._getItemDomId(a));Util.isMouseLeaveOrEnter(b,d)&&this.changeItemFocus(a,!0)},_mouseout:function(a,b){var d=juic.$(this._getItemDomId(a));Util.isMouseLeaveOrEnter(b,d)&&this.changeItemFocus(null,!0)},_getFocusClass:function(){return this._itemFocusClass?
this._itemFocusClass:"item-focused"},_setItemFocus:function(a,b){if(null!=a){var d=juic.$(this._getItemDomId(a));if(d&&(SFDom[b?"addClass":"removeClass"](d,this._getFocusClass()),this._useGlobalMenuTheming))SFDom[b?"addClass":"removeClass"](d,"globalMenuItemFocus")}b&&(d=this.getCachedItem(this._focusIndex))&&!d.disabled&&(this._focusItem=d,this.dispatch("itemFocused",{item:d}))},_onTouchStart:function(a){a=a||window.event;SFDragDropMgr.handleDragStart(a,this,{useShim:!0})},handleDragEvent:function(a){var b=
juic.$(this.id);switch(a.type){case "dragStart":this._scrollTopStart=b.scrollTop;break;case "drag":b.scrollTop=Math.max(0,Math.min(b.scrollHeight-b.clientHeight,this._scrollTopStart-(a.point.y-a.origin.y)))}},_onItemsAvailable:function(a){if(a.pagination.filterValue==this._filterValue){var b=a.pagination;this._pageAvailable=!0;this._itemCount||(this._itemCount=a.itemCount);this._pageCount=Math.ceil(this._itemCount/this._pageSize);var c=a.items,b=b.pageIndex,e=this._pageStatus[b]={event:a,items:c,
itemCount:a.itemCount,error:!1,loading:!1};0<b&&(e.firstPageStatus=this._pageStatus[0]);this._fetchPagesInOrder&&c&&0<c.length&&(this._cachedItems.push.apply(this._cachedItems,c),this._itemCount=this._cachedItems.length);this._updatePage(a.pagination.pageIndex);juic.$(this.id)&&0<this._pageHeight&&(this._height||(this._height=this._pageHeight+"px"),this.resize());this.dispatchEvent(a);!this._fetchPagesInOrder&&juic.$(this.id+b)&&this._adjustPageHeight(b)}},_onItemsError:function(a){this._pageStatus[a.pagination.pageIndex]=
{error:!0,loading:!1,message:a.message};this.dispatchEvent(a)},_fetchVisiblePages:function(a){if(!0===a||10>=this._pageCount){var b=juic.$(this.id);if(b){a=b.scrollTop;var c=a+b.clientHeight;if(this._fetchPagesInOrder){a=this._lastFetchIndex;var e="number"==typeof a&&this._isPageAvailable(a),c=b.scrollHeight-c<this.getScrollThreshold();if(e&&c){c=this._pageStatus[a];b=c.itemCount;if("function"==typeof this._itemProvider.hasMore)c=this._itemProvider.hasMore(c);else if("number"==typeof b)c=b>(a+1)*
this._pageSize;else throw Error("ItemProvider must have hasMore, or itemsAvailable event must have itemCount as number");c&&this._fetchPage(a+1)}}else for(a=parseInt(a/this._pageHeight);a<this._pageCount&&!(a*this._pageHeight>=c||a>this._pageCount);)this._pageStatus[a]?juic.$(this.id+a)?this.isPageAvailable()&&this._adjustPageDOM(a):this._addPage(a):this._fetchPage(a),a++}}else if(null==this._fetchTimeout){var f=this;this._fetchTimeout=setTimeout(function(){f._fetchVisiblePages(!0);f._fetchTimeout=
null},225)}},_fetchPage:function(a){this._pageStatus[a]||(this._lastFetchIndex=a,this._pageStatus[a]={loading:!0},this._nextStartIndex=0<a?this._getNextPageStartIndex(a):0,this._itemProvider.getItems({pageNumber:a+1,pageIndex:a,pageSize:this._pageSize,startIndex:this._nextStartIndex,endIndex:(a+1)*this._pageSize-1,filterType:this._filterType,filterValue:this._filterValue}),juic.$(this.id+a)||this._addPage(a))},_getNextPageStartIndex:function(a){var b=0<a&&this._pageStatus[a-1];if(b&&(b=b.items)&&
0<b.length){var c=this._getItemIndex(b[0]);if(0<=c){for(a=1;a<b.length;a++)c=Math.max(c,this._getItemIndex(b[a]));return c+1}}return this._pageSize*a},_getItemIndex:function(a){a=a&&a.indexRef;return"number"==typeof a&&0<=a?a:-1},_addPage:function(a){var d=juic.$(this.id);if(d){var d=d.firstChild,c=juic.createRenderContext();this._renderPage(c,a);var e=b();c.renderInto(e);d.appendChild(e.firstChild);this._isPageAvailable(a)&&(this._adjustPageDOM(a),this._fetchPagesInOrder||this._adjustPageHeight(a))}},
_updatePage:function(a){var b=juic.$(this.id+a);if(b){var c=this._pageStatus[a],e=0==a?"first-page ":"";if(!c||c.loading)b.className=e+"scrolling-page page-loading",b.innerHTML="";else{if(c.error){b.className=e+"scrolling-page page-error";var f=juic.createRenderContext();this._renderPageError(f,a,c.message)}else f=juic.createRenderContext(),this._renderPageContent(f,a,c.items),b.className=e+"scrolling-page";f.renderInto(b)}this._fetchPagesInOrder&&SFDom.addClass(b,"fetch-page-in-order");this._calculateDims();
b.style.top=this._pageHeight*a+"px"}},getCachedItem:function(a){if(this._fetchPagesInOrder)return this._cachedItems&&this._cachedItems[a];if(0<=a&&a<this._itemCount){var b=parseInt(a/this._pageSize);if((b=this._pageStatus[b])&&!b.error&&!b.loading)return b.items[a%this._pageSize]}return null},_calculateDims:function(){if(!this._pageHeight){var a=juic.$(this.id+0);if(a)this._pageHeight=a.offsetHeight,this._pageWidth=a.offsetWidth;else if(this._isPageAvailable(0)){a=b();a.className="sf-combo-listselect"+
(this._mutatorClass?" "+this._mutatorClass:"");var d=juic.createRenderContext();this._renderPage(d,0);d.renderInto(a);Util.show(a);this._pageHeight=a.firstChild.offsetHeight;this._pageWidth=a.firstChild.offsetWidth;Util.hide(a);a.innerHTML=""}this._itemHeight=this._pageHeight/Math.min(this._pageSize,this._itemCount);this._fetchPagesInOrder||(this._containerHeight=this._itemCount*this._itemHeight)}},_isPageAvailable:function(a){return(a=this._pageStatus[a])?!a.error&&!a.loading:!1},getDomId:function(){return this.id+
"_listSelect"},_getGlobalMenuThemingClass:function(a){return this._useGlobalMenuTheming?a:""}});var h})();function SFComboBox(b,c,h){this.register();this._init(b,c,h)}
(function(){function b(a,b,d){return a&&null!=a[b]?a[b]:d}var c={vertical:5,horizontal:-5},h={vertical:0,horizontal:Util.isRTL()?25:-25},a=["ja_JP","ko_KR","zh_CN","zh_TW"],d=!1;juic.extend(SFComboBox,juic.Component,{_init:function(a,e,c){this._popupOptions=b(c,"popupOptions",null);this._minimumFilterSize=b(c,"minimumFilterSize",0);this._enabled=!b(c,"disabled",!1);this._forceSelection=b(c,"forceSelection",!0);this._title=b(c,"title",null);this._placeholder=b(c,"placeholder",null);this._allowEmpty=
b(c,"allowEmpty",!1);this._autoHeight=b(c,"autoHeight",!1);this._autoWidth=b(c,"autoWidth",!1);this._fixedWidth=b(c,"fixedWidth",!1);this._allowResize=b(c,"allowResize",!0);this._a11yLabel=b(c,"a11yLabel",MSGS.COMMON_ComboBox_Aria_Instruction);this._isV12Plus=b(c,"isV12Plus",!1);this._trimQueryValue=b(c,"trimQueryValue",!1);this._selectFirstItem=b(c,"selectFirstItem",!1);this._required=b(c,"required",!1);this._writable=b(c,"writable",!0);this._readOnlyClass=b(c,"readOnlyClass","");this._callOutID=
b(c,"callOutID",this.getReferenceId());this._maxInputLength=b(c,"maxInputLength",null);this._clearValueWhenDelete=b(c,"clearValueWhenDelete",!1);var f=b(c,"pageSize",7);this._itemProvider=this._createItemProvider(e);this._listSelect=this._createListSelect(this._itemProvider,{pageSize:f,width:this._autoWidth?"auto":null,fetchPagesInOrder:b(c,"fetchPagesInOrder",!1),noResultsMessage:b(c,"noResultsMessage",null),scrollItemTop:b(c,"scrollItemTop",!1),fetchPageDelay:b(c,"fetchPageDelay",250)});this._previousFilterValue=
null;this._listSelect.addEventListener("itemsAvailable",this,"_onItemsAvailable");this._listSelect.addEventListener("itemsAvailable",this,"_announceItemCountInfo");this._listSelect.addEventListener("itemsError",this,"_onItemsError");this._listSelect.addEventListener("itemSelected",this,"_onItemSelected");this._listSelect.addEventListener("itemFocused",this,"_updateActiveItem");this._oldValue=this.getValue();(this._selectedItem=this._itemProvider.toItem(a))&&this._listSelect.setFocusItem(this._selectedItem);
d=AccessibilityPrefs.isKeyboardOnlyNavigationEnabled();this.dropDownPointer=new SFTriangle({direction:"down",size:6});this._requiresResultSpacing=!1},renderHtml:function(a){this._writable?(a.push('\x3cspan id\x3d"',this.id,'" class\x3d"sfComboBox ',this._getStyleClass(),'"\x3e'),a.push('\x3cspan id\x3d"',this.id,'wrapper" class\x3d"',this._getWrapperClassName(),'"\x3e\x3cspan\x3e'),this._renderInput(a),a.push("\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e")):(a.push('\x3cspan id\x3d"',this.id,'_span" class\x3d "',
this._readOnlyClass,'"\x3e'),a.push(juic.escapeHTML(this.getInputText())),a.push("\x3c/span\x3e"))},_renderInput:function(a){var b="toggle";this._a11yLabel&&a.push('\x3clabel id\x3d"',this.getReferenceId(),'_describedby" class\x3d"hiddenAriaContent" for\x3d"',this.getReferenceId(),'"\x3e',this._a11yLabel,"\x3c/label\x3e");a.push('\x3cinput type\x3d"text" id\x3d"'+this.getReferenceId(),'" autocomplete\x3d"off" ');this._maxInputLength&&a.push('maxlength\x3d"',this._maxInputLength,'" ');SFDom.renderStyle(a,
this._getInputStyle());a.push(' value\x3d"'+juic.escapeHTML(this.getInputText()),'"');var f=this._getInputEventFireCodes(),e;for(e in f)a.push(" on",e,'\x3d"',this.fireCode.apply(this,f[e]),'"');var f=this._getInputAriaAttributes(),c;for(c in f)a.push(" ",c,'\x3d"',f[c],'"');this._a11yLabel&&a.push(' aria-describedby\x3d"',this.getReferenceId(),"_describedby");a.push(this._placeholder?'" placeholder\x3d"'+Util.escapeHTML(this._placeholder):"",this._enabled?"":'" disabled\x3d"disabled','" /\x3e');
a.push('\x3cdiv id\x3d"',this.getReferenceId(),'_ariaLiveAnnounce" aria-live\x3d"assertive" style\x3d"display: none;"\x3e\x3c/div\x3e');d&&null!==this._a11yLabel&&this._createAccessibilityPopup();this._isToggleRendered()&&(this._isV12Plus&&(b="globalRoundedCornersRightXSmall "+b),a.push('\x3cspan class\x3d"',b,'" onclick\x3d"',this.fireCode("_clickToggle"),'" onmousedown\x3d"',this.fireCode("_preventBlur"),'"\x3e'),this._isV12Plus?a.push(this.dropDownPointer):a.push("\x26nbsp;"),a.push("\x3c/span\x3e"))},
_getInputEventFireCodes:function(){return{blur:["_handleInputBlur"],focus:["setFocus",!0],keydown:["_keyDown"],keyup:["_keyUp"],mousedown:["_preventBlur"],input:["_onInput"]}},_getInputAriaAttributes:function(){return{role:"combobox","aria-expanded":"false","aria-owns":this._getAriaOwns(),"aria-autocomplete":"list"}},attachExternal:function(a){this._attachConfig=a;this._callOutID=a.callOutID||a.displayFieldId;var b=a&&juic.$(a.displayFieldId);if(b){var f=this._getInputEventFireCodes(),d;for(d in f)(function(a){SFDOMEvent.addListener(b,
d,function(b){var f=a.slice(1);f.push(b);return this[a[0]].apply(this,f)},this)}).call(this,f[d]);var f=this._getInputAriaAttributes(),e;for(e in f)b[e]=f[e]}var c=a.hiddenFieldId;if(c){var g=this,h=a.hiddenFieldValueGenerator||function(){var a=this.getValue();return"string"==typeof a?a:a&&a.toString?a.toString():""};e={handleEvent:function(b){if(b=juic.$(c)){var f=h.call(g);window.jQuery?jQuery(b).val(f).trigger("change"):b.onchange&&(b.value=f,b.onchange());a.submitOnSelect&&(b=(b=juic.$(a.displayFieldId))&&
b.form)&&b.submit()}}};this.addEventListener("change",e);this.addEventListener("itemRemoved",e)}},_getAriaOwns:function(){return this._listSelect.id+"_listSelect"},getReferenceId:function(){return this._attachConfig?this._attachConfig.displayFieldId:this.id+"_write"},validate:function(){var a=this.getValue();if(this._required&&!/[^ \t\r\n]/.test(a))return this.displayErrorMessage(),!1;this._err&&this._err.hide();return!0},displayErrorMessage:function(a){window.SFInlineError?document.getElementById(this.id+
"_error")?this._showError(a):this._onErrorLoad(a):SMRF.load(["/ui/juic/js/components/sfInlineError.js"],this._onErrorLoad.bind(this,a))},_initError:function(){this._err=new SFInlineError(sfMessageFormat.format(MSGS.COMMON_ERR_DATA_REQUIRED,this._title),"auto")},_appendError:function(){var a=document.getElementById(this.id),b=document.createElement("span");b.setAttribute("id",this.id+"_error");a.parentNode.appendChild(b);this._err.render(this.id+"_error")},_showError:function(a){a&&this._err.setValue(a);
this._err&&this._err.show()},_onErrorLoad:function(a){window.SFInlineError&&(this._initError(),this._appendError(),this._showError(a))},setValue:function(a){this._selectedItem=this._itemProvider.toItem(a);this._selectedItem||!a||this._forceSelection||(this._selectedItem=a);this._valueChanged()},getValue:function(){return this._itemProvider.getValue(this._selectedItem)},getDisplayText:function(){return this._itemProvider.getLabel(this._selectedItem)},getValueObject:function(){return this._selectedItem},
clearValue:function(){this.setValue(null);this.dispatch("itemSelected",{value:this._selectedItem})},setEnabled:function(a){this._enabled=a;this._updateWrapperClassName();if(a=juic.$(this.getReferenceId()))a.disabled=!this._enabled},isEnabled:function(){return this._enabled},_createAccessibilityPopup:function(){this._callout=new SFCalloutPopup({content:this._a11yLabel,width:400,clickOutsideClosesPopup:!0,originOptions:{direction:"top",pointerOffset:350}})},_showAriaPopup:function(){this._callout||
this._createAccessibilityPopup();this._callout.show(this._callOutID)},_hideAriaPopup:function(){this._callout.hide()},setFocus:function(a){if(this.isEnabled()&&!!a!=!!this._focusFlag)if(a)d&&null!==this._a11yLabel&&this._showAriaPopup(),this._focusFlag=a,this._updateWrapperClassName(),this._clearTitle(),this._focusInput(),this._focusChanged();else if(this._stopBlur)this._restoreCaret();else{d&&null!==this._a11yLabel&&this._hideAriaPopup();var b=this;clearTimeout(this._timeoutID);this._timeoutID=setTimeout(function(){b._handleBlur()},
0)}},_handleInputBlur:function(){this.setFocus(!1);this.dispatch("action",{actionCommand:"blur"})},isFocus:function(){return this._focusFlag},isModified:function(){return this._oldValue==this.getValue()?!1:!0},_createItemProvider:function(a){if(a instanceof SFAbstractItemProvider)return a;if(a instanceof Array)return new SFArrayItemProvider(a)},_createListSelect:function(a,b){return new SFComboListSelect(a,b)},_getStyleClass:function(){return this._isV12Plus?"v12plus-field v12plus-rounded-corner v12plus-combobox globalCompositeControlChild":
"rev-field rev-rounded-corner rev-combobox"},_getExtraClasses:function(){return"search-box"},_isToggleRendered:function(){return!0},_getScratchPadClassName:function(){return this._isV12Plus?"v12plus-field v12plus-rounded-corner v12plus-scratch-pad":"rev-field rev-rounded-corner rev-scratch-pad"},_getPopupOffsets:function(){return this._attachConfig?this._attachConfig.popupOffsets?this._attachConfig.popupOffsets:{vertical:0,horizontal:0}:this._isV12Plus?h:c},_getInputStyle:function(){var a={},b=this._getInputWidth();
b&&(a.width=b);return a},getItemProvider:function(){return this._itemProvider},setItemProvider:function(a){this._listSelect.setItemProvider(a);this._itemProvider=a},setPageSize:function(a){this._listSelect.setPageSize(a)},setTitle:function(a){this._title=a;this._updateWrapperClassName();this._valueChanged()},getTitle:function(){return this._title},isLoading:function(){return this._loading},selectFirstItem:function(){},_setLoading:function(a){this._loading=!!a;this._updateWrapperClassName()},_handleBlur:function(){clearTimeout(this._timeoutID);
this._timeoutID=null;this._focusFlag=!1;this._updateInputWidth();this._commitValue();this._focusChanged();this._updateWrapperClassName()},_getWrapperClassName:function(){var a=[];this._wrapperClass&&a.push(this._wrapperClass);this._focusFlag&&a.push("field-focus");this._hasError&&a.push("has-error");this._enabled||a.push("field-disabled");this._selectedItem||!this._title||this.isFocus()||a.push("placeholder-value");this._loading&&a.push("field-loading");this.isModified()&&a.push("dirty-field");var b=
this._getExtraClasses();b&&(b instanceof Array?a=a.concat(b):a.push(b));this._isV12Plus&&a.push("globalRoundedCornersXSmall");return a.join(" ")},_updateWrapperClassName:function(){var a=juic.$(this.id+"wrapper");a&&(a.className=this._getWrapperClassName())},_onItemsError:function(a){this._setLoading(!1);alert(a.message)},_onItemSelected:function(a){this._stopBlur=!1;this._itemSelected=!0;this._commitValue();this._hidePopup();this.dispatch("itemSelected",{value:this._selectedItem})},_updateActiveItem:function(){var a=
juic.$(this.getReferenceId());a&&a.setAttribute("aria-activedescendant",this.getFocusItemId())},getFocusItemId:function(){return this._listSelect.getFocusItemId()},_valueChanged:function(){var a=juic.$(this.getReferenceId());a&&this._updateInputEl(a,this.getInputText());this.validate()},_updateInputEl:function(a,b){a.value=b;SFDom.updateStyle(a,this._getInputStyle());this._updateWrapperClassName()},_preventBlur:function(a){if(this.isFocus())if(this._timeoutID)this._timeoutID=null,clearTimeout(this._timeoutID);
else{SFDOMEvent.getTarget(a)!=juic.$(this.getReferenceId())&&this._storeCaret();this._stopBlur=!0;var b=this;setTimeout(function(){b._stopBlur=!1},50)}},_storeCaret:function(){Util.browserInfo.ios||(this._lastCaret=SFCaretUtil.caret(juic.$(this.getReferenceId())))},_restoreCaret:function(){if(this._lastCaret){var a=this,b=this._lastCaret,d=juic.$(this.getReferenceId());setTimeout(function(){a.isFocus()&&SFCaretUtil.caret(d,b)},0);this._lastCaret=null}},_clickToggle:function(){this.isEnabled()&&(this.isFocus()?
this._focusInput():this.setFocus(!0),this._isPopupShown()||this._showPopup())},_focusChanged:function(){this.dispatch(this.isFocus()?"focus":"blur");this.isFocus()?0==this._minimumFilterSize&&this._showPopup():this._hidePopup()},_createPopup:function(a){this._popup=new SFContextPopup(a,this._getPopupOptions());this._popup.addEventListener("preventBlur",this,"_preventBlur")},_getPopupOptions:function(){return juic.set({offset:this._getPopupOffsets()},this._popupOptions||{})},_createPopupContents:function(){return this._allowResize?
(this._dragResizer=new SFDragResizer(this._listSelect,{dragByResizing:!0}),this._dragResizer.addEventListener("dragResize",this,"_onDragResize"),this._dragResizer):this._listSelect},_onInput:function(a){function b(){this._inputTimeout=!1;var a=this._previousFilterValue||"",b=juic.$(this.getReferenceId()),b=b&&b.value;this.dispatch("input");this._trimQueryValue&&b&&b.trim&&(b=b.trim());b!=a&&((b?b.length:0)<this._minimumFilterSize?this._hidePopup():this._showPopup(b),this._previousFilterValue=b)}if(!this._inputTimeout&&
SFDom.isDisplayed(juic.$(SFDOMEvent.getTarget(a)))){var f=this;this._inputTimeout=!0;setTimeout(function(){b.call(f)},0)}},_resetFilter:function(){this._inputTimeout&&clearTimeout(this._inputTimeoutId);this._listSelect&&this._listSelect.resetFilter&&this._listSelect.resetFilter()},_hidePopup:function(){this._resetFilter();this._previousFilterValue=null;clearInterval(this._intervalId);this._popup&&(this._popup.hide(),this._loading=!1,this.isFocus()&&d&&null!==this._a11yLabel&&this._showAriaPopup());
this._setAriaExpanded("false")},_showPopup:function(a){d&&null!==this._a11yLabel&&this._hideAriaPopup();this._isPopupShown()&&this._hidePopup();this._popup&&this._popup.resetCurrentPosition();(this._previousFilterValue=a)?this._listSelect.setFilter("contains",a):this._listSelect.clearFilter();this._listSelect.isPageAvailable()||this._setLoading(!0)},isDOMAvailable:function(){return!!juic.$(this.getPopupReferenceId())},_onItemsAvailable:function(){if(this.isRegistered()&&this.isDOMAvailable()&&(this.isLoading()&&
this._setLoading(!1),this.isFocus()&&!this._isPopupShown())){this._popup||this._createPopup(this._createPopupContents());this._listSelect.resetDimension();var a={width:"auto",height:"auto"};if(!this._autoHeight||!this._autoWidth){var b=this._listSelect.getPageDimension();if(!this._autoWidth){var d=this._listSelect.isVerticalScrollRequired()?17:0,d=this._requiresResultSpacing?d+10:d,e=this._getMinPopupWidth();a.width=b.width>e-d?b.width+d:e;this._userWidth&&(!a.width||a.width<this._userWidth)&&(a.width=
this._userWidth)}this._autoHeight||(a.height=b.height)}this._listSelect.setDimension(a);this.selectFirstItem();this._popup.show(this.getPopupReferenceId());var c=this,g;clearInterval(this._intervalId);setTimeout(function(){g=SFDom.getXY(c.getReferenceId())},0);this._intervalId=setInterval(function(){var a=SFDom.getXY(c.getReferenceId());g=g||a;a[0]==g[0]&&a[1]==g[1]||c._hidePopup()},500);this._setAriaExpanded("true")}},_getMinPopupWidth:function(){var a=juic.$(this.getPopupReferenceId());return(a?
a.offsetWidth:50)+30},_onDragResize:function(a){this._userWidth=a.dimension.width},_isPopupShown:function(){return this._popup&&this._popup.isShown()},_updateInputWidth:function(){if(!this._fixedWidth){var a=juic.$(this.getReferenceId());a&&(a.style.width=this._getInputWidth())}},_keyDown:function(a){a=a||window.event;var b=SFDOMEvent.getKeyName(a),f=a.altKey,d=this._isPopupShown();switch(b){case "ARROWDOWN":f&&!d&&this._showPopup();break;case "ARROWUP":f&&d&&this._hidePopup();break;case "ESCAPE":var e=
juic.$(this.getReferenceId()),c=e&&e.value;setTimeout(function(){e&&(e.value=c)},0);break;case "RETURN":SFDOMEvent.preventDefault(a)}},_keyUp:function(a){a=a||window.event;var b=SFDOMEvent.getKeyName(a),f;f=this._listSelect;switch(b){case "ESCAPE":this._hidePopup();break;case "ARROWUP":a.altKey||this.moveFocusUp();break;case "ARROWDOWN":a.altKey||this.moveFocusDown();break;case "RETURN":f=f.getFocusItem();this._isPopupShown()?this.selectFocus():this._isToggleRendered()&&this._showPopup();f&&this.dispatch("itemInvoked",
{item:f});break;case "ALPHA":case "NUMERIC":var d=SFDOMEvent.getCharCode(a);if(a.ctrlKey&&a.shiftKey&&49==d){(f=f.getFocusItem())&&this.dispatch("itemDetailsRequested",{item:f});break}case "SPACEBAR":case "OTHER":this._onInput(a);break;case "BACKSPACE":case "DELETE":Util.ieVersion()&&9>=Util.ieVersion()&&this._onInput(a),f=SFDOMEvent.getTarget(a),this._clearValueWhenDelete&&0==f.value.length&&this._removeSelectedItem()}this.dispatch("keyUp",{keyEvent:a,keyName:b})},moveFocusUp:function(){this._listSelect.moveFocusUp()},
moveFocusDown:function(){this._listSelect.moveFocusDown()},selectFocus:function(){Util.browserInfo.ios?this._listSelect.selectOnlyValue():this._listSelect.selectFocus()},getPopupReferenceId:function(){return this._attachConfig?this._attachConfig.displayFieldId:this.getReferenceId()},getInputText:function(){var a=this.getDisplayText();this._selectedItem||!this._title||this.isFocus()||(a=this._title);return a},_commitValue:function(){var a=juic.$(this.getReferenceId());if(a){a=a.value;if(this._itemSelected)a=
this._listSelect.getFocusItem();else if(this._forceSelection)a=!a&&this._allowEmpty?null:this._selectedItem;else{var b=this._itemProvider.getLabel(this._selectedItem);null!=b&&(b=b.replace(/\n/g,""));a==b&&(a=this._selectedItem)}b=this.getValue();this.setValue(a);b!=this.getValue()&&this.dispatch("change",{newValue:this.getValue()});this._itemSelected=!1}},_removeSelectedItem:function(){this.setValue(null);this._itemSelected=!1;this.dispatch("itemRemoved",{value:this._selectedItem})},_clearTitle:function(){var a=
juic.$(this.getReferenceId());a&&!this._selectedItem&&this._title&&(a.value="")},_focusInput:function(){if(this.isFocus()){var a=juic.$(this.getReferenceId());a&&setTimeout(function(){Util.browserInfo.ios?(a.focus(),a.setSelectionRange(0,9999)):a.select()},0)}},_getInputWidth:function(){if(this._fixedWidth){var a=0;this._a11yLabel&&(a=(a=juic.$(this._a11yLabel.id))?a.getOffsetWidth():1);if("number"==typeof this._fixedWidth)return this._fixedWidth-a+"px";if("boolean"==typeof this._fixedWidth)return null;
var b=this._fixedWidth.toString();if(b.indexOf("px")==b.length-2){var d=parseInt(b);if(!isNaN(d))return parseInt(b)-a+"px"}return b}a=this.getInputText();b=this._getScratchPadClassName();a?(g||(d=document.createElement("span"),document.body.appendChild(d),g=document.createElement("a"),d.appendChild(g)),g.parentNode.className=b,g.innerHTML=juic.escapeHTML(a),a=g.offsetWidth,g.innerHTML="",a=Math.min(620,Math.max(50,a+e))+"px"):a="auto";return a},_setAriaExpanded:function(a){var b=juic.$(this.getReferenceId());
b&&b.setAttribute("aria-expanded",a)},_announceItemCountInfo:function(a){if(a&&0<=a.itemCount){var b=juic.$(this.getReferenceId()+"_ariaLiveAnnounce");b&&(b.innerHTML=sfMessageFormat.format(MSGS.COMMON_ComboBox_Aria_Item_Count_Announcement,a.itemCount),setTimeout(function(){b.innerHTML=""},1E3))}},cleanup:function(){this._popup&&this._popup.cleanup();this.unregister()},getDefaultMinimumFilterSize:function(){return 0<=a.indexOf((window.pageHeaderJsonData||{}).userLocale)?1:2}});var g,e=3})();
function SFDropMenuPopup(b,c){this.register();this._init(b,c)}
(function(){function b(){assert(!1,"SFAbstractMenuModel: Do not instantiate")}function c(a){this._menuItems=a}function h(a){this._model=a}var a=(Util.browserInfo.ie&&Util.quirksMode()?"":"globalRoundedCorners ")+"globalMenu",d=Util.browserInfo.css3Support,g={menu:{vertical:"top",horizontal:"left"},origin:{vertical:"top",horizontal:"right"}};juic.extend(SFDropMenuPopup,SFAbstractPositionable,{_init:function(a,b){b=b||{};this._subMenus={};this.setModel(a);this._css=b.css;this._fixPoint=b.fixPoint||
{};this._escapeHTML=b.escapeHTML;this._originId=b.originId;this._animate=null==b.animate?!0:b.animate;this._preventRedisplay=b.preventRedisplay;this._refocusId=b.refocusId},renderHtml:function(b){b.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',this._getClassName(),'"\x3e\x3cdiv id\x3d"',this.id,'wrapper" class\x3d"',a,'"');this._minWidth&&b.push(' style\x3d"min-width:',this._minWidth,'px"');b.push("\x3e");this._renderContent(b);b.push("\x3c/div\x3e\x3c/div\x3e")},_getClassName:function(){return"sfDropMenu"+
(this._css?" "+this._css:"")},setMinWidth:function(a){this._minWidth=a;var b=juic.$(this.id+"wrapper");b&&(b.style.minWidth=a+"px")},_renderContent:function(a){a.push('\x3cul id\x3d"',this.id,'wrapperList" class\x3d"wrapperList" role\x3d"menu" tabindex\x3d"-1"\x3e');if(this._menuItems){var b=this._menuItems.length;this._menuItems.forEach(function(a){(a.header||a.separator)&&b--});for(var d=0,c=0;c<this._menuItems.length;c++)this._menuItems[c].header||this._menuItems[c].separator||d++,this._renderItem(a,
this._menuItems[c],c,b,d)}else a.push('\x3cli class\x3d"',"sfLoadingContainer",'"\x3e\x3cspan\x3e\x26nbsp;\x3c/span\x3e\x3c/li\x3e');a.push("\x3c/ul\x3e")},_renderItem:function(a,b,d,c,g){var f=!1,e=!1;if(b.header)a.push('\x3cli\x3e\x3ch4 id\x3d"',this.id,d,'" class\x3d"',"menuTitle",'"\x3e',this._checkEscape(b.header,b),"\x3c/h4\x3e\x3c/li\x3e");else if(b.separator)a.push('\x3cli\x3e\x3chr id\x3d"',this.id,d,'" class\x3d"',"separator",'" /\x3e\x3c/li\x3e');else{var h=this._checkEscape(b.label||b.name||
b.description,b),k=["menuLink"];b.css&&k.push(b.css);b.subMenu&&k.push("itemWithMenu");(b.sapIcon||b.sfSuppIcon)&&k.push("hasIcon");0==d?k.push("first"):d==this._menuItems.length-1&&k.push("last");a.push('\x3cli role\x3d"none"');b.disabled?k.push("globalDisabledMenuItem"):k.push("globalMenuItem");a.push('\x3e\x3ca tabindex\x3d"-1" role\x3d"menuitem" id\x3d"',this.id,d,'" class\x3d"',k.join(" "),'" href\x3d"');b.disabled||!b.href&&!b.url?a.push("javascript:void(0)"):(e=!0,a.push(b.href||b.url));b.subMenu&&
a.push('" aria-haspopup\x3d"true');!b.disabled&&b.target&&a.push('" target\x3d"',b.target);!b.disabled&&b.actionCommand?(a.push('" onclick\x3d"',this.fireCode("_clickMenuItem",d),"return false"),f=!0):!b.disabled&&b.onclick?(a.push('" onclick\x3d"',this.fireCode("_clickMenuItem",d),b.onclick,";return false"),f=!0):b.disabled||b.subMenu||(a.push('" onclick\x3d"',this.fireCode("hide"),"return ",e),f=!0);(b.altText||b.title)&&a.push('" title\x3d"',this._checkEscape(b.altText||b.title,b));b.disabled||
!b.subMenu||b.actionCommand||e||(a.push('" onclick\x3d"',this.fireCode("_showSubMenu",d),"return false"),f=!0);f||e||a.push('" onclick\x3d"return false');a.push('" aria-setsize\x3d',c);a.push(" aria-posinset\x3d",g);a.push(' aria-disabled\x3d"',b.disabled?"true":"false");b.disabled||a.push('" onmouseover\x3d"',this.fireCode("_onMenuMouseOver",d),'" onmouseout\x3d"',this.fireCode("_onMenuMouseOut",d));a.push('" onfocus\x3d"',this.fireCode("_onItemFocus",d),'"\x3e');b.sapIcon&&a.push('\x3cspan class\x3d"menuIcon sapIcon"\x3e',
b.sapIcon,"\x3c/span\x3e");b.sfSuppIcon&&a.push('\x3cspan class\x3d"menuIcon sfSuppIcon"\x3e',b.sfSuppIcon,"\x3c/span\x3e");a.push(h);b.subMenu&&a.push('\x3cspan class\x3d"menuArrow"\x3e\x3c/span\x3e');a.push("\x3c/a\x3e");a.push("\x3c/li\x3e")}},_checkEscape:function(a,b){return this._escapeHTML&&!1!==b.escapeHTML?juic.escapeHTML(a):a},show:function(a){this._menuItems||this._model.fetchMenuItems();this._originId=a||this._originId;this._popup||(this._popup=this._createPopup());this._popup.show(this._originId);
SFAnimUtil.css3FadeInTransition(this._popup.id,100);(a=juic.$(this._originId))&&a.setAttribute("aria-expanded","true");this._startKeyListener();var b=this,d=null;clearInterval(this._intervalId);this._intervalId=setInterval(function(){var a=SFDom.getXY(b._originId);d=d||a;a[0]==d[0]&&a[1]==d[1]||b.hide()},500)},_createPopup:function(){var a=new SFContextPopup(this,{visibleOverflow:!0,preventRedisplay:this._preventRedisplay,menu:this._fixPoint.menu,origin:this._fixPoint.origin,offset:this._fixPoint.offset});
a.addEventListener("clickedOutsidePopup",this,"hide");a.addEventListener("focusOutside",this,"_onFocusOutside");a.addEventListener("preventBlur",this,"dispatchEvent");return a},isShown:function(){return this._popup&&this._popup.isShown()},hide:function(a){function b(){this._stopKeyListener();this.dispatch("blur");clearInterval(this._intervalId);this.dispatch("hide");this._visibleSubMenu&&this._visibleSubMenu.hide();this._visibleSubMenu=null;this._refocusId&&SFDom.setFocus(this._refocusId,!0);var a=
this;setTimeout(function(){var b=juic.$(a._originId);b&&b.setAttribute("aria-expanded","false")},500)}a instanceof juic.EventTarget.Event&&(a=!1);this._runningAnimation&&this._runningAnimation.stop();a&&d?this._animateMenu(this._currentFixPoint,!0,b):b.call(this)},cleanup:function(){this.setModel(null);this._popup&&this._popup.cleanup(!1);this._error&&this._error.cleanup();for(var a in this._subMenus)this._subMenus[a].cleanup();this._super()},setFocusedItem:function(a){this._focusedItem=a},focus:function(a){var b=
juic.$(this.id+"wrapper");b&&("undefined"===typeof a&&this._focusedItem?(a=juic.$(this.id+this._focusedItem),SFDom.setFocus(a)):(a=SFDom.findNextFocusableElement(a?b.lastChild:b.firstChild,b,!0,a),SFDom.setFocus(a,!0)))},positionFixed:function(a){var b=juic.$(this.id+"wrapper");if(b){var d=juic.$(this.id+"wrapperList");this._fixedCount=this._fixedCount||0;if(3>++this._fixedCount){var c=a.newComponentHeight,e=a.newComponentWidth;if(null!=c||null!=e)c=(c-15||d.offsetHeight)-SFDom.getOffsets(b,"y"),
e=e-15||d.offsetWidth,b.style.width=e+17+"px",d.style.height=Math.max(c,100)+"px",SFDom.addClass(b,"sfDropMenuScrollable"),this.dispatch("changeDimensions")}this._animateMenu(a.positionInfo.fixPoint,!1,this.focus);if(null==this._fixedTimeout){var g=this;this._fixedTimeout=setTimeout(function(){g._fixedCount=0;g._fixedTimeout=null},50)}}},setModel:function(a){this.setFocusedItem(null);this._model&&(this._model.removeEventListener("menuItemsAvailable",this,"_onMenuItemsAvailable"),this._model.removeEventListener("menuItemsError",
this,"_onMenuItemsError"));this._menuItems=null;this._subMenus={};Array.isArray(a)?this._model=new c(a):a instanceof b?this._model=a:a instanceof SFDefaultListModel&&(this._model=new h(a));this._model&&(this._model.addEventListener("menuItemsAvailable",this,"_onMenuItemsAvailable"),this._model.addEventListener("menuItemsError",this,"_onMenuItemsError"))},getMenuId:function(){return this.id},getItemId:function(a){return this.id+a},_animateMenu:function(a,b,c){var f=juic.$(this.id+"wrapper");if(f&&
d&&this._animate){this._currentFixPoint=a;var e=document.createElement("div"),g=a.origin.horizontal!=a.menu.horizontal,h={},l=f.offsetWidth,q=f.offsetHeight,m=null;e.style.width=l+"px";e.style.height=q+"px";e.style.position="relative";e.style.overflow="hidden";f.parentNode.replaceChild(e,f);e.appendChild(f);f.style.position="absolute";g?(m="left"==a.menu.horizontal?"left":"right",b?(f.style[m]="0",h[m]=-l):(f.style[m]="right"==m?-l+"px":-Math.min(100,l)+"px",h[m]=0)):(m="top"==a.menu.vertical?"top":
"bottom",b?(f.style[m]="0",h[m]=-q):(f.style[m]=-q+"px",h[m]=0));this._runningAnimation=SFAnimUtil.animate(f,h,{duration:.2,context:this,complete:function(){this._runningAnimation=null;Util.browserInfo.css3Support&&(f.style.position="",f.style[m]="",e.parentNode.replaceChild(f,e));c&&c.call(this)}})}else c&&c.call(this)},_startKeyListener:function(){SFDOMEvent.addListener(window.document,"keydown",this._onWindowKeyDown,this)},_stopKeyListener:function(){SFDOMEvent.removeListener(window.document,"keydown",
this._onWindowKeyDown,this)},_focusNext:function(a){if(null!=this._focusedItem){var b=juic.$(this.id+"wrapper");if(b){var d=juic.$(this.id+this._focusedItem);(b=SFDom.findNextFocusableElement(a?d.parentNode.previousSibling:d.parentNode.nextSibling,b,!0,a))&&0==b.id.indexOf(this.id)?SFDom.setFocus(b,!0):this.focus(a)}}else this.focus(a);return!1},_onPreventBlur:function(a){this.dispatch("preventBlur");this._popup&&this._popup.preventClose()},_onWindowKeyDown:function(a){var b=SFDOMEvent.getKeyName(a||
window.event);Util.isRTL()&&("ARROWLEFT"===b?b="ARROWRIGHT":"ARROWRIGHT"===b&&(b="ARROWLEFT"));if(a.shiftKey)SFDOMEvent.preventDefault(a);else switch(b){case "ARROWDOWN":case "ARROWUP":this._focusNext("ARROWUP"==b);SFDOMEvent.preventDefault(a);break;case "ARROWLEFT":SFDOMEvent.preventDefault(a);case "TAB":case "ESCAPE":this._popup&&this._popup.isTopOverlay()&&(this.hide(!0),SFDOMEvent.preventDefault(a));break;case "ARROWRIGHT":SFDOMEvent.preventDefault(a),null!=this._focusedItem&&this._menuItems[this._focusedItem].subMenu&&
this._showSubMenu(this._focusedItem)}},_onItemFocus:function(a){this._focusedItem=a},_onFocusOutside:function(a){this.focus(a.start)},_onMenuItemsAvailable:function(a){this._menuItems=a.menuItems;if(a=juic.$(this.id+"wrapper")){var b=createRenderContext();this._renderContent(b);a.innerHTML=b.join("");this.dispatch("changeDimensions")}},_onMenuItemsError:function(a){this._error=new SFSysMsg("error",a.message);this._error.render(this.id)},_onMenuMouseOver:function(a,b){if(Util.isMouseLeaveOrEnter(b,
juic.$(this.id+a))){this._onMenuMouseOut();var d=this;this._timeout=setTimeout(function(){d._showSubMenu(a)},250);SFDOMEvent.getTarget(b).focus()}},_onMenuMouseOut:function(a,b){b&&!Util.isMouseLeaveOrEnter(b,juic.$(this.id+a))||null==this._timeout||clearTimeout(this._timeout)},_onSubMenuAction:function(a){this.hide();this.dispatchEvent(a)},_onSubMenuBlur:function(a){this._visibleSubMenu=null;this._startKeyListener();null!=this._focusedItem?(a=juic.$(this.id+this._focusedItem))&&a.focus():this.focus(!1)},
_showSubMenu:function(a){if(this._menuItems[a].subMenu){var b=this._subMenus[a];if(null==b||this._visibleSubMenu!==b){this._hideSubMenu();b||(b=new SFDropMenuPopup(this._menuItems[a].subMenu,{originId:this.id+a,fixPoint:g}),b.addEventListener("blur",this,"_onSubMenuBlur"),b.addEventListener("action",this,"_onSubMenuAction"),b.addEventListener("preventBlur",this,"_onPreventBlur"),b.addEventListener("hide",this,"_onHideSubMenu"),this._subMenus[a]=b);this._stopKeyListener();b.show();var d=this;setTimeout(function(){d._focusedItem=
a},0);this._visibleSubMenu=b;juic.$(this.id+a).className+=" globalMenuItemFocus"}}else this._hideSubMenu()},_hideSubMenu:function(){this._visibleSubMenu&&this._visibleSubMenu.hide()},_onHideSubMenu:function(a){var b=a.target._originId;a=juic.$(b);if(b&&a){for(b=" "+a.className+" ";-1<b.indexOf(" globalMenuItemFocus ");)b=b.replace(" globalMenuItemFocus "," ");a.className=b.trim();a.setAttribute("aria-expanded","false")}},_clickMenuItem:function(a){this.hide();var b=this._menuItems[a];this.dispatch("action",
{actionCommand:b.actionCommand,menuItem:b,itemIndex:a})},setRefocusId:function(a){this._refocusId=a},getRefocusId:function(){return this._refocusId}});juic.extend(b,juic.EventTarget,{fetchMenuItems:function(){assert(!1,"SFAbstractMenuModel: must implement fetchMenuItems")}});window.SFAbstractMenuModel=b;juic.extend(c,b,{fetchMenuItems:function(){this.dispatch("menuItemsAvailable",{menuItems:this._menuItems})}});juic.extend(h,b,{fetchMenuItems:function(){for(var a=[],b=0;b<this._model.size();b++)a.push(this._model.get(b));
this.dispatch("menuItemsAvailable",{menuItems:a})}})})();function SFDropMenu(b,c){this.register();this._init(b,c)}SFDropMenu.forceExplicitLabelWidth=function(){return Util.quirksMode()||8==Util.ieVersion()};
juic.extend(SFDropMenu,juic.Component,{_init:function(b,c){c=c||{};this._css=c.css;this._hoverCss=c.hoverCss;this._activeCss=c.activeCss;this._content=c.content;this._escapeHTML=c.escapeHTML;this._tag=(this._button=c.button)?"button":"a";this._title=c.title;this._ariaLabel=c.ariaLabel;this._labelWidth=c.labelWidth;this._useTouchEnd=c.useTouchEnd;this._image=c.image;this._stableId=c.stableId;c.showTriangle&&(this._triangleIcon=new SFTriangle({direction:"bottom",inherit:!0}),this.triangleIconId=this._triangleIcon._getDomId());
this._menu=new SFDropMenuPopup(b,{animate:c.animate,preventRedisplay:c.preventRedisplay,fixPoint:c.fixPoint,escapeHTML:c.escapeHTML,css:c.popupCss});this._menu.addEventListener("blur",this,"focus");this._menu.addEventListener("hide",this,"_onPopupHidden");this._menu.addEventListener("action",this,"dispatchEvent");this._menu.addEventListener("preventBlur",this,"dispatchEvent");var h,a=c.activeButton?"globalPrimaryButton":"globalSecondaryButton buttonDefault";switch(c.buttonType){case "command":h="globalRoundedCornersXSmall "+
a+" sfDropMenuCommandButton"}this._buttonStyles=h||""},renderHtml:function(b){b.push("\x3c",this._tag);"a"==this._tag?b.push(' tabindex\x3d"0"'):b.push(' type\x3d"button"');this._stableId&&b.push(' data-help-id\x3d"',this._stableId,'"');this._hoverCss&&b.push(' onmouseover\x3d"',this.fireCode("_onMouseOver"),'" onmouseout\x3d"',this.fireCode("_onMouseOut"),'"');b.push(' aria-haspopup\x3d"true" aria-expanded\x3d"false" aria-controls\x3d"',this._menu.id,'" id\x3d"',this.id,'" role\x3d"button"');this._useTouchEnd&&
(Util.browserInfo.ios||Util.browserInfo.android)?b.push(' ontouchend\x3d"',this.fireCode("_activateMenu"),'"'):(b.push(' onclick\x3d"',this.fireCode("_activateMenu"),'return false;"'),b.push(' onkeypress\x3d"',this.fireCode("_activateMenu"),'"'));b.push(' class\x3d"',this._css," ",this._buttonStyles,'"');this._title&&(b.push(' title\x3d"',juic.escapeHTML(this._title),'"'),this._ariaLabel&&b.push(' aria-label\x3d"',juic.escapeHTML(this._ariaLabel),'"'));b.push("\x3e");b.push(this._image);this._iconFont&&
b.push('\x3cspan class\x3d"legacyFont1Icon"\x3e',this._iconFont,"\x3c/span\x3e");b.push('\x3cspan id\x3d"',this.id,'label" class\x3d"dropDownButtonText"');this._labelWidth&&SFDropMenu.forceExplicitLabelWidth()?b.push(' style\x3d"width:',this._labelWidth,'px"'):this._labelWidth&&b.push(' style\x3d"max-width:"',this._labelWidth,'px"');b.push("\x3e");this._renderContent(b);b.push("\x3c/span\x3e");this._triangleIcon&&this._triangleIcon.renderHtml(b);b.push("\x3c/",this._tag,"\x3e")},_renderContent:function(b){null!=
this._content&&("string"==typeof this._content&&this._escapeHTML?b.push(juic.escapeHTML(this._content)):b.push(this._content))},addDropDownIconFont:function(b){this._iconFont=b},setModel:function(b){this._menu.setModel(b)},setModel:function(b){this._menu.setModel(b)},updateMinWidth:function(){var b=juic.$(this.id);b&&this._menu.setMinWidth(b.offsetWidth)},setContent:function(b){this._content=b;if(b=juic.$(this.id+"label")){var c=juic.createRenderContext();this._renderContent(c);b.innerHTML=c.join("")}},
setTitle:function(b){this._title=b;var c=juic.$(this.id);c&&(c.title=b)},setAriaLabel:function(b){this._ariaLabel=b||" ";var c=juic.$(this.id);c&&c.setAttribute("aria-label",b)},setFocusedItem:function(b){this._menu.setFocusedItem(b)},focus:function(){var b=juic.$(this.id);if(b)try{b.focus()}catch(c){}},blur:function(){var b=juic.$(this.id);b&&b.blur()},setShowDisabled:function(b){this._showDisabled=b},_activateMenu:function(b){if("keypress"===b.type){var c=SFDOMEvent.getKeyName(b);if("SPACEBAR"!=
c&&"RETURN"!=c)return;SFDOMEvent.preventDefault(b)}this._showDisabled||(this._menu.isShown()?this.hide():this.show())},show:function(){this._menu.show(this.id);this._activeCss&&(this._menu.isShown()?(SFDom.addClass(this.id,this._activeCss),juic.$(this.id).setAttribute("aria-expanded","true")):(this.hide(),SFDom.setFocus(this.id,!0)))},hide:function(){this._menu.hide()},getOffsetWidth:function(){var b=juic.$(this.id);return b?b.offsetWidth:0},setLabelWidth:function(b){var c=juic.$(this.id+"label");
c&&(SFDropMenu.forceExplicitLabelWidth()?c.style.width=b+"px":c.style.maxWidth=b+"px")},isPopupShown:function(){return this._menu&&this._menu.isShown()},getPopupMenu:function(){return this._menu},_onPopupHidden:function(){this._activeCss&&(SFDom.removeClass(this.id,this._activeCss),SFDom.removeClass(this.id,this._hoverCss));var b=juic.$(this.id);b&&b.setAttribute("aria-expanded","false")},_onMouseOver:function(b){Util.isMouseLeaveOrEnter(b,juic.$(this.id))&&SFDom.addClass(this.id,this._hoverCss)},
_onMouseOut:function(b){Util.isMouseLeaveOrEnter(b,juic.$(this.id))&&SFDom.removeClass(this.id,this._hoverCss)},cleanup:function(){this._triangleIcon&&this._triangleIcon.cleanup();this._menu.cleanup();this._super()}});function SFMenuDropDown(b,c){this.register();this._init(b,c)}
(function(){function b(a){return a?Array.isArray(a)?a:new h(a):null}function c(a){var b=[];a.css&&b.push(a.css);0==a.isModule&&b.push("nonmodule");return{onclick:a.onclick,actionCommand:a.actionCommand||null,value:a.value||"",label:a.label,url:a.url,title:a.title,target:a.target,css:b.join(" ")}}function h(a){this._model=a}juic.extend(SFMenuDropDown,juic.Component,{_init:function(a,d){d=d||{};assert(a,"[SFMenuDropDown] You need to send in a valid model of menu drop down objects!");this._model=a;this._isLegacy=
!!d.isLegacy;this._isMultiLine=!!d.isMultiLine;this._hasOpacity=!!d.hasOpacity;this._menuTitleFormat=d.menuTitleFormat||MSGS.COMMON_MENU_ALT;this._menuAriaLabel=d.menuAriaLabel;this._updateLabelOnSelect=d.updateLabelOnSelect;var c=[],e=d.cssClassesCore||"globalPlacematNavigationText",f=d.cssClassesAux||"";e&&c.push(e);f&&c.push(f);c=c.join(" ");e=b(this._model);this._menu=new SFDropMenu(e,{popupCss:"menuDefault"+(d.popupCss?" "+d.popupCss:""),css:c,hoverCss:this._hasOpacity?"globalModulePickerHover":
null,activeCss:this._hasOpacity?"globalModulePickerActive":null,button:this._isLegacy?!0:!1,content:this.buttonLabel,title:this.buttonTitle,ariaLabel:this._menuAriaLabel,showTriangle:!1!==d.showTriangle,fixPoint:d.fixPoint,animate:null==d.animate?!1:d.animate,preventRedisplay:null==d.preventRedisplay?!0:d.preventRedisplay,image:d.image});this._menu.triangleIconId&&(this.triangleID=this._menu.triangleIconId);this._menu.addEventListener("action",this,"_handleAction");this._menu.addEventListener("preventBlur",
this,"dispatchEvent");this._updateButtonLabel()},renderHtml:function(a){this._isMultiLine&&a.push('\x3cdiv class\x3d"multiLineLabel" id\x3d"',this.registerAutomationName(this.id+"_multiLineLabel","DropDown-"+this.getButtonText()),'"\x3e');a.push(this._menu);this._isMultiLine&&a.push("\x3c/div\x3e");this._hasOpacity&&a.addAfterRenderListener(this,"_onLoad")},addDropDownIconFont:function(a){this._menu.addDropDownIconFont(a)},cleanup:function(){this._menu.cleanup();this._super()},getButtonText:function(){return this.buttonLabel},
updateButtonText:function(a,b,c){this.buttonLabel=a;this.buttonTitle=b||a;this._menuAriaLabel=c;this._menu.setContent(this.buttonLabel);this._menu.setTitle(this._updateTitleText(this.buttonTitle));this._menu.setAriaLabel(this._menuAriaLabel);this._menu.hide()},blurButton:function(){this._menu.blur()},getOffsetWidth:function(){return this._menu.getOffsetWidth()},getComputedMargins:function(){var a=juic.$(this.id+"_multiLineLabel");return a?SFDom.getMargin(a,"x"):0},adjustTextWidth:function(a){if(this.triangleID){var b=
juic.$(this.triangleID);a-=SFDom.getComputedWidth(b)}b=juic.$(this._menu.id);a-=SFDom.getComputedHorizPadding(b);this._menu.setLabelWidth(a)},setFocusedItem:function(a){this._menu.setFocusedItem(a)},focus:function(){this._menu.focus()},isPopupShown:function(){return this._menu&&this._menu.isPopupShown()},getPopupMenu:function(){return this._menu.getPopupMenu()},setModel:function(a){this._model=a;this._menu&&(a=b(a),this._menu.setModel(a))},show:function(){return this._menu.show()},hide:function(){return this._menu.hide()},
_updateButtonLabel:function(a){if(this._model instanceof SFDefaultSingleSelectModel){a=this._model.getSelectedIndex();if(a=this._model.get(a))this.buttonLabel=a.label,this.buttonTitle=a.title;this._menu.setContent(this.buttonLabel);this._menu.setTitle(this._updateTitleText(this.buttonTitle));this._menu.setAriaLabel(this._menuAriaLabel)}},_updateTitleText:function(a){return sfMessageFormat.format(this._menuTitleFormat,a)},_onLoad:function(){this._menu.updateMinWidth()},_handleAction:function(a){this._updateLabelOnSelect&&
this._model instanceof SFDefaultSingleSelectModel&&(this._model.setSelectedIndex(a.itemIndex),this._updateButtonLabel());this.dispatchEvent(a)}});juic.extend(h,SFAbstractMenuModel,{fetchMenuItems:function(){for(var a=this._model.size(),b=[],g=0;g<a;g++)b.push(c(this._model.get(g)));this.dispatch("menuItemsAvailable",{menuItems:b})}})})();function SFDialogBox(b){this.register();this._init.apply(this,arguments)}
(function(){var b="title content buttons width innerHeight scrollable useNameAnchor ariaLabel".split(" "),c={title:void 0,buttons:void 0,content:void 0,width:300,height:"auto",innerHeight:void 0,scrollable:!1,useNameAnchor:!1,closeDialogOnEsc:!0,showCloseIcon:!1,contentHasForm:!1,cancelActionCommand:void 0,cancelActionData:void 0,preventClose:!1,overlayOpacity:void 0,ownChildren:!0,ariaRole:"dialog",ariaLabel:void 0},h=!1,a={title:["string",juic.Component,null],buttons:[juic.Config.arrayType("*"),
"string",null],content:[juic.Component,"string",null],width:"number",height:["number","auto"],innerHeight:["number","auto","",null],cancelActionCommand:["string",null],overlayOpacity:["number",null],ariaRole:"string",ariaLabel:["string",null]};juic.extend(SFDialogBox,SFRevolutionPanel,{_init:function(d){if(!h){var g=Util.isFioriEnabled();c.closeDialogOnEsc=g;c.showCloseIcon=!g;h=!0}d=juic.Config.convertArguments(arguments,b,c,a);d.baseButtonWrapperClass="sfDialogBoxButtonWrapper";d.type="sfDialogBox";
if(this._responsive=d.responsive){var g=SFDom.getViewportWidth(),e=d.width,f=d.height;this._originalWidth=e;this._originalHeight=f;SFBodyEventDispatcher.addResizeListener(this,"_setWidthAndHeight");500>=g&&(e=g,f=SFDom.getViewportHeight(),d.width=e,d.height=f)}this._super(d);this._responsive||(this._innerHeight=d.innerHeight?d.innerHeight:void 0);this._contentHasForm=d.contentHasForm;this._preventClose=d.preventClose;this._overlayOpacity=d.overlayOpacity;this._ariaRole=this._getAriaRole(d.ariaRole);
this._ariaLabel=d.ariaLabel;this.dialogPanel=this;this.setContent(this._content);this._focusLoop=new SFFocusLoop(this.id+"_dialogBox");this._focusMarkers=this._focusLoop.getMarkers()},_setWidthAndHeight:function(a){a=SFDom.getViewportWidth();500>=a?(this.setWidth(a),this.setHeight(SFDom.getViewportHeight())):(this.setWidth(this._originalWidth),this.setHeight(this._originalHeight))},_renderSection:function(a,b,c){if(this._isSectionRendered(b,c)){var d=this._getSectionClassName(b);a.push('\x3cdiv id\x3d"',
this.id,b,'"');d&&a.push(' class\x3d"',d,'"');SFDom.renderStyle(a,this._getStyle(b));a.push("\x3e");this._renderContent(a,b,c);a.push("\x3c/div\x3e")}},renderHtml:function(a){a.push(this._focusMarkers[0]);a.push('\x3cdiv id\x3d"',this.id,'_dialogBox"\x3e');a.push('\x3cdiv id\x3d"',this.id,'_dialogContent"\x3e');a.push('\x3cdiv role\x3d"',this._ariaRole,'" id\x3d"',this.id,'wrapper" ');this._ariaLabel?a.push('aria-label\x3d"',this._ariaLabel,'"'):a.push('aria-labelledby\x3d"',this.id,'_panelTitle"');
a.push(' class\x3d"dialogBoxWrapper');this.isScrollable()&&a.push(" scrollableDialog");a.push('"\x3e');this._super(a);a.push("\x3c/div\x3e");a.push("\x3c/div\x3e");a.push("\x3c/div\x3e")},cleanup:function(){delete this.dialogPanel;this.isRegistered()&&(this._focusMarkers[0].cleanup(),this._focusMarkers[1].cleanup(),this._super())},showDialog:function(a,b){this.isDialogVisible()||(this._modal=a,this._refocusRef=b,SFOverlayMgr.addEventListener("overlayRendered",this,"_onDialogRendered"),"undefined"==
typeof a&&(a=!0),SFOverlayMgr.showOverlay(this,a,null,null,this._getOverlayOptions()),this._closeDialogOnEsc&&SFOverlayMgr.addEventListener("escKeyPressed",this,"_cancel"))},close:function(){this.isDialogVisible()&&(this._preventClose?this.dispatch("action",{actionCommand:"hideRequest"}):this._hideDialog())},show:function(a){this._dialogHidden=!a;this._updateStyles()},renderContent:function(a){a.push(this._content)},handleButton:function(a){switch(a.actionCommand){case "hide":var b=this;setTimeout(function(){b.close()},
0)}this._super(a)},setContent:function(a){this._content instanceof juic.Component&&this._content.removeEventListener("changeDimensions",this);a instanceof juic.Component&&a.addEventListener("changeDimensions",this,"_handleDialogResized");this._super(a)},isDialogVisible:function(){return!this._dialogHidden&&!!juic.$(this.id)},isShown:function(){return this.isDialogVisible()},setCloseDialogOnEsc:function(a){!!this._closeDialogOnEsc!=!!a&&(this._closeDialogOnEsc=!!a,a&&this.isDialogVisible()&&SFOverlayMgr.addEventListener("escKeyPressed",
this,"_cancel"))},setPreventCloseState:function(a){this._preventClose=a},getPreventCloseState:function(){return this._preventClose},setScrollable:function(a){this._super(a);var b=juic.$(this.id+"wrapper");if(b)SFDom[a?"addClass":"removeClass"](b,"scrollableDialog")},setCancelAction:function(a,b){"object"==typeof a&&(a=a.actionCommand,b=a.data);this._cancelActionData=a?{actionCommand:a,data:b}:null},getCancelAction:function(){return this._cancelActionData},setTitle:function(a){this._super(a);this._setSectionContent("header",
null)},setInnerHeight:function(a){this._innerHeight=a;this._updateStyles("content");this._handleDialogResized()},getInnerHeight:function(){return this._innerHeight||this._getInnerHeight()},setHeader:function(){throw Error("SFDialogBox: setHeader is disabled, use setTitle instead.");},getHeader:function(){throw Error("SFDialogBox: getHeader is disabled, use setTitle instead.");},setAriaRole:function(a){this._ariaRole=this._getAriaRole(a);(a=juic.$(this.id+"wrapper"))&&a.setAttribute(this._ariaRole)},
_getAriaRole:function(a){return"dialog"===a?"dialog":"alertdialog"},_renderContentBody:function(a){this._contentHasForm?(a.push('\x3cform id\x3d"',this.id,'form" onsubmit\x3d"',this.fireCode("_onFormSubmit"),'return false"\x3e'),this.renderContent(a),a.push('\x3cinput type\x3d"image" src\x3d"',IMAGES["/ui/juic/img/_.gif"],'" width\x3d"1" height"1" tabindex\x3d"-1" alt\x3d"" /\x3e\x3c/form\x3e')):this.renderContent(a)},_getInnerHeight:function(){return null!=this._innerHeight?this._innerHeight:this._super()},
_getOverlayOptions:function(){return{dispatchEscKeyPress:this._closeDialogOnEsc,opacity:this._overlayOpacity}},_renderContent:function(a,b){switch(b){case "header":this._renderStandardHeader(a);break;case "content":this._renderContentBody(a);break;case "endMarker":a.push(this._focusMarkers[1]);break;case "helpIcon":this._renderHelpIcon(a);break;case "closeIcon":this._showCloseIcon&&a.push('\x3cbutton id\x3d"',this.id,'closeIcon" class\x3d"closeDialog globalPortletCloseIcon globalIconFont1Support" title\x3d"',
MSGS.COMMON_Close,'"  onclick\x3d"',this.fireCode("_handleClose"),'return false;" style\x3d"display:',this._showCloseIcon?"block":"none",'"\x3e\x3cspan class\x3d"legacyFont1Icon"\x3e\x3c/span\x3e\x3c/button\x3e');break;default:this._super.apply(this,arguments)}},_renderHelpIcon:function(a){},_usesStandardHeader:function(){return!0},_usesStandardHeader:function(){return!0},_getStyle:function(a){var b=this._super(a);null==a&&(b.display=this._dialogHidden?"none":"block");return b},_isSectionRendered:function(a,
b){switch(a){case "header":case "startMarker":case "helpIcon":case "closeIcon":case "endMarker":return!0}return this._super(a,b)},_renderStandardHeaderContent:function(a){this._renderTitle(a)},_getSectionOrder:function(){return[].concat(this._super()).concat(["closeIcon","endMarker"])},_cancel:function(a){this._cancelActionData?this.dispatch("action",this._cancelActionData):this.close()},_hideDialog:function(){this._closeDialogOnEsc&&SFOverlayMgr.removeEventListener("escKeyPressed",this);this.dispatch("action",
{actionCommand:"hide"});this.dispatch("hide");this._handleRefocus()},_handleClose:function(){this.close.apply(this,arguments)},_onFormSubmit:function(){this.dispatch("action",{actionCommand:"submitForm"})},_updateStyles:function(a){this._super(a);a||this._handleDialogResized()},_updateClassName:function(a){this._super(a);this._handleDialogResized()},_setSectionContent:function(){this._super.apply(this,arguments);this._handleDialogResized()},_handleDialogResized:function(){this.isDialogVisible()&&
(this._modal?SFOverlayMgr.centerComponent(this.id):this.dispatch("changeDimensions"))},_onDialogRendered:function(a){a.componentId==this.id&&(SFOverlayMgr.removeEventListener("overlayRendered",this),this.adjustDOM(),this.setFocus())},setFocus:function(a){this._focusLoop.setFocus(a);this._super(a)},getDialogTitleText:function(){return this.getTitle()},setDialogTitle:function(a){this.setTitle(a)},setOuterHeight:function(a){this.setHeight(a)},getOuterHeight:function(){return this.getHeight()},setContentHeight:function(a){this.setInnerHeight(a);
this._handleDialogResized()},setNewButtons:function(a){this.getButtonLayout().setModel(a)},disableButtons:function(){this.getButtonLayout().setButtonsEnabled(!1)},enableButtons:function(){this.getButtonLayout().setButtonsEnabled(!0)},disableButton:function(a){this.getButtonLayout().setButtonEnabled(a,!1)},enableButton:function(a){this.getButtonLayout().setButtonEnabled(a,!0)},isButtonEnabled:function(a){return(a=this.getButtonModel().get(a))&&a.enabled},setButtonLabel:function(a,b){this.getButtonLayout().setButtonLabel(a,
b)},setButtonActionCommand:function(a,b){this.getButtonLayout().setButtonActionCommand(a,b)},setButtonVisible:function(a,b){this.getButtonLayout().setButtonVisible(a,b)},setInnerWidth:function(a){this.setWidth(a)},getInnerWidth:function(){return this.getWidth()}})})();function SFDialogBoxCloseButton(b,c,h,a,d,g){this._super(b,c,h,a);this._superId=d;this._display=g}
juic.extend(SFDialogBoxCloseButton,SFSimpleLink,{_renderLinkContent:function(b){b.push('\x3cbutton id\x3d"',this._superId,'dialogCloseIcon" type\x3d"button" class\x3d"closeDialog globalPortletCloseIcon globalIconFont1Support" title\x3d"',MSGS.COMMON_Close,'"');b.push(' onclick\x3d"',this.fireCode("_click"),';return false;"','onmouseover\x3d"',this.fireCode("_mouseover"),';return false;" ','onmouseout\x3d"',this.fireCode("_mouseout"),';return false;" ');b.push('style\x3d"',this._display,'"');b.push('\x3e\x3cspan class\x3d"legacyFont1Icon"\x3e\x3c/span\x3e\x3c/button\x3e')}});
(function(){function b(a,b,c){this._message=a;this._value=null==b?"":b;this._required=c;this.register()}function c(a,b){a=a?set({},a):{};return set(a,b)}function h(a,b,c){c=c||{};var d=c.context||window;a="function"==typeof c[a]?c[a]:c.callback;"function"==typeof a&&(Array.isArray(b)||(b=null==b?[]:[b]),a.apply(d,b))}function a(b){if(Array.isArray(b)){for(var c=[],f=0;f<b.length;f++)c.push(d(b[f]));return c}return"string"==typeof b&&e[b]?a(e[b]):[d(b)]}function d(a){a=a||SFMessageBox.OK;switch(typeof a){case "string":return g[a]?
set({},g[a]):{label:a,active:!1,enabled:!0,eventName:a};case "object":return{label:a.label,active:!!a.active,enabled:null==a.enabled?!0:a.enabled,eventName:a.actionCommand||a.eventName||a.command};default:assert(!1,"[SFMessageBox] Invalid button: "+a)}}window.SFMessageBox={OK:"ok",SAVE:"save",CANCEL:"cancel",OK_CANCEL:"okCancel",SAVE_CANCEL:"saveCancel",CLOSE:"close"};var g={};g[SFMessageBox.OK]={label:MSGS.COMMON_Ok,active:!0,enabled:!0,eventName:SFMessageBox.OK};g[SFMessageBox.SAVE]={label:MSGS.COMMON_Save,
active:!0,enabled:!0,eventName:SFMessageBox.SAVE};g[SFMessageBox.CANCEL]={label:MSGS.COMMON_Cancel,active:!1,enabled:!0,eventName:"cancel"};var e={};e[SFMessageBox.OK]=[SFMessageBox.OK];e[SFMessageBox.OK_CANCEL]=[SFMessageBox.CANCEL,SFMessageBox.OK];e[SFMessageBox.SAVE_CANCEL]=[SFMessageBox.CANCEL,SFMessageBox.SAVE];set(SFMessageBox,{alert:function(a,b){return this.show(c(b,{buttons:SFMessageBox.OK,message:a,callback:function(a){h(a,null,b)}}))},confirm:function(a,b){return this.show(c(b,{buttons:"okCancel",
message:a,callback:function(a){h(a,a==SFMessageBox.OK,b)}}))},prompt:function(d,e,g){var f=g&&g.required,k=new b(d,e,f);e=a(f?SFMessageBox.OK:"okCancel");f&&(e[0].enabled=!1);d=this.show(c(g,{buttons:e,message:k,showClose:f?!1:g.showClose,callback:function(a){var b=k.getValue();if(a==SFMessageBox.CANCEL||a==SFMessageBox.CLOSE)b=null;h(a,b,g)}}));g.required&&k.addEventListener("change",{handleEvent:function(a){d.setButtonEnabled(SFMessageBox.OK,!!k.getValue())}});return d},show:function(b){b=b||{};
var c=!0,d=a(b.buttons),e=b.content||b.message,f=null;"string"==typeof e&&b.messageType&&(f=new SFSysMsg(b.messageType,e,b.detail,!1));var g=new SFDialogBox({title:b.title||document.title,content:f||e,buttons:d,width:b.width,innerHeight:b.height,scrollable:b.scrollable,escapeHTML:b.escapeHTML,useNameAnchor:b.useNameAnchor}),p=set(new juic.EventTarget,{setButtonEnabled:function(a,b){for(var c=0;c<d.length;c++)if(d[c].eventName==a)g[b?"enableButton":"disableButton"](c)},close:function(){try{c&&h(SFMessageBox.CLOSE,
SFMessageBox.CLOSE,b)}finally{g.close(),g.cleanup()}}});g.addEventListener("action",{handleEvent:function(a){a=a.actionCommand;switch(a){case "hide":if(c)try{h(SFMessageBox.CLOSE,SFMessageBox.CLOSE,b)}finally{setTimeout(function(){g.cleanup()},1)}break;default:c=!1;try{h(a,a,b)}finally{p.close()}}p.dispatch("action",{actionCommand:a})}});g.showDialog(b.isModal,b.targetId);!1===b.showClose&&g.setShowCloseIcon(!1);return p}});juic.extend(b,juic.Component,{renderHtml:function(a){a.push('\x3cdiv class\x3d"promptContent"\x3e\x3cp\x3e',
this._message,'\x3c/p\x3e\x3cp\x3e\x3cinput id\x3d"',this.id,'value" type\x3d"text" value\x3d"',juic.escapeHTML(this._value),'" style\x3d"width:100%"');this._required&&a.push(' onkeyup\x3d"',this.fireCode("_onChange"),'"');a.push("\x3e\x3c/p\x3e\x3c/div\x3e")},_onChange:function(){this._value=juic.$(this.id+"value").value;this.dispatch("change")},getValue:function(){return this._value}})})();