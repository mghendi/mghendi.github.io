function SFAbstractDragProxy(){juic.assert(this.constructor!==SFAbstractDragProxy,"[SFAbstractDragProxy] No implementation available for SFAbstractDragProxy. You must subclass it.")}
SFAbstractDragProxy.prototype=function(){function h(){b||(b=document.createElement("div"),document.body.firstChild?document.body.insertBefore(b,document.body.firstChild):document.body.appendChild(b),b.onselectstart=function(){return!1},b.unselectable="on",b.style.display="none",b.style.position="absolute",b.style.zIndex="100000");return b}var b=null;return juic.set(new juic.Component,{setDragOptions:function(a){this._dragOptions=a&&a.dragOptions||{useShim:!0,shimCursor:"move"};this._dragRegion=a&&
a.dragRegion;this._dragClassName=a&&a.dragClassName;this._verticalOnly=a&&a.verticalOnly;this._horizontalOnly=a&&a.horizontalOnly&&!a.verticalOnly;this._autoScroller=a&&a.autoScroller;this._animateDrop=a&&a.animateDrop;this._dragDisabled=a&&a.dragDisabled},setAutoScroller:function(a){this._autoScroller=a;this._autoScroller.addEventListener("autoScroll",{handleEvent:function(){SFDragDropMgr.refreshCache()}})},renderProxyHtml:function(a){juic.assert(!1,"[SFAbstractDragProxy] Child must implement renderProxyHtml")},
beforeDragEvent:function(a){},afterDragEvent:function(a){},handleDragEvent:function(a){if(!this.beforeDragEvent(a)){switch(a.type){case "dragStart":this._updateDragEl();break;case "drag":this._positionDragEl(a.origin,a.point);this._autoScroller&&this._autoScroller.autoScroll(this._getDragRegion(a.point));break;case "dragEnd":this._animateDrop?this._animateDragEl():this.hideDragEl(),this._autoScroller&&this._autoScroller.stopScrolling()}this.afterDragEvent(a)}},handleMouseDown:function(a){this.handleDragStart(a)},
handleDragStart:function(a){this._dragDisabled||(a=a||window.event,SFDragDropMgr.handleDragStart(a,this,this._dragOptions),SFDOMEvent.stopEvent(a,!0))},getDragEl:function(){return h()},getEl:function(){return juic.$(this.id)},showDragEl:function(){this.getEl().style.visibility="hidden";this.getDragEl().style.display=""},hideDragEl:function(){this.getDragEl()&&(this.getDragEl().style.display="none");this.getEl()&&(this.getEl().style.visibility="")},setDragRegion:function(a){this._dragRegion=a},setDragDisabled:function(a){this._dragDisabled=
a},_getDragRegion:function(a){return SFDom.getRegion(this.getDragEl())},_updateDragEl:function(){var a=this.getEl(),a=SFDom.getXY(a);this._originPosition={x:a[0],y:a[1]};a=juic.createRenderContext();this.renderProxyHtml(a);var d=this.getDragEl();d.className="sfDragProxy"+(this._dragClassName?" "+this._dragClassName:"");d.style.top=this._originPosition.y+"px";d.style.left=this._originPosition.x+"px";a.renderInto(d);this.showDragEl()},_positionDragEl:function(a,d){var b=this.getDragEl(),e=d={x:this._originPosition.x-
a.x+d.x,y:this._originPosition.y-a.y+d.y},c=this._dragRegion;if(c){var f=b.offsetWidth,g=b.offsetHieght;null!=c.right&&(f=e.x+f,f>c.right&&(e.x-=f-c.right));null!=c.bottom&&(g=e.y+g,g>c.bottom&&(e.y-=g-c.bottom));null!=c.left&&(e.x=Math.max(e.x,c.left));null!=c.top&&(e.y=Math.max(e.y,c.top))}this._verticalOnly||(b.style.left=d.x+"px");this._horizontalOnly||(b.style.top=d.y+"px")},_animateDragEl:function(){var a=this.getEl(),b=this.getDragEl(),a=SFDom.getXY(a);SFAnimUtil.animate(b,{top:a[1],left:a[0]},
{duration:.3,easing:"easeOut",context:this,complete:function(){this.hideDragEl()}})}})}();