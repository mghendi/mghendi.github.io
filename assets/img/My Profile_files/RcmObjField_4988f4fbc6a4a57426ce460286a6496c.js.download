function RcmObjField(a){this.register();this.init(a)}
RcmObjField.prototype=function(){return set(new Component,{init:function(a){this._ISO8601Dateformatter=new DateFormat(ComponentConsts.ISO8601DATEFORMAT);this._COMMONDateFormat=new DateFormat(MSGS.COMMON_DateFormat);this._fieldMeta=a.fieldMeta;this._fieldData=a.fieldData;this._fieldCriteriaMgr=a.fieldCriteriaMgr;this._isGenericObj=a.isGenericObject;this._isFoundationObj=a.isFoundationObject;this._isRequired=a.isRequired;this._readOnly=a.readOnly;this._accessibleText=a.accessibleText;this._effectiveStartDate=
a.effectiveStartDate;this._errorMessage=a.errorMessage;this._previousValue={};this._applyTC=null!=a.applyTC||void 0!=a.applyTC?a.applyTC:!0;this._displayQuickCard=a.displayQuickCard||void 0!=a.displayQuickCard?a.displayQuickCard:!0;this._hideQCForSelectedPool=!1;this._isEditableBasedOnFCConfig=a.isEditableBasedOnFCConfig;this._isViewable=void 0!=a.isViewable&&null!=a.isViewable?a.isViewable:!0;if(void 0==this._isEditableBasedOnFCConfig||null==this._isEditableBasedOnFCConfig)this._isEditableBasedOnFCConfig=
!0;this._fieldLabel=a.fieldLabel;this._isGenericObj?this._fieldData&&this._fieldData.primaryFieldData&&(this._previousValue=this._fieldData.primaryFieldData.value,this._displayQuickCard&&(this._hideQCForSelectedPool="pool"==this._fieldData.id&&"hidden_pool"==this._fieldData.primaryFieldData.defaultValue.code)):this._isFoundationObj&&this._fieldData&&this._fieldData.value&&(this._previousValue=this._fieldData.value);this._initializeComponent();this._registerInFieldCriteriaMgr(this._fieldMeta.id,this)},
isGenericObject:function(){return this._isGenericObj},setEffectiveStartDate:function(a){this._effectiveStartDate=a},setErrorMessage:function(a){a&&""!=a&&this._objField&&this._objField.setErrorMsg(a)},_initializeComponent:function(){this._isViewable?(this._fieldMeta.writable=this._readOnly?!1:!0,this._isGenericObj?(this._fieldMeta.primaryFieldMeta.applyTC=this._applyTC,this._objField=this._displayQuickCard?new ECTFieldWithCustomContext(this._fieldData,this._fieldMeta):new RcmFieldwithoutContext(this._fieldData,
this._fieldMeta),this._isRequired&&!this._readOnly&&this._objField.bindValidators({required:!0,label:this._fieldMeta.primaryFieldMeta.label})):this._isFoundationObj&&(void 0!=this._fieldData&&void 0!=this._fieldData.defaultValue&&null!=this._fieldData.defaultValue.primaryDisplayText&&(this._fieldData.primaryDisplayText=this._fieldData.defaultValue.primaryDisplayText),this._objField=new ECTFoundationAutoComplete(this._fieldData,this._fieldMeta),this._isRequired&&!this._readOnly&&this._objField.bindValidators({required:!0,
label:this._fieldMeta.label})),this._errorMessage&&""!=this._errorMessage&&this.setErrorMessage(this._errorMessage),this._objField.addEventListener(ECTConstants.EVENT_CHANGE,this,"_onGOFOChangeHandler"),this._objField.addEventListener(ECTConstants.EVENT_ACTION,this,"_handleAction")):this._objField=this._getEmptyField(this._fieldLabel)},_handleAction:function(a){switch(a.actionCommand){case ECTFieldWithContext.EVENT_CONTEXT_ACTION:this._showQuickCard(a);break;case ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS:this._getContextualFieldValue(a)}},
_getEmptyField:function(a){var c=new RCMEmptyField(a);new RCMFormLabel(a,c.id);return c},getDisplayValueForObj:function(){var a="";this._isGenericObj?this._fieldData&&this._fieldData.primaryFieldData&&this._fieldData.primaryFieldData.defaultValue&&null!=this._fieldData.primaryFieldData.defaultValue.primaryDisplayText&&(a=this._fieldData.primaryFieldData.defaultValue.primaryDisplayText):this._isFoundationObj&&this._fieldData&&this._fieldData.defaultValue&&null!=this._fieldData.defaultValue.primaryDisplayText&&
(a=this._fieldData.defaultValue.primaryDisplayText);return a},getFormattedDate:function(a){a=void 0!=a&&null!=a&&""!=a&&"NaN-aN-aN"!=a?this._COMMONDateFormat.parse(a):new Date;return this._ISO8601Dateformatter.format(a)},getObjFieldVal:function(){if(!this._objField)return null;if(this._isGenericObj)return this._objField.getPrimaryField();if(this._isFoundationObj)return this._objField},_registerInFieldCriteriaMgr:function(a,c){this._fieldCriteriaMgr.registerField(a,c)},renderHtml:function(a){a.push('\x3cspan class\x3d"',
this._hideQCForSelectedPool?"rcmObjField hiddenTalentPool":"rcmObjField",'" id \x3d"rcmObjField_',this.id,'"\x3e');this._objField.renderHtml(a);a.push("\x3c/span\x3e")},_onGOFOChangeHandler:function(a){var c=this.getObjFieldVal();c&&c.getValue()!=this._previousValue&&!this._isEditableBasedOnFCConfig?(a=sfMessageFormat.format(MSGS.RCM_FIELD_CRITERIA_ERROR_MESSAGE,this._fieldLabel),(new RCMDialog("error",a,MSGS.COMMON_ALERT,"action")).show(),c.setValue(c.getPreviousValue())):(c&&c.getValue()!=this._previousValue&&
(this._clearDependentFields(c),this._hideQCForSelectedPool&&(this._showQCIcon(),this._hideQCForSelectedPool=!1)),a?this.dispatchEvent(a):this.dispatch(ECTConstants.EVENT_CHANGE,{metaId:this._fieldMeta.id,value:c.getValue()}),this._previousValue=c.getValue())},_showQCIcon:function(){SFDom.removeClass(juic.$("rcmObjField_"+this.id),"hiddenTalentPool")},_showQuickCard:function(a){var c=new MDFQuickCardController;if(a.value){var b;this._effectiveStartDate&&null!=this._effectiveStartDate&&""!=this._effectiveStartDate&&
(b=this.getFormattedDate(this._effectiveStartDate),c.showQuickCard(a.objectType,{internalCode:a.value,parentStartDate:b,action:MDFController.ACTION_VIEW,defaultScreen:a.defaultScreen?a.defaultScreen:null}))}else a.permission.create&&c.showQuickCard(a.objectType,{action:MDFController.ACTION_CREATE,defaultScreen:a.defaultScreen?a.defaultScreen:null});c.addEventListener(ECTConstants.EVENT_ACTION,this,"_cleanupQuickCard");this.dispatchEvent(a)},_cleanupQuickCard:function(a){a.target.cleanup();this.dispatchEvent(a)},
_getContextualFieldValue:function(a){if(!a.actionCommand!==ECTConstants.EVENT_GET_CONTEXTUAL_SEARCH_FIELDS||a.fields){a=a.searchElement||a.target;for(var c={},b,h=a._contextualSearchFieldsMap,d=a._contextualSearchFields,e=0;void 0!=d&&e<d.length;e++){var f=null,k=!1;this._getFieldByFieldId(d[e])?b=this._getFieldByFieldId(d[e]):"#effectiveStartDate"==d[e]||"start-date"==d[e]?(k=!0,b=null,f=this._effectiveStartDate&&null!=this._effectiveStartDate&&"null"!=this._effectiveStartDate?this.getFormattedDate(this._effectiveStartDate):
""):b=null;if(b&&b._readOnly)f=b._previousValue,""==b.getDisplayValueForObj()&&(f="-1");else if(b&&b.isGenericObject()){var g=this._getFieldByFieldId(d[e]);g&&g instanceof RCMObjMultiSelect?(b=b.getAllSelectedValues(),null!=b&&(f=b.join(","))):(g=g._objField)&&g instanceof ECTFieldWithCustomContext&&(f=g.getPrimaryField().getValue())}else b&&b._isFoundationObj?(g=this._getFieldByFieldId(d[e])._objField)&&g instanceof ECTFoundationAutoComplete&&(f=g.getValue()):b&&"function"===typeof b.isFoundationObject&&
b.isFoundationObject()?(g=this._getFieldByFieldId(d[e]))&&g instanceof RCMObjMultiSelect&&(b=b.getAllSelectedValues(),null!=b&&(f=b.join(","))):"positionIds"==d[e]&&(f=h[d[e]].defaultValue);k||null!=f&&""!=f||(f="-1");c[h[d[e]].idToUse]=f}a.setContextualSearchInfo&&c&&a.setContextualSearchInfo(c)}},_getFieldByFieldId:function(a){return this._fieldCriteriaMgr.getFieldByFieldId(a)},getValue:function(){return this._objField.getValue()},setValue:function(a){this._objField.setValue(a)},_clearDependentFields:function(a){for(var c=
0;c<a._dependentFields.length;){var b=this._getFieldByFieldId(a._dependentFields[c]);b&&void 0==b._isViewable&&(b._isViewable=!0);b&&!b._readOnly&&b._isViewable&&(b instanceof RCMObjMultiSelect?b.clear():b.clearMe());c++}},clearMe:function(){var a=this.getObjFieldVal();""!=a.getValue()&&(a.setValue({}),this.reRender());this._onGOFOChangeHandler()},checkForErrors:function(){return this._objField.checkForErrors()},reRender:function(){var a=juic.createRenderContext();this.renderHtml(a);juic.$("rcmObjField_"+
this.id).innerHTML=a.join("")},updateValueFromRule:function(a,c,b,h){this._fieldData.primaryFieldData&&this._fieldData.primaryFieldData.defaultValue&&this._fieldData.contextData&&this._fieldData.contextData.contextInfo&&(this._fieldData.primaryFieldData.defaultValue.code=c,this._fieldData.primaryFieldData.defaultValue.primaryDisplayText=a,this._fieldData.primaryFieldData.value=h,this._fieldData.contextData.contextInfo.internalCode=b)}})}();
function RcmObjFieldCriteriaMgr(){this.register();this._fieldMap={}}RcmObjFieldCriteriaMgr.prototype=function(){return set(new Component,{registerField:function(a,c){this._fieldMap[a]=c},getFieldByFieldId:function(a){return this._fieldMap[a]},validateObjFields:function(){return!1},getFields:function(){return this._fieldMap}})}();function RcmFieldwithoutContext(a,c){this._super(a,c)}(function(){juic.extend(RcmFieldwithoutContext,ECTFieldWithCustomContext,{_hasContext:function(){return!1}})})();