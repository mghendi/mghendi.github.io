function Multiplicable(a,b,d,c){this.register();this._inputSize=30;this._maxDisplayed=5;this._linkItems=[];this._originalLinks=[];this._componentType=b?b:"userTags";this._url="multiplicable"==this._componentType?"/xi/ui/pages/empfile/liveprofile.xhtml?selected_user\x3d":"/sf/directory?selectedTag\x3d";c&&(this._writable=0==c.writable?c.writable:!0,this._defaultValue=c.defaultValue?c.defaultValue:"",this._valueDelim=c.valueDelim?c.valueDelim:", ",this._defaultValueDelim=c.defaultValueDelim?c.defaultValueDelim:
", ",this._inputSize=c.inputSize?c.inputSize:30,this._maxDisplayed=c.maxDisplayed?c.maxDisplayed:5,this._userNameHidden=c.userNameHidden?c.userNameHidden:!1,this._usePhoto=c.usePhoto?c.usePhoto:!1,this._label=c.label?c.label:"");a&&(this.setValue(a),this.setDefaultValue(this._defaultValue))}
Multiplicable.prototype=function(){return set(new ComponentLegacy,{setValue:function(a){this._value=a;""==this._value&&this.clear();this._linkItems=[];if(this._value){this._linkItems=[];a=this._value.split(this._valueDelim);for(var b=0;b<a.length;b++)this._linkItems[b]=new LinkItem(a[b],this._url,{writable:this._writable,defaultValue:"",readOnlyClass:this._readOnlyClass}),this._linkItems[b].addEventListener("change",this);this._originalLinks=this._linkItems.slice(0)}},clear:function(){for(var a=0;a<
this._linkItems.length;a++)this._linkItems[a].unregister();this._linkItems=[];$(this.id+"_innerCont")&&($(this.id+"_innerCont").innerHTML="",this.cancel())},reset:function(){this._linkItems=[];this._linkItems=this._originalLinks.slice(0);for(var a=0;a<this._linkItems.length;a++)this._linkItems[a]._deleted=!1,this._linkItems[a]._modified=!1;a=[];this._renderLinks(a);var b=$(this.id+"_innerCont");b&&(b.innerHTML=a.join(""));this.cancel()},render:function(a){var b=[];this.renderHtml(b);("string"==typeof a?
document.getElementById(a):a).innerHTML=b.join("")},getValue:function(){var a="";if(0<this._linkItems.length)for(this._value="",index=0;index<this._linkItems.length;index++){var b=this._linkItems[index].getValue();this._linkItems[index].isDeleted()||""==b.trim()||(this._value=this._value+a+b,a=this._valueDelim)}return this._value},handleEvent:function(a){assert("change"==a.type,"Event is not of type 'change' (Mutiplicable)!");this.setModified(!0)},setDefaultValue:function(a){if(this._defaultValue=
a){a=this._defaultValue.split(this._defaultValueDelim);for(var b=0;b<a.length;b++)this._linkItems[b].setDefaultValue(a[b])}},getUserDisplayValue:function(){var a="";if(0<this._linkItems.length)for(this._defaultValue="",index=0;index<this._linkItems.length;index++){var b=this._linkItems[index].getDefaultValue();this._linkItems[index].isDeleted()||""==b.trim()||(this._defaultValue=this._defaultValue+a+b,a=this._defaultValueDelim)}return this._defaultValue},_renderLinks:function(a){for(var b=0;b<this._linkItems.length;b++)a.push("\x3cspan class\x3d'floatleft' \x3e"),
this._linkItems[b].renderHtml(a),b<this._linkItems.length-1&&a.push("\x3cspan style\x3d'padding:0 8px 0 0;'\x3e,\x3c/span\x3e"),a.push("\x3c/span\x3e")},renderHtml:function(a){a.push("\x3cdiv id\x3d'"+this.id+"_outer'\x3e");this._linkItems&&(a.push("\x3cspan id\x3d'"+this.id+"_innerCont'\x3e"),this._renderLinks(a),a.push("\x3c/span\x3e"));this._writable&&(a.push("\x3cdiv  id\x3d'"+this.id+"_addDiv' style\x3d'margin-top:10px;display:none;clear:both;'\x3e\x3cspan class\x3d'autocompspan' style\x3d'z-index:998;'\x3e\x3cinput type\x3d'text' id\x3d'"+
this.id+"_input' name\x3d'"+this.id+"_input' class\x3d'autocompinput' style\x3d'z-index:998; display:block' size\x3d'"+this._inputSize+"' onfocus\x3d '"+this.fireCode("focus")+";return false;' onkeyup\x3d'"+this.fireCode("keyup")+";return false;' value\x3d'"+Util.escapeHTML(this._userDisplayValue)+"'/\x3e\x3c/span\x3e\x3cinput type\x3d'hidden' value\x3d'"+this.value+"' id\x3d'"+this.id+"_hidden' name\x3d'"+this.id+"_hidden'/\x3e\x3cdiv style\x3d'margin-top:5px;'\x3e\x3cspan id\x3d'"+this.id+"_done' style\x3d'display:none;' class\x3d'aquabtn sml active'\x3e\x3cspan  onclick\x3d'"+
this.fireCode("done")+";return false;' \x3e\x3cbutton\x3e"+MSGS.COMMON_Done+"\x3c/button\x3e\x3c/span\x3e \x3c/span\x3e\x3cspan class\x3d'aquabtn sml'\x3e\x3cspan id\x3d'"+this.id+"_cancel' onclick\x3d'"+this.fireCode("cancel")+";return false;' \x3e\x3cbutton\x3e"+MSGS.COMMON_Cancel+"\x3c/button\x3e\x3c/span\x3e \x3c/span\x3e\x3c/div\x3e\x3cbr/\x3e\x3c/div\x3e"),0<this._linkItems.length&&a.push("\x3cdiv style\x3d'margin-top:10px;clear:both;' \x3e\x3c/div\x3e"),a.push("\x3csmall\x3e\x3ca href\x3d'javascript:void(0)' id\x3d'"+
this.id+"_add' onclick\x3d'"+this.fireCode("add")+";return false;'\x3e"+MSGS.COMMON_Add+"\x3c/a\x3e\x3c/small\x3e\x3cdiv role\x3d'alert' id\x3d'"+this.id+"_error' style\x3d'display:none; color: rgb(255, 0, 0); float:left;margin-top:5px;'\x3e\x3c/div\x3e"));a.push("\x3c/div\x3e");this._autoCompleteFindDataList=this._autoCompleteFindUser=null},add:function(){$(this.id+"_addDiv").style.display="";$(this.id+"_add").style.display="none";errorDiv=$(this.id+"_error");errorDiv.style.display="none"},validate:function(a){var b=
$(this.id+"_error");b.innerHTML=a;b.style.display=""},displayErrorMessage:function(a){var b=$(this.id+"_error");b.innerHTML=a;b.style.display=""},hideErrorMessage:function(){$(this.id+"_error").style.display="none"},isAddtionValid:function(a){valid=!0;if(a&&""!=a.trim())for(index=0;index<this._linkItems.length;index++){var b=this._linkItems[index].getValue();if(a.trim()==b.trim()){error=$(this.id+"_error");error.innerHTML="multiplicable"==this._componentType?this._label?this.appendErrorIcon(sfMessageFormat.format(MSGS.EMPFILE_SCORECARD_Duplicate_Multiplicable,
this._label)):this.appendErrorIcon(MSGS.EMPFILE_SCORECARD_Duplicate_Matrix_Mgr):this.appendErrorIcon(MSGS.EMPFILE_SCORECARD_Duplicate_Tag);error.style.display="block";valid=!1;break}}else error=$(this.id+"_error"),error.innerHTML=this.appendErrorIcon(MSGS.EMPFILE_SCORECARD_Err_Valid_Value),error.style.display="block",valid=!1;return valid},done:function(){var a="multiplicable"==this._componentType?$(this.id+"_hidden").value:$(this.id+"_input").value,b=$(this.id+"_input").value;this.isAddtionValid(a)&&
(a=new LinkItem(a,this._url,{writable:this._writable,defaultValue:b,added:!0}),this._linkItems.push(a),a.addEventListener("change",this),this.setModified(!0),a=$(this.id+"_addDiv"),this.render($(this.id+"_outer").parentNode),a.style.display="none",$(this.id+"_add").style.display="")},cancel:function(){$(this.id+"_hidden")&&$(this.id+"_input")&&($(this.id+"_hidden").value="",$(this.id+"_input").value="",$(this.id+"_addDiv").style.display="none",$(this.id+"_add").style.display="",$(this.id+"_done").style.display=
"none",errorDiv=$(this.id+"_error"),errorDiv.style.display="none")},focus:function(){"multiplicable"==this._componentType?this.focusMultiplicable():this.focusUserTags();$(this.id+"_input").value?$(this.id+"_done").style.display="":$(this.id+"_done").style.display="none"},keyup:function(){$(this.id+"_input").value?$(this.id+"_done").style.display="":$(this.id+"_done").style.display="none"},focusUserTags:function(){if(this._writable){var a=this.id+"_input";this._forceSelection=!1;this._findType="userTags";
this._autoCompleteFindDataList||(this._autoCompleteFindDataList=new AutoCompleteDataList({textElementId:a,maxResultsDisplayed:this._maxDisplayed,minQueryLength:Util.getMinSearchKeyLengthBasedOnLocale(),delimChar:this._delimChar?this._delimChar:"",findtype:this._findType,enableAutoCompFind:!0,forceSelection:this._forceSelection,v10:!1,errMsg:MSGS.COMMON_AUTOCOMP_FINDTAGS_ERR}));a=$(this.id+"_input");a.focus();if(this._autoCompleteFindDataList){var b=this._autoCompleteFindDataList.widget;b._onTextboxFocus&&
b._onTextboxFocus(null,b)}a.select()}},focusMultiplicable:function(){if(this._writable){this._autoCompleteFindUser||this._initAutoCompleteFindUser();var a=$(this.id+"_input");a.focus();this._setAsFocused();a.select()}},_initAutoCompleteFindUser:function(){var a=this.id+"_hidden";this._autoCompleteFindUser=new AutoCompleteFindUser({textElementId:this.id+"_input",maxResultsDisplayed:this._maxDisplayed,minQueryLength:Util.getMinSearchKeyLengthBasedOnLocale(),findtype:"fullname",hideUserName:this._userNameHidden?
1:0,enablePhoto:this._usePhoto,enableAutoCompFind:!0,selectedUsersElementId:a,errMsg:MSGS.COMMON_AUTOCOMP_FINDUSER_ERR,v10:!1,supressAlert:!0})},_setAsFocused:function(a){a=this._autoCompleteFindUser?this._autoCompleteFindUser.widget:null;a||(this._initAutoCompleteFindUser(),a=this._autoCompleteFindUser.widget);a&&(a._onTextboxFocus?a._onTextboxFocus(null,a):alert("_onTextboxFocus is not a valid function."))},setModified:function(a){(this._modified=a)&&this.dispatch("change",{})},isModified:function(){return this._modified},
isWritable:function(){return this._writable},unregister:function(){for(var a=0;a<this._linkItems.length;a++)this._linkItems[a].unregister();Component.prototype.unregister.apply(this,arguments)},deserializeState:function(a){this.setValue(a.value);a.value&&this.setDefaultValue(a.defaultValue)},serializeState:function(){return{value:this._value,modified:this._modified,defaultValue:this._defaultValue?this._defaultValue:""}}})}();