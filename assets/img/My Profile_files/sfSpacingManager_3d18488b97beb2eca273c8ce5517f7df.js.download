function SFSpacingManager(k,l){this._init(k,l)}
SFSpacingManager.prototype=function(){function k(a,b,c){return null!=b&&a<b?b:null!=c&&a>c?c:a}function l(a,b,c,e){var d=a.size;a.size=k(b,a.minSize,a.maxSize);(!a.maxSize||a.size<a.maxSize)&&c.push(a);a.size>a.minSize&&e.push(a);return a.size-(null==d?0:d)}var m=["simple","adjacent","cascade","distribute"];return{_init:function(a,b){juic.assert(a instanceof Array,"Must provide a spacing array");this._bounded=b&&b.bounded||!1;this._adjustmentType=b&&b.adjustmentType||"simple";juic.assert(m.contains(this._adjustmentType),
"Invalid adjustment type: "+this._adjustmentType);this._spacing=[];for(var c=[],e=0,d=0,g=a.length;d<g;d++){var f=a[d];this._spacing.push(this._createSpacing(d,f));f=f.size||f.fixedSize;"number"==typeof f&&0<f&&(e++,c.push(f))}this._refreshTotals();e==a.length&&(this._initSizes=c)},insertInto:function(a,b){this.insertMultipleInto(a,[b])},insertMultipleInto:function(a,b){var c=this._spacing.length;juic.assert("number"==typeof a&&0<=a&&a<=c,"Invalid index: "+a+", max \x3d "+c);juic.assert(b instanceof
Array,"Space must be an array");for(var e=b.length,d=[],g=0;g<b.length;g++)d.push(this._createSpacing(a+g,b[g]));d.splice(0,0,a,0);this._spacing.splice.apply(this._spacing,d);for(g=a+e;g<c+e;g++)this._spacing[g].index=g;this._refreshTotals();if(null!=this._allocatedSize){c=!1;for(g=a;g<a+e;g++)if(b=this._spacing[g],b.fixedSize)b.size=b.fixedSize,this._distributeDelta(-b.size);else if(this._actualSize<=this._allocatedSize){c=!0;break}else this._actualSize>this._allocatedSize&&(b.size=b.minSize);c&&
this._allocateAllSizes(this._allocatedSize);this._updateActualSize()}},move:function(a,b,c){this._validateIndex(a);this._validateIndex(b);c=c||1;juic.assert(0<=c,"[SFSpacingManager] Invalid count: "+c);this._validateIndex(a+c-1);this._validateIndex(b+c-1);if(a!=b){var e=Math.min(a,b),d=Math.max(a,b,b+c-1);a=this._spacing.splice(a,c);a.splice(0,0,b,0);this._spacing.splice.apply(this._spacing,a);for(b=e;b<=d;b++)this._spacing[b].index=b}},remove:function(a,b){null==b&&(b=1);var c=a+b-1;this._validateIndex(a);
this._validateIndex(c);for(var e=0,d=a;d<=c;d++)e+=this._spacing[a].size,this._spacing.splice(a,1);d=c;for(c=this._spacing.length;d<c;d++)this._spacing[d].index=d;this._refreshTotals();null!=this._allocatedSize&&this._actualSize-e<this._allocatedSize&&this._distributeDelta(Math.min(this._allocatedSize-(this._actualSize-e),e));this._updateActualSize()},allocate:function(a){juic.assert("number"==typeof a&&0<a,"Provide a positive numerical value to allocate.");if(null!=this._initSizes){for(var b=0;b<
this._initSizes.length;b++)this._spacing[b].size=this._initSizes[b];this._initSizes=null}else this._allocatedSize!=a&&(null!=this._allocatedSize?(this._actualSize>this._allocatedSize&&a>this._actualSize||this._actualSize<=this._allocatedSize)&&this._distributeDelta(a-this._actualSize):this._allocateAllSizes(a));this._allocatedSize=a;a=[];this._updateActualSize();for(var b=0,c=this._spacing.length;b<c;b++)a[b]=this._spacing[b].size;return a},setCustomSize:function(a,b){b=parseInt(b);juic.assert("number"==
typeof a&&a<this._spacing.length,"Index is invalid: "+a);var c=this._spacing[a];this.getBounds(a);var e=c.size;c.size=b;0<=c.fixedSize&&(c.fixedSize=b,c.minSize=b,c.maxSize=b,this._fixedSpace+=b-e);switch(this._adjustmentType){case "adjacent":this._adjustAdjacent(e-b,a);break;case "cascade":this._adjustCascade(e-b,a);break;case "distribute":this._distributeDelta(e-b,a)}this._updateActualSize()},setSizes:function(a){juic.assert(a instanceof Array&&a.length==this._spacing.length,"sizes must be an array of length "+
this._spacing.length);for(var b=0;b<this._spacing.length;b++)this._spacing[b].size=parseInt(a[b]);this._updateActualSize()},getActualSize:function(){return this._actualSize},getMinimumSpace:function(){return this._minimumSpace},size:function(){return this._spacing.length},getBounds:function(a){this._validateIndex(a);var b=this._spacing[a],c={minSize:b.minSize,maxSize:b.maxSize};if(this._bounded)switch(this._adjustmentType){case "adjacent":if(a==this._spacing.length-1)c.minSize=b.size,c.maxSize=b.size;
else{a=this._spacing[a+1];var e=a.size-a.minSize,d=null!=b.maxSize?b.maxSize-b.size:Number.MAX_VALUE;c.minSize=b.size-Math.min(null!=a.maxSize?a.maxSize-a.size:Number.MAX_VALUE,b.size-b.minSize);c.maxSize=b.size+Math.min(d,e)}break;case "distribute":case "cascade":c.maxSize=Math.min(c.minSize+this._actualSize-this._minimumSpace,c.maxSize||Number.MAX_VALUE)}return c},setBounds:function(a,b){this._validateIndex(a);var c=this._spacing[a];b&&null!=b.minSize&&(c.minSize=b.minSize);b&&null!=b.maxSize&&
(c.maxSize=b.maxSize);c.minSize!=c.maxSize&&(c.fixedSize=void 0)},setHidden:function(a,b){this._validateIndex(a);var c=this._spacing[a];c.hidden!=b&&(c.hidden=b,null!=this._allocatedSize?c.hidden?(this._actualSize-=c.size,this._refreshTotals(),this._distributeDelta(this._allocatedSize-this._actualSize)):c.size?(this._actualSize+=c.size,this._distributeDelta(this._allocatedSize-this._actualSize),this._refreshTotals()):(this._refreshTotals(),this._allocateAllSizes(this._allocatedSize)):this._refreshTotals(),
this._updateActualSize())},_refreshTotals:function(){this._spacingNotFixed=[];for(var a=this._minimumSpace=this._fixedSpace=this._totalWeight=0,b=this._spacing.length;a<b;a++){var c=this._spacing[a];c.hidden||(null!=c.fixedSize?(this._fixedSpace+=c.fixedSize,juic.assert(0<c.fixedSize,"fixedSize must be a positive number")):(this._totalWeight+=c.weight,this._spacingNotFixed.push(c)),this._minimumSpace+=c.fixedSize||c.minSize)}},_createSpacing:function(a,b){var c={index:a,weight:b.weight,minSize:b.minSize,
maxSize:b.maxSize,fixedSize:b.fixedSize,hidden:b.hidden};null==c.weight&&(c.weight=1);juic.assert(0<=c.weight,"weight must be a non-negative number");if(null==c.minSize)c.minSize=0;else{var e=c.minSize=parseInt(c.minSize);juic.assert(0<e,"minSize must be a positive number")}null!=c.maxSize&&(c.maxSize=parseInt(c.maxSize));null!=c.minSize&&null!=c.maxSize&&(c.minSize==c.maxSize&&(c.fixedSize=c.minSize),juic.assert(c.minSize<=c.maxSize,"minSize cannot be greater than maxSize"));null!=c.fixedSize&&(e=
c.fixedSize=parseInt(c.fixedSize),c.size=e,c.minSize=c.fixedSize,c.maxSize=c.fixedSize,juic.assert(0<c.fixedSize,"fixedSize must be a positive number"));return c},_updateActualSize:function(){for(var a=this._actualSize=0,b=this._spacing.length;a<b;a++)this._spacing[a].hidden||(this._actualSize+=this._spacing[a].size)},_validateIndex:function(a){juic.assert("number"==typeof a&&0<=a&&a<this._spacing.length,"Index is invalid: "+a)},_adjustCascade:function(a,b){for(var c=b;0!=a&&c<this._spacing.length-
1;c++)a=this._adjustAdjacent(a,c);return a},_adjustAdjacent:function(a,b){if(b<this._spacing.length-1){var c=this._spacing[b+1],e=k(c.size+a,c.minSize,c.maxSize),d=e-c.size;c.size=e;a-=d}return a},_distributeDelta:function(a,b){if(0!=a){for(var c=[],e=[],d=0,g=this._spacingNotFixed.length;d<g;d++){var f=this._spacingNotFixed[d];if(f.index!=b){var h=null==b||f.index>b?c:e;0>a?f.size>f.minSize&&h.push(f):(null==f.maxSize||f.size<f.maxSize)&&h.push(f)}}a=this._allocateOrDeallocate(c,a,0);0<c.length&&
null!=b&&0!=a&&(a=this._allocateOrDeallocate(e,a,0))}return a},_allocateAllSizes:function(a){if(0<this._spacing.length){var b=a-this._fixedSpace;if(this._minimumSpace-this._fixedSpace<b){for(var c=[],e=[],d=0,g=this._spacingNotFixed.length;d<g;d++){var f=this._spacingNotFixed[d];l(f,Math.floor(f.weight*a/this._totalWeight),c,e);b-=f.size}0!=b&&this._allocateOrDeallocate(0>b?e:c,b,0)}else for(d=0,g=this._spacing.length;d<g;d++)f=this._spacing[d],f.size=f.minSize}},_allocateOrDeallocate:function(a,
b,c){if(0==b||0==a.length||c>a.length)return b;var e=0>b?-1:1,d=Math.abs(b),g=e*Math.floor(d/a.length),f=d%a.length;if(0==g)for(var h=0;h<d;h++)a[h].size+=e;else{for(var d=[],k=[],h=0,m=a.length;h<m;h++){var n=a[h];b-=l(n,n.size+g+e*(h<f?1:0),d,k)}0!=b&&(b=this._allocateOrDeallocate(0>b?k:d,b,c+1))}return b}}}();