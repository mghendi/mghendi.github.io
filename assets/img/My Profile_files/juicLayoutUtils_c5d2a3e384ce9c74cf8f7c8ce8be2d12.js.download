/*
 !! BEGIN /ui/juic/js/components/sfDefaultListModel.js !!! !! BEGIN /ui/juic/js/components/sfFactoryListModel.js !!! !! BEGIN /ui/juic/js/components/sfAbstractResizable.js !!! !! BEGIN /ui/juic/js/components/SFResizer.js !!! !! BEGIN /ui/juic/js/components/sfScrollBar.js !!! !! BEGIN /ui/juic/js/components/sfAutoScroller.js !!! !! BEGIN /ui/juic/js/components/sfDragDropMgr.js !!! !! BEGIN /ui/juic/js/components/sfContainer.js !!! !! BEGIN /ui/juic/js/components/sfListContainer.js !!! !! BEGIN /ui/juic/js/components/sfOverlayMgr.js !!! !! BEGIN /ui/juic/js/components/sfPositionManager.js !!! !! BEGIN /ui/juic/js/components/sfFluidLayout.js !!! !! BEGIN /ui/juic/js/components/sfLoading.js !!! !! BEGIN /ui/juic/js/components/sfMatrixLayout.js !!!*/
function SFDefaultListModel(a){this._items=[];"undefined"!=typeof a&&this.setItems(a)}
SFDefaultListModel.prototype=function(){return juic.set(new juic.EventTarget,{add:function(a){this._items.push(a);a=0<this._items.length?this.size()-1:0;this.dispatch("intervalAdded",{index0:a,index1:a});this.intervalAdded(a,a)},getlength:function(){return this._items.length},insertItemAt:function(a,b){a==this.size()?this.add(b):(juic.assert(this._items[a],"ERROR: Invalid index passed to insertItemAt. Index is out of range."),this._items.splice(a,0,b),this.dispatch("intervalAdded",{index0:a,index1:a}),
this.intervalAdded(a,a))},clear:function(){var a=this._items.length-1;this._items.length=0;this.intervalRemoved(0,a);this.dispatch("intervalRemoved",{index0:0,index1:a})},indexOf:function(a){for(var b=this.size();b;){if(this.get(b-1)===a)return b-1;b--}return-1},copyInto:function(a){juic.assert(a.constructor==Array,"[SFDefaultListModel] Invalid object passed into copyInto. Must be an array.");a.concat(this._items)},get:function(a){return this._items[a]},getFirstItem:function(){return this.get(0)},
getLastItem:function(){return this.get(this.size()-1)},size:function(){return this._items.length},isEmpty:function(){return 0==this.size()},remove:function(){this._items.pop();var a=this._items.length-1;this.intervalRemoved(a,a);this.dispatch("intervalRemoved",{index0:a,index1:a})},move:function(a,b,d){null==d&&(d=1);var h=this._items.splice(a,d);h.splice(0,0,b,0);this._items.splice.apply(this._items,h);this.intervalMoved(a,b,d);this.dispatch("intervalMoved",{beforeIndex:a,afterIndex:b,count:d})},
forEach:function(a,b){this._items.forEach(a,b)},removeItemAt:function(a){juic.assert(this._items[a],"ERROR: Invalid index passed to removeItemAt. Index is out of range.");var b=this._items.splice(a,1);this.intervalRemoved(a,a);this.dispatch("intervalRemoved",{index0:a,index1:a});return b},removeItem:function(a){var b=!1;a=this.indexOf(a);0<=a&&(b=!0,this.removeItemAt(a));return b},removeRange:function(a,b){juic.assert(this._items[a]&&this._items[b],"ERROR: Invalid indices passed to removeRange. Either fromIndex or toIndex is out of range.");
var d=this._items.splice(a,b-a+1);this.dispatch("intervalRemoved",{index0:a,index1:b});this.intervalRemoved(a,b);return d},set:function(a,b){this._items[a]=b;this.dispatch("contentsChanged",{index0:a,index1:a})},setItems:function(a){0<this._items.length&&this.clear();this._items=a.constructor==Array?a:[];if(a.constructor==Array)this._items=a;else for(var b in a)this._items.push(b);this.dispatch("intervalAdded",{index0:0,index1:this.size()-1});this.intervalAdded(0,this.size()-1)},getItems:function(){return this._items},
intervalRemoved:function(a,b){},intervalAdded:function(a,b){},intervalMoved:function(a,b,d){}})}();function SFDefaultSingleSelectModel(a){juic.assert(a,"[SFDefaultSingleSelectModel] No items were passed");SFDefaultListModel.call(this,a);0<this.size()&&(this._selectedIndex=0)}
SFDefaultSingleSelectModel.prototype=function(){return juic.set(new SFDefaultListModel,{setSelectedIndex:function(a){this._selectedIndex=a;this.dispatch("contentsChanged",{index0:-1,index1:-1})},getSelectedIndex:function(){return this._selectedIndex},resetSelectedIndex:function(){this._selectedIndex=0;this.dispatch("resetSelection")},intervalAdded:function(a,b){this._selectedIndex>=a&&(this._selectedIndex+=b-a+1,this._selectedIndex>=this.size()&&(this._selectedIndex=this.size()-1))},intervalRemoved:function(a,
b){this._selectedIndex>=a&&(this._selectedIndex=this._selectedIndex<=b?0:this._selectedIndex-(b-a+1),this.dispatch("contentsChanged",{index0:-1,index1:-1}))},intervalMoved:function(a,b,d){this._selectedIndex>=a&&this._selectedIndex<a+d?this._selectedIndex=b+this._selectedIndex-a:(this._selectedIndex>a&&(this._selectedIndex-=d),this._selectedIndex>=b&&(this._selectedIndex+=d))}})}();
function SFDefaultMultiSelectModel(a){juic.assert(a,"[SFDefaultSingleSelectModel] No items were passed");this._selectedIndices=[];SFDefaultListModel.call(this,a)}
SFDefaultMultiSelectModel.prototype=function(){return juic.set(new SFDefaultListModel,{addSelectedIndex:function(a){juic.assert(0<=a&&a<this.size(),"[SFDefaultMultiSelectModel] Invalid index: "+a);this._selectedIndices.contains(a)||this._selectedIndices.push(a);this.dispatch("selectionChanged")},isAllSelected:function(){return this._selectedIndices.length==this.size()},deselectAll:function(){0<this._selectedIndices.length&&(this._selectedIndices.length=0,this.dispatch("selectionChanged"))},selectAll:function(){for(var a=
this._selectedIndices.length=0,b=this.size();a<b;a++)this._selectedIndices.push(a);this.dispatch("selectionChanged")},removeSelectedIndex:function(a){for(var b=0,d=this._selectedIndices.length;b<d;b++)if(this._selectedIndices[b]===a){this._selectedIndices.splice(b,1);this.dispatch("selectionChanged");break}},setSelectedIndices:function(a){this._selectedIndices.length=0;if(a&&0<a.length)for(var b=0,d=a.length;b<d;b++)juic.assert(0<=a[b]&&a[b]<this.size(),"[SFDefaultMultiSelectModel] Invalid index: "+
a[b]+" max "+(this.size()-1)),this._selectedIndices.push(a[b]);this.dispatch("selectionChanged")},isIndexSelected:function(a){return this._selectedIndices.contains(a)},getSelectedCount:function(){return this._selectedIndices.length},getSelectedIndices:function(){return this._selectedIndices.concat()},intervalAdded:function(a,b){this._lastToggled=null;for(var d=0,h=this._selectedIndices.length;d<h;d++)this._selectedIndices[d]>=a&&(this._selectedIndices[d]+=b-a+1)},intervalMoved:function(a,b,d){this._lastToggled=
null;for(var h=0;h<this._selectedIndices.length;){var c=before=this._selectedIndices[h];c>=a&&c<a+d?c=b+c-a:(c>a&&(c-=d),c>=b&&(c+=d));c!=before&&(this._selectedIndices[h]=c);h++}},intervalRemoved:function(a,b){this._lastToggled=null;for(var d=0,h=!1;d<this._selectedIndices.length;)this._selectedIndices[d]>=a&&(this._selectedIndices[d]<=b?(h=!0,this._selectedIndices.splice(d,1),d--):this._selectedIndices[d]-=b-a+1),d++;h&&this.dispatch("selectionChanged")},toggleSelection:function(a,b,d){this._lastToggled||
1!=this._selectedIndices.length||(this._lastToggled=this._selectedIndices[0]);b||(this._selectedIndices=[]);if(d&&null!=this._lastToggled){b=Math.max(this._lastToggled,a);for(var h=Math.min(this._lastToggled,a);h<=b;h++)this._selectedIndices.contains(h)||this._selectedIndices.push(h)}else this._selectedIndices.contains(a)?this._selectedIndices.remove(a):this._selectedIndices.push(a);d||(this._lastToggled=a);this.dispatch("selectionChanged")}})}();
function SFFactoryListModel(a){a=juic.Config.convertArguments(arguments,["model","factory","context"],null,{model:SFDefaultListModel,factory:"function"});this._factory=a.factory;this._context=a.context;this.setModel(a.model)}function SFFactorySingleSelectModel(a){a=juic.Config.convertArguments(arguments,["model","factory","context"],null,{model:SFDefaultSingleSelectModel,factory:"function"});SFFactoryListModel.call(this,a);0<this.size()&&(this._selectedIndex=a.model.getSelectedIndex())}
function SFFactoryMultiSelectModel(a){a=juic.Config.convertArguments(arguments,["model","factory","context"],null,{model:SFDefaultMultiSelectModel,factory:"function"});SFFactoryListModel.call(this,a);this._selectedIndices=a.model.getSelectedIndices().concat()}
(function(){function a(a,b){b.forEach(function(e){a[e]=function(){return this._model[e].apply(this._model,arguments)}})}function b(a,b){for(var e in b)(function(e){a[e]=function(){b[e].apply(this,arguments);return d[e].apply(this,arguments)}})(e)}var d={setModel:function(a){this._model&&(this._model.removeEventListener("contentsChanged",this),this._model.removeEventListener("intervalAdded",this),this._model.removeEventListener("intervalRemoved",this),this._model.removeEventListener("intervalMoved",
this),0<this.size()&&this.dispatch("intervalRemoved",{index0:0,index1:this.size()}));this._model=a;this._model.addEventListener("contentsChanged",this,"_onContentsChanged");this._model.addEventListener("intervalAdded",this,"_onIntervalAdded");this._model.addEventListener("intervalRemoved",this,"_onIntervalRemoved");this._model.addEventListener("intervalMoved",this,"_onIntervalMoved");this._items=[];this._items.length=a.size()},get:function(a){var e=this._super(a);null==e&&(e=this._createItem(a),this._items[a]=
e);return e},getItems:function(){this._resolve();return this._super()},forEach:function(a,b){this._resolve();this._super(a,b)},_resolve:function(){for(var a=0;a<this.size();a++)this.get(a)},_createItem:function(a){var e=this._model.get(a);switch(typeof this._factory){case "object":if("function"==typeof this._factory.create)return this._factory.create(e,this._model,a);break;case "function":return this._factory.call(this._context,e,this._model,a)}return e},_onContentsChanged:function(a){if(0<=a.index0)for(var e=
a.index0;e<=a.index1;e++)this._items[e]=null;this.dispatch("contentsChanged",{index0:a.index0,index1:a.index1})},_onIntervalAdded:function(a){if(!a.moving){for(var e=[a.index0,0],b=a.index1-a.index0+1,c=0;c<b;c++)e.push(null);this._items.splice.apply(this._items,e)}this.dispatch("intervalAdded",{index0:a.index0,index1:a.index1})},_onIntervalRemoved:function(a){a.moving||this._items.splice(a.index0,a.index1-a.index0+1);this.dispatch("intervalRemoved",{index0:a.index0,index1:a.index1})},_onIntervalMoved:function(a){var b=
a.afterIndex,e=this._items.splice(a.beforeIndex,a.count);e.splice(0,0,b,0);this._items.splice.apply(this._items,e);this.dispatch("intervalMoved",{beforeIndex:a.beforeIndex,afterIndex:a.afterIndex,count:a.count})}};(function(a,b){b.forEach(function(b){a[b]=function(){throw Error("SFFactoryListModel: Do not call "+b+" on the factory, please call this on the underlying list model and it will be reflected");}})})(d,["add","insertItemAt","copyInto","set","setItems"]);a(d,["remove","removeItemAt","removeRange",
"move"]);var h=juic.set({},d);a(h,["setSelectedIndex"]);var c=juic.set({_onSelectionChanged:function(a){this._selectedIndices=this._model.getSelectedIndices();this.dispatchEvent(a)}},d);b(c,{setModel:function(a){this._model&&this._model.removeEventListener("selectionChanged");a&&a.addEventListener("selectionChanged",this,"_onSelectionChanged")}});a(c,["addSelectedIndex","deselectAll","selectAll","removeSelectedIndex","setSelectedIndices"]);var f={},k={};["_onContentsChanged","_onIntervalAdded","_onIntervalMoved",
"_onIntervalRemoved"].forEach(function(a){f[a]=function(){this._selectedIndex=this._model.getSelectedIndex()};k[a]=function(){this._selectedIndices=this._model.getSelectedIndices()}});b(h,f);b(c,k);juic.extend(SFFactoryListModel,SFDefaultListModel,d);juic.extend(SFFactorySingleSelectModel,SFDefaultSingleSelectModel,h);juic.extend(SFFactoryMultiSelectModel,SFDefaultMultiSelectModel,c)})();function SFAbstractResizable(){juic.assert(!1,"[SFAbstractResizable] Cannot instantiate")}
juic.extend(SFAbstractResizable,juic.Component,{setDimension:function(a){juic.assert(!1,"[SFAbstractResizable] Must implement setDimension")},getDimension:function(){juic.assert(!1,"[SFAbstractResizable] Must implement getDimension")},resize:function(){},getMinDimension:function(){return{width:0,height:0}},getMaxDimension:function(){return null}});
function SFResizer(){this.register();this._referenceContainers=[];this._sizingContainers=[];this._subContainers=[];this._centerContainers=[];this._referenceHeight=0;this.init()}
SFResizer.prototype=function(){return juic.set(new juic.Component,{init:function(){SFDOMEvent.addListener(window,"resize",function(){this.resize();return!1},this)},registerReferenceContainer:function(a){this._referenceContainers.push(a)},registerSizingContainers:function(a){this._sizingContainers.push(a)},registerSubContainer:function(a){this._subContainers.push(a)},registerCenterContainer:function(a){this._centerContainers.push(a)},getReferenceHeight:function(){for(var a=0,b=0,d=this._referenceContainers.length;b<
d;++b)a+=parseInt(juic.$(this._referenceContainers[b]).offsetHeight);return a},centerOnResize:function(){for(var a=0,b=this._centerContainers.length;a<b;++a){var d=juic.$(this._centerContainers[a]);if(d){var h=d.offsetWidth,c=SFDom.getViewportWidth(),h=0<c-h?c-h:0;d.style.left=Util.browserInfo.ie?parseInt(h/2)+"px":parseInt(h/2)+1+"px"}}},resize:function(){var a=window.SFDom;if(a){var b=this.getReferenceHeight(),a=a.getViewportHeight()-b+0;if(0<a){for(var b=0,d=this._sizingContainers.length;b<d;++b)juic.$(this._sizingContainers[b])&&
(juic.$(this._sizingContainers[b]).style.height=a+"px");b=0;for(d=this._subContainers.length;b<d;++b)juic.$(this._subContainers[b])&&(juic.$(this._subContainers[b]).style.height=a+"px")}this.centerOnResize();this.dispatch("resizeEvt",{containerHeight:Math.floor(a-0)})}}})}();function SFScrollBar(a){this.register();this._init(a)}
(function(){extend(SFScrollBar,Component,{_init:function(b){b=b||{};b={autoScroller:b.autoScroller,axisType:b.axisType,minimumScroll:b.minimumScroll||10,enabled:null==b.enabled?!0:b.enabled,css:b.css};this._autoScroller=b.autoScroller;this._autoScroller.addEventListener("autoScroll",this,"adjustDOM");this._axisType=b.axisType;this._axis=a[this._axisType];this._css=b.css;this._minimumScroll=b.minimumScroll;assert(this._axis,"SFScrollBar: Invalid axisType: "+this._axisType);assert(this._autoScroller instanceof
SFAutoScroller,"SFScrollBar: Invalid auto scroller");this._enabled=b.enabled},renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',this._axisType+"scrollBar scrollBar"+(this._css?" "+this._css:""),' globalRoundedCorners" onmousedown\x3d"',this.fireCode("_pageScroll"),'"');a.push('" ontouchstart\x3d"',this.fireCode("_onDragStart"),'"\x3e');a.push('\x3cdiv id\x3d"',this.id,'handle" onmousedown\x3d"',this.fireCode("_onDragStart"),'" class\x3d"',"scrollHandle globalRoundedCorners",'"\x3e\x3c/div\x3e\x3c/div\x3e');
a.addAfterRenderListener(this,"adjustDOM")},adjustDOM:function(){var a=juic.$(this.id);if(a){var d=a[this._axis.offsetDimension],d=d-SFDom.getOffsets(a,this._axisType),h=this._autoScroller.getScrollInfo()[this._axisType],c=this._enabled&&h.size-h.scrollArea>this._minimumScroll,f=Math.max(10,d*h.scrollArea/h.size);this._ratio=(h.size-h.scrollArea)/(d-f);c?(a.style.display="block",a=juic.$(this.id+"handle"),a.style[this._axis.startRegion]=h.position/this._ratio+"px",a.style[this._axis.dimension]=f+
"px"):a.style.display="none"}},getOffset:function(){return 17},handleDragEvent:function(a){var b=this._autoScroller.getScrollInfo();switch(a.type){case "dragStart":this._positionStart=b[this._axisType].position;break;case "drag":var h=this._positionStart+(a.point[this._axisType]-a.origin[this._axisType])*this._ratio;this._autoScroller.setScrollPosition("x"==this._axisType?h:b.x.position,"y"==this._axisType?h:b.y.position);break;case "dragEnd":this._autoScroller.stopScrolling()}this.dispatch("action",
{actionCommand:a.type})},setEnabled:function(a){this._enabled=a;this.adjustDOM()},_onKeyUp:function(a){this._autoScroller.stopScrolling()},_onKeyDown:function(a){var b=SFDOMEvent.getKeyName(a||window.event);b==this._axis.descendKeyName&&(this._autoScroller.autoScrollAxis(-1,this._axisType),SFDOMEvent.preventDefault(a));b==this._axis.ascendKeyName&&(this._autoScroller.autoScrollAxis(1,this._axisType),SFDOMEvent.preventDefault(a))},_onDragStart:function(a){SFDOMEvent.stopEvent(a);SFDragDropMgr.handleDragStart(a,
this,{useShim:!0,shimCursor:this._axis.cursor,clickTimeThreshold:0})},_pageScroll:function(a){var b=juic.$(this.id);if(b){var h=this._axisType,c=this._autoScroller.getScrollInfo()[h];if(this._enabled&&c.size-c.scrollArea>this._minimumScroll){var f=Util.getAbsPos(b),b=c.position/this._ratio;a=SFDOMEvent.getXY(a)["x"==h?0:1]-f[h];c=c.scrollArea*(a<b?-1:1);this._autoScroller.scrollMove("x"==h?c:0,"y"==h?c:0)}}},cleanup:function(){this._autoScroller.removeEventListener("autoScroll",this)}});var a={x:{opposite:"y",
offsetDimension:"offsetWidth",dimension:"width",scrollOffset:"clientWidth",scrollSize:"scrollWidth",scrollPosition:"scrollLeft",descendKeyName:"ARROWLEFT",ascendKeyName:"ARROWRIGHT",getPoint:"getX",getPagePoint:"getPageX",cursor:"col-resize",startRegion:"left"},y:{opposite:"x",dimension:"height",offsetDimension:"offsetHeight",scrollOffset:"clientHeight",scrollSize:"scrollHeight",scrollPosition:"scrollTop",descendKeyName:"ARROWUP",ascendKeyName:"ARROWDOWN",getPoint:"getY",getPagePoint:"getPageY",cursor:"row-resize",
startRegion:"top"}}})();function SFAutoScroller(a){this._init(a)}
SFAutoScroller.prototype=function(){function a(a,b,c){c=k[c];return Math.max(0,b[c.endRegionType]-a[c.endRegionType])+Math.min(0,b[c.startRegionType]-a[c.startRegionType])}function b(a,b,c){var e=k[a],l,n,f;h(b)?(l=SFDom.getViewportRegion(),n=SFDom[e.documentDimension](),f=l[e.dimensionType]):(l=SFDom.getRegion(b),n=b[e.scrollDimensionType],f=b[e.clientDimensionType]);if(n>f&&(n=l[e.startRegionType],l=l[e.endRegionType]-(c[e.offsetDimensionType]-f||17),f=c[e.startRegionType],c=c[e.endRegionType],
n>f||l<c)){var e=Math.min(Math.abs(n-f),Math.abs(n-c)),v=Math.min(Math.abs(l-f),Math.abs(l-c)),u=SFDom.getScrollPosition(b,a),u=e<v?Math.max(0,f-n+u):Math.max(0,c-l+u);SFDom.setScrollPosition(b,u,a)}}function d(a){return h(a)?SFDom.getViewportRegion():SFDom.getRegion(a)}function h(a){return a==document.body||a==document.documentElement}var c={tickSize:20,interval:200,increaseTickSize:!1},f={tickSize:"number",interval:"number"},k={x:{scrollPositionType:"scrollLeft",dimensionType:"width",startRegionType:"left",
endRegionType:"right",offsetDimensionType:"offsetWidth",clientDimensionType:"clientWidth",scrollDimensionType:"scrollWidth",documentScrollType:"getDocumentScrollLeft",documentDimension:"getDocumentWidth"},y:{scrollPositionType:"scrollTop",dimensionType:"height",startRegionType:"top",endRegionType:"bottom",offsetDimensionType:"offsetHeight",clientDimensionType:"clientHeight",scrollDimensionType:"scrollHeight",documentScrollType:"getDocumentScrollTop",documentDimension:"getDocumentHeight"}};return juic.set(new juic.EventTarget,
{_init:function(a){a=new juic.Config(a,c,f);this._setScrollEL(a.scrollEl);this._extenderEl=a.extenderEl;this._interval=a.interval;this._tickSize=a.tickSize;this._increaseTickSize=a.increaseTickSize;this._axisData={x:{},y:{}}},autoScrollAxis:function(b,c,f){juic.assert(this._scrollEl,"Scroll DOM element not available");var e=d(this._scrollEl),l={};l[c]={delta:"number"==typeof b?b:a(e,b,c)};this._startScrolling(l,f)},autoScroll:function(b,c){juic.assert(this._scrollEl,"Scroll DOM element not available");
var e=d(this._scrollEl),f={},l;for(l in k)f[l]={delta:"number"==typeof b?b:a(e,b,l)};this._startScrolling(f,c)},scrollTo:function(a){var e=this.getScrollEl();if(e){var c=SFDom.getScrollPosition(e,"x"),f=SFDom.getScrollPosition(e,"y");b("x",e,a);b("y",e,a);a=SFDom.getScrollPosition(e,"x")-c;e=SFDom.getScrollPosition(e,"y")-f;if(0!=a||0!=e)return this.dispatch("autoScroll",{delta:{x:a,y:e}}),!0}return!1},scrollToAxis:function(a,c){var e=this.getScrollEl();if(e){var f=SFDom.getScrollPosition(e,a);b(a,
e,c);e=SFDom.getScrollPosition(e,a)-f;if(0!=e)return f={},f[a]=e,this.dispatch("autoScroll",{delta:f}),!0}return!1},scrollMove:function(a,b){var e=this.getScrollEl();if(e){var c=SFDom.getScrollLeft(e),l=SFDom.getScrollTop(e);SFDom.setScrollLeft(e,c+a);SFDom.setScrollTop(e,l+b);a=SFDom.getScrollLeft(e)-c;b=SFDom.getScrollTop(e)-l;if(0!=a||0!=b)return this.dispatch("autoScroll",{delta:{x:a,y:b}}),!0}return!1},setScrollPosition:function(a,b){var e=this.getScrollEl();if(e){var c=SFDom.getScrollPosition(e,
"x"),l=SFDom.getScrollPosition(e,"y");SFDom.setScrollTop(e,b);SFDom.setScrollLeft(e,a);c=SFDom.getScrollPosition(e,"x")-c;e=SFDom.getScrollPosition(e,"y")-l;if(0!=c||0!=e)return this.dispatch("autoScroll",{delta:{x:c,y:e}}),!0}return!1},stopScrolling:function(a){if(this.isScrolling()){var b=!a;a&&(this._axisData[a].multiplier=0,0==this._axisData["x"==a?"y":"x"].multiplier&&(b=!0));b&&(clearInterval(this._intervalId),this._intervalId=null)}},getScrollPosition:function(a){var b=this.getScrollEl();if(b)return SFDom.getScrollPosition(b,
a)},getScrollLeft:function(){return this.getScrollPosition("x")},getScrollTop:function(){return this.getScrollPosition("y")},getScrollInfo:function(){var a=this.getScrollEl(),b=null;a&&(b=h(a)?{y:{size:SFDom.getDocumentHeight(),scrollArea:SFDom.getViewportHeight(),position:SFDom.getScrollPosition(a,"y"),inverse:!1},x:{size:SFDom.getDocumentWidth(),scrollArea:SFDom.getViewportWidth(),position:SFDom.getScrollPosition(a,"x"),inverse:Util.isRTL()}}:{y:{size:a.scrollHeight,scrollArea:a.clientHeight,position:SFDom.getScrollPosition(a,
"y"),inverse:!1},x:{size:a.scrollWidth,scrollArea:a.clientWidth,position:SFDom.getScrollPosition(a,"x"),inverse:Util.isRTL()}},["x","y"].forEach(function(a){a=b[a];a.oppositePosition=a.size-a.position-a.scrollArea}));return b},getScrollEl:function(){return"string"==typeof this._scrollEl?juic.$(this._scrollEl):this._scrollEl},setScrollEl:function(a){this._setScrollEL(a)},getExtenderEl:function(){return"string"==typeof this._extenderEl?juic.$(this._extenderEl):this._extenderEl},setExtenderEl:function(a){this._extenderEl=
a},isScrolling:function(){return null!=this._intervalId},_startScrolling:function(a,b){juic.assert(a,"axisData required to startScrolling");this._autoIncreaseSize=b;juic.assert(!this._autoIncreaseSize||this._extenderEl,"Must have an extender to auto-increase size");this._axisData=this._createAxisData(a);this.isScrolling()||0==this._axisData.x.multiplier&&0==this._axisData.y.multiplier||(this._intervalId=setInterval(Util.createCallback(this,"_autoScroll"),this._interval),this._autoScroll())},_autoScroll:function(){var a=
this._autoScrollAxis("x"),b=this._autoScrollAxis("y");0==a&&0==b?this.stopScrolling():this.dispatch("autoScroll",{delta:{x:a,y:b}})},_autoScrollAxis:function(a){var b=0,e=this._axisData[a],c=e.multiplier;if(0!=c){var l=this.getScrollEl(),f=SFDom.getScrollPosition(l,a);var c=f+c*this._tickSize,d=e.minPosition,k=e.maxPosition,c=null!=d&&c<d?d:null!=k&&c>k?k:c;0!=c-f&&(this._autoIncreaseSize&&c>e.clientMaxPosition&&this._increaseClientSize(a,c),SFDom.setScrollPosition(l,c,a),b=SFDom.getScrollPosition(l,
a)-f)}return b},_createAxisData:function(a){var b={},e;for(e in k){var c=k[e],l=juic.set({},a[e]);if(l.delta){l.multiplier=0>l.delta?-1:1;if(this._increaseTickSize){var f=Math.floor(Math.abs(l.delta)/25);0<f&&(l.multiplier*=f)}var f=this.getScrollEl(),c=f[c.scrollDimensionType]-f[c.clientDimensionType],f=l.minPosition||0,d=l.maxPosition;d>c&&!this._autoIncreaseSize&&(d=c);l.clientMaxPosition=c;l.minPosition=f;l.maxPosition=d}else l.multiplier=0;b[e]=l}return b},_increaseClientSize:function(a,b){var e=
k[a],c=b-this._axisData[a].clientMaxPosition,l=this.getExtenderEl(),f=l[e.clientDimensionType],f=Math.max(l.firstChild[e.clientDimensionType],f),c=f+c;l.style[e.dimensionType]=c+"px";this.dispatch("clientSizeIncrease",{dimensionType:e.clientDimensionType,oldSize:f,newSize:c})},_setScrollEL:function(a){this._scrollEl=Util.isFiori3HeaderEnabled()&&h(a)?Util.getGlobalPlacemat():a}})}();
"undefined"==typeof SFDragDropMgr&&(window.SFDragDropMgr=function(){function a(a){return a?(xy=SFDOMEvent.getXY(a||window.event),new SFPoint(xy[0],xy[1])):null}function b(a){return a?new SFPoint(a.pageX,a.pageY):null}function d(a,b,c){var e=c&&c.distanceThreshold||3;if(c&&c.axisType){if("x"==c.axisType)return Math.abs(a.x-b.x)>e;if("y"==c.axisType)return Math.abs(a.y-b.y)>e}else return Math.abs(a.x-b.x)>e||Math.abs(a.y-b.y)>e}function h(a){for(var b=[],e=0,c=a.length;e<c;e++){var l=a[e];b.push({pageX:l.pageX,
pageY:l.pageY})}return b}function c(a){var b=a.type,c={type:b,pageX:a.pageX,pageY:a.pageY,clientX:a.clientX,clientY:a.clientY,target:SFDOMEvent.getTarget(a),relatedTarget:SFDOMEvent.getRelatedTarget(a)};0==b.indexOf("touch")&&(c.changedTouches=h(a.changedTouches),c.touches=h(a.touches));0==b.indexOf("gesture")&&(c.scale=a.scale);return c}function f(a,c){var e=a&&a.length;if(e)for(var f=b(c),l=0;l<e;l++){var n=b(a[l]);if(f.equals(n))return l}return-1}function k(a,c,f){if(a&&0<a.length){c=b(c);for(var e=
null,l=null,n=0,d=a.length;n<d;n++){if(a[n].point.equals(c))return n;if(f){var k=a[n].point.getDistance(c);if(null==l||k<l)l=k,e=n}}if(f)return e}return-1}return juic.set(new juic.EventTarget,{init:function(){this._dropTargets=[];this._dropTargetLookup={};this._overTargets=[]},handleMouseDown:function(a,b,c){this.handleDragStart(a,b,c)},handleDragStart:function(a,b,f){juic.assert(b&&b.handleDragEvent,"SFDragDropMgr: dragListener is required, and must have a handleDragEvent method");this._activeDrag||
(a=a||window.event,juic.assert(a,"SFDragDropMgr: The origin mouse event is required"),this._activeDrag={handler:b,options:f,startEvent:c(a),isTouch:0==a.type.indexOf("touch"),overThreshold:!1},this._activeDrag.isTouch&&this._updateTouches(a),f&&0==f.refreshCache||this.refreshCache(f&&f.refreshDOM),f&&0===f.clickTimeThreshold?(this._activeDrag.overThreshold=!0,this._dragToCurrentPoint()):(this._activeDrag.overThreshold=!1,this._activeDrag.timeoutId=setTimeout(function(){SFDragDropMgr._handleTimeout()},
f&&f.clickTimeThreshold||1E3)),this._activeDrag.isTouch||SFDOMEvent.preventDefault(a),SFDOMEvent.addListener(document,"touchstart",this._onTouchStart,this),SFDOMEvent.addListener(document,"touchend",this._onTouchEnd,this),SFDOMEvent.addListener(document,"touchmove",this._onTouchMove,this),SFDOMEvent.addListener(document,"gesturestart",this._onGestureStart,this),SFDOMEvent.addListener(document,"gesturechange",this._onGestureChange,this),SFDOMEvent.addListener(document,"gestureend",this._onGestureEnd,
this),SFDOMEvent.addListener(document,"mouseup",this._onMouseUp,this),SFDOMEvent.addListener(document,"mousemove",this._onMouseMove,this))},stop:function(){this._dragging?this._stopDrag():(this._clearTimeout(),this._activeDrag=null)},isDragging:function(){return this._dragging},makeDraggable:function(a,b){var c={options:b,id:a,handleDragEvent:function(a){switch(a.type){case "drag":var b=juic.$(this.id);b.style.left=this.originPosition.left-a.origin.x+a.point.x+"px";b.style.top=this.originPosition.top-
a.origin.y+a.point.y+"px"}},onMouseDown:function(a){var c=juic.$(this.id);c&&(this.originXY=SFDom.getXY(this.id),this.originPosition={left:parseInt(SFDom.getStyle(c,"left")),top:parseInt(SFDom.getStyle(c,"top"))},SFDragDropMgr.handleMouseDown(a,this,b))}};SFDOMEvent.addListener(juic.$(b&&b.handleId||a),"mousedown",c.onMouseDown,c)},addDropTarget:function(a,b){var c={id:a,properties:b};this._dropTargets.push(c);this._dropTargetLookup[a]=c},getDropTarget:function(a){return this._dropTargetLookup[a]},
getAllDropTargets:function(){return this._dropTargets},getDropTargets:function(a){var b;if(a){b=[];for(var c=0,e=a.length;c<e;c++)b.push(this.getDropTarget(a[c]))}return b},removeDropTarget:function(a){for(var b=0,c=this._dropTargets.length;b<c;b++)if(this._dropTargets[b].id==a){this._dropTargets.splice(b,1);break}delete this._dropTargetLookup[a]},refreshCache:function(a){for(var b=0,c=this._dropTargets.length;b<c;b++){var e=this._dropTargets[b];delete e.region;a&&delete e.el}this._forceUpdate=!0},
_checkCache:function(){this._forceUpdate&&(this._forceUpdate=!1,this._updateCache())},_updateCache:function(){for(var a=0,b=this._dropTargets.length;a<b;a++){var c=this._dropTargets[a];c.el=c.el||juic.$(c.id);c.region=c.el?SFDom.getRegion(c.el):null}},_clearTimeout:function(){return this._activeDrag&&null!=this._activeDrag.timeoutId?(clearTimeout(this._activeDrag.timeoutId),this._activeDrag.timeoutId=null,!0):!1},_handleTimeout:function(){this._activeDrag.timeoutId=null;this._activeDrag.overThreshold=
!0;this._dragToCurrentPoint()},_onMouseMove:function(a){this._activeDrag&&(SFDOMEvent.stopPropagation(a),Util.browserInfo.ie&&9>Util.ieVersion&&!a.button?this._stopDrag(a):this._moveDrag(a))},_onMouseUp:function(a){this._activeDrag&&(SFDOMEvent.stopPropagation(a),this._stopDrag(a))},_onTouchStart:function(a){this._activeDrag&&(this._activeDrag.options&&this._activeDrag.options.noMultiTouch&&1<a.touches.length?this._stopDrag(a):this._updateTouches(a))},_onTouchEnd:function(a){this._activeDrag&&(this._updateTouches(a),
0==a.touches.length&&this._stopDrag(a))},_onTouchMove:function(a){if(this._activeDrag){var b=!0;this._activeDrag.options&&this._activeDrag.options.allowTouchMove&&this._activeDrag.overThreshold&&(b=!1);b&&SFDOMEvent.preventDefault(a);this._updateTouches(a);this._moveDrag(a)}},_onGestureStart:function(a){this._activeDrag&&(this._activeDrag.options.noMultiTouch?this._stopDrag(a):(this._activeDrag.gestureEvent=c(a),this._onGestureChange(a),this._activeDrag.handler.handleDragEvent({type:"gestureStart"})))},
_onGestureChange:function(a){this._activeDrag&&(SFDOMEvent.stopEvent(a),this._activeDrag.gestureEvent=c(a))},_onGestureEnd:function(a){this._activeDrag&&(SFDOMEvent.stopEvent(a),this._activeDrag.gestureEvent=null,this._activeDrag.handler.handleDragEvent({type:"gestureEnd"}))},_checkDragThreshold:function(b){if(this._activeDrag.overThreshold)return!0;if(this._activeDrag.isTouch)for(var c=0;c<this._activeDrag.touches.length;c++){if(b=this._activeDrag.touches[c],d(b.point,b.lastPoint,this._activeDrag.options))return!0}else return c=
a(this._activeDrag.startEvent),b=a(b),d(c,b,this._activeDrag.options);return!1},_moveDrag:function(a){this._checkDragThreshold(a)&&(this._activeDrag.lastMoveEvent=this._activeDrag.moveEvent,this._activeDrag.moveEvent=c(a),this._activeDrag.overThreshold=!0,this._clearTimeout(),this._dragToCurrentPoint())},_dragToCurrentPoint:function(){this._checkCache();if(!this._activeDrag)return!1;var b=this._activeDrag.options,c=this._activeDrag.handler,f=[],d=[],l=[],n={isTouch:this._activeDrag.isTouch,gestureEvent:this._activeDrag.gestureEvent,
startEvent:this._activeDrag.startEvent,lastMoveEvent:this._activeDrag.lastMoveEvent,moveEvent:this._activeDrag.moveEvent,dropTargets:f};this._activeDrag.isTouch?(n.touches=this._activeDrag.touches,n.origin=this._activeDrag.touches[0].origin,n.lastPoint=this._activeDrag.touches[0].lastPoint,n.point=this._activeDrag.touches[0].point):(n.origin=a(this._activeDrag.startEvent),n.lastPoint=a(this._activeDrag.lastMoveEvent||this._activeDrag.startEvent),n.point=a(this._activeDrag.moveEvent||this._activeDrag.startEvent));
for(var k=0,h=this._dropTargets.length;k<h;k++){var A=this._dropTargets[k];if(A.region){var t=this._overTargets.contains(A.id),w=A.region.contains(n.point);w&&!t?(d.push(A),this._overTargets.push(A.id)):!w&&t&&(l.push(A),this._overTargets.remove(A.id));w&&f.push(A)}}this._dragging||(b&&b.useShim&&(this._showShim(),this._shim.style.cursor=b.shimCursor?b.shimCursor:""),c.handleDragEvent(juic.set({type:"dragStart"},n)));this._dragging=!0;c.handleDragEvent(juic.set({type:"drag"},n));0<l.length&&(A=l[0],
c.handleDragEvent(juic.set({type:"dragOut",id:A.id,properties:A.properties,region:A.region},n)));0<d.length&&(A=d[0],c.handleDragEvent(juic.set({type:"dragOver",id:A.id,properties:A.properties,region:A.region},n)))},_stopDrag:function(f){this._shimActive&&this._hideShim();if(!this._clearTimeout()){var e=this.getDropTargets(this._overTargets),d=this._activeDrag.handler,k={type:"dragEnd",isTouch:this._activeDrag.isTouch,dropTargets:e,gestureEvent:this._activeDrag.gestureEvent,startEvent:this._activeDrag.startEvent,
lastMoveEvent:this._activeDrag.moveEvent,endEvent:c(f)},l=this._activeDrag.moveEvent||this._activeDrag.startEvent;this._activeDrag.isTouch?(k.origin=b(this._activeDrag.startEvent.changedTouches[0]),l&&l.changedTouches&&0<l.changedTouches.length&&(k.lastPoint=b(l.changedTouches[0])),f&&f.changedTouches&&0<f.changedTouches.length&&(k.point=b(f.changedTouches[0]))):(k.origin=a(this._activeDrag.startEvent),k.lastPoint=a(l),f&&(k.point=a(f)));d.handleDragEvent(k);this.dispatch("dragDrop",{dragHandler:d,
dropTargets:e})}SFDOMEvent.removeListener(document,"touchstart",this._onTouchStart);SFDOMEvent.removeListener(document,"touchend",this._onTouchEnd);SFDOMEvent.removeListener(document,"touchmove",this._onTouchMove);SFDOMEvent.removeListener(document,"gesturestart",this._onGestureStart);SFDOMEvent.removeListener(document,"gesturechange",this._onGestureChange);SFDOMEvent.removeListener(document,"gestureend",this._onGestureEnd);SFDOMEvent.removeListener(document,"mouseup",this._onMouseUp);SFDOMEvent.removeListener(document,
"mousemove",this._onMouseMove);this._activeDrag=null;this._dragging=!1;this._overTargets=[]},_showShim:function(){this._shim||this._createShim();this._shimActive=!0;this._sizeShim();this._shim.style.display=""},_hideShim:function(){this._shim&&(this._shim.style.height="0px",this._shim.style.display="none")},_sizeShim:function(){if(this._shimActive){var a,b;Util.isFiori3HeaderEnabled()?(a=(b=Util.getGlobalPlacemat())?b.scrollHeight-1:0,b=b?b.scrollWidth-1:0):(a=SFDom.getDocumentHeight()-1,b=SFDom.getDocumentWidth()-
1);this._shim.style.height=a+"px";this._shim.style.width=b+"px";this._shim.style.top="0";this._shim.style.left="0"}},_createShim:function(){this._shim||(this._shim=document.createElement("div"),document.body.firstChild?document.body.insertBefore(this._shim,document.body.firstChild):document.body.appendChild(this._shim),this._shim.style.display="none",this._shim.style.backgroundColor="transparent",this._shim.style.position="absolute",this._shim.style.zIndex="100001",this._shim.style.cursor="move",
this._shim.unselectable="on",this._shim.onselectstart=function(){return!1},SFDOMEvent.addListener(this._shim,"touchstart",this._onTouchStart,this),SFDOMEvent.addListener(this._shim,"touchend",this._onTouchEnd,this),SFDOMEvent.addListener(this._shim,"touchmove",this._onTouchMove,this),SFDOMEvent.addListener(this._shim,"gesturestart",this._onGestureStart,this),SFDOMEvent.addListener(this._shim,"gesturechange",this._onGestureChange,this),SFDOMEvent.addListener(this._shim,"gestureend",this._onGestureEnd,
this),SFDOMEvent.addListener(this._shim,"mouseup",this._onMouseUp,this),SFDOMEvent.addListener(this._shim,"mousemove",this._onMouseMove,this),SFDOMEvent.addListener(Util.isFiori3HeaderEnabled()?Util.getGlobalPlacemat():window,"scroll",this._sizeShim,this))},_createTouchInfo:function(a){var c=b(a);return{origin:c,lastPoint:c,point:c,startTouch:a,lastTouch:a}},_updateTouches:function(a){var c=a.touches,e=a.changedTouches;this._activeDrag.touches||(this._activeDrag.touches=[],this._activeDrag.ordered=
[]);switch(a.type){case "touchstart":this._activeDrag.ordered=[];var d=this._activeDrag.touches.concat();a=0;for(var l=c.length;a<l;a++){var n=c[a],r=f(e,n);0<=r?(r=this._createTouchInfo(n),this._activeDrag.touches.push(r)):(r=k(d,n,!0),0<=r?r=d.splice(r,1)[0]:(r=this._createTouchInfo(n),this._activeDrag.touches.push(r)));this._activeDrag.ordered[a]=r}if(0<d.length)for(a=0,l=d.length;a<l;a++)this._activeDrag.touches.splice(this._activeDrag.touches.indexOf(d[a]),1);break;case "touchend":a=0;for(l=
e.length;a<l;a++)c=k(this._activeDrag.touches,e[a],!0),r=this._activeDrag.touches[c],this._activeDrag.touches.splice(c,1),this._activeDrag.ordered.remove(r);break;case "touchmove":for(a=0,l=e.length;a<l;a++)n=e[a],d=f(c,n),r=this._activeDrag.ordered[d],r.lastPoint=r.point,r.point=b(n)}}})}(),SFDragDropMgr.init());
function SFContainer(a,b){this.register();Array.isArray(a)||"object"!=typeof a||(b=a,a=null);b=new juic.Config(b,null,{printStyleClass:["string",null],styleClass:["string",null],innerClass:["string",null],outerTag:["div","span","ul","ol","table","tr","td",null],innerTag:["div","span","li","tr","td",null]});b.outerTag||(b.outerTag=!1===b.outerBlock?"span":"div");b.innerTag||(b.innerTag="ul"==b.outerTag||"ol"==b.outerTag?"li":!1===b.innerBlock?"span":"div");this._outerRole=b.outerRole;this._innerRole=
b.innerRole;this._outerTag=b.outerTag;this._innerTag=b.innerTag;this._styleClass=b.styleClass;this._printStyleClass=b.printStyleClass;this._innerClass=b.innerClass;this.setChildren(a)}
(function(){document.createElement("div");juic.extend(SFContainer,juic.Component,{renderHtml:function(a){var b=this.getOuterTag();a.push("\x3c",b,' id\x3d"',this.id,'"');this._outerRole&&a.push(' role\x3d"',this._outerRole,'"');this._styleClass&&a.push(' class\x3d"',this._styleClass,'"');a.push("\x3e");this._renderChildren(a);a.push("\x3c/",b,"\x3e")},renderPrintHtml:function(a){var b=this.getOuterTag();a.push("\x3c",b,' id\x3d"',this.id,'"');this._printStyleClass&&a.push(' class\x3d"',this._printStyleClass,
'"');a.push("\x3e");this._renderPrintChildren(a);a.push("\x3c/",b,"\x3e")},get:function(a){return this._isValidIndex(a)&&this._children[a]},set:function(a,b,d){if(this._isValidIndex(a)&&(d&&this._children[a]instanceof juic.Component&&this._children[a].cleanup(),this._children[a]=b,d=juic.$(this.id))){var h=d.childNodes,c=this._createChildDOM(b);d.replaceChild(c,h[a]);this._updateChildDOM(c,b)}},insert:function(a,b,d){if(this._isValidIndex(a,!0))if(b instanceof Array){d=juic.$(this.id);for(var h=0,
c=b.length;h<c;h++)this.insert(a+h,b[h],d)}else if(h=this.size(),this._children.splice(a,0,b),d=d||juic.$(this.id))c=this._createChildDOM(b),a==h?d.appendChild(c):d.insertBefore(c,d.childNodes[a]),this._updateChildDOM(c,b)},add:function(a){this.append(a)},append:function(a){this.insert(this.size(),a)},removeAt:function(a,b){if(this._isValidIndex(a)){var d=this._children.splice(a,1)[0],h=juic.$(this.id);h&&h.removeChild(h.childNodes[a]);b&&d instanceof juic.Component&&d.cleanup();return d}},remove:function(a,
b){var d=this.indexOf(a);if(0<=d){a=this._children.splice(d,1);var h=juic.$(this.id);h&&h.removeChild(h.childNodes[d]);b&&a instanceof juic.Component&&a.cleanup();return a}},reorder:function(a){for(var b=0;b<this._children.length;b++){var d=this._children.indexOf(a[b],b);if(d!=b){if(d<b)return!1;this.move(d,b)}}return!0},move:function(a,b,d){d=d||1;if(this._isValidIndex(a)&&this._isValidIndex(b)&&this._isValidIndex(a+d-1)&&this._isValidIndex(b+d-1)&&a!=b){var h=this._children.splice(a,d);h.splice(0,
0,b,0);this._children.splice.apply(this._children,h);var c=juic.$(this.id);if(c){for(var h=[],f=d-1;0<=f;f--)c.removeChild(h[f]=c.childNodes[a+f]);a=b==c.childNodes.length?null:c.childNodes[b];for(f=0;f<d;f++)a?c.insertBefore(h[f],a):c.appendChild(h[f])}}},size:function(){return this._children.length},indexOf:function(a){for(var b=0,d=this.size();b<d;b++)if(this.get(b)===a)return b;return-1},getChildren:function(){return this._children.concat()},setChildren:function(a,b){this._children&&b&&this.broadcast("cleanup");
this._children=a||[];juic.assert(this._children instanceof Array,"SFContainer: You must provide an array for children");var d=juic.$(this.id);if(d){var h=juic.createRenderContext();this._renderChildren(h);h.renderInto(d)}},getStyleClass:function(){return this._styleClass},setStyleClass:function(a){this._styleClass=a;if(a=juic.$(this.id))a.className=this._styleClass},getInnerClass:function(){return this._innerClass},setInnerClass:function(a){this._innerClass=a;var b=juic.$(this.id);if(b)for(var b=
b.childNodes,d=0,h=b.length;d<h;d++)b[d].className=a},cleanup:function(a){a&&this.broadcast("cleanup");this._super()},broadcast:function(a){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof a&&b.splice(0,0,null,null);for(var d=0,h=this.size();d<h;d++){var c=this.get(d);switch(typeof a){case "string":c&&c[a]&&"function"==typeof c[a]&&c[a].apply(c,b);break;case "function":b[0]=c,b[1]=d,a.apply(this,b)}}},getInnerTag:function(){return this._innerTag},getOuterTag:function(){return this._outerTag},
_isValidIndex:function(a,b){var d=0<=a&&a<this.size()+(b?1:0);juic.assert(d,"SFContainer: Invalid index "+a);return d},_renderChildren:function(a){this._children.forEach(function(b){this._renderChild(a,b)},this)},_renderPrintChildren:function(a){this._children.forEach(function(b){this._renderPrintChild(a,b)},this)},_renderChild:function(a,b){var d=this.getInnerTag();a.push("\x3c",d);this._innerRole&&a.push(' role\x3d"',this._innerRole,'"');this._innerClass&&a.push(' class\x3d"',this._innerClass,'"');
a.push("\x3e");this._renderInnerChild(a,b);a.push("\x3c/",d,"\x3e")},_renderPrintChild:function(a,b){var d=this.getInnerTag();a.push("\x3c",d);this._innerClass&&a.push(' class\x3d"',this._innerClass,'"');a.push("\x3e");this._renderPrintInnerChild(a,b);a.push("\x3c/",d,"\x3e")},_renderInnerChild:function(a,b){b&&(b instanceof juic.Component?Array.isArray(a)?b.renderHtml(a):a.push(b):a.push(juic.escapeHTML(b.toString())))},_renderPrintInnerChild:function(a,b){b&&(b instanceof juic.Component?b.renderPrintHtml(a):
a.push(juic.escapeHTML(b.toString())))},_createChildDOM:function(a){a=document.createElement(this.getInnerTag());this._innerRole&&(a.role=this._innerRole);this._innerClass&&(a.className=this._innerClass);return a},_updateChildDOM:function(a,b){var d=juic.createRenderContext();this._renderInnerChild(d,b);d.renderInto(a)}})})();function SFListContainer(a,b){"object"!=typeof a||Array.isArray(a)||a instanceof SFDefaultListModel||(b=a,a=[]);this._super(b);this.setModel(a)}
juic.extend(SFListContainer,SFContainer,{setModel:function(a){this._model&&(this._model.removeEventListener("contentsChanged",this),this._model.removeEventListener("intervalAdded",this),this._model.removeEventListener("intervalRemoved",this),this._model.removeEventListener("intervalMoved",this),this._model.removeEventListener("selectionChanged",this),this.setChildren(null,!0));if(a){var b=a;Array.isArray(a)&&(b=new SFDefaultListModel(b));assert(b instanceof SFDefaultListModel,"SFListContainer: Invalid model");
this._model=b;this._model.addEventListener("contentsChanged",this,"_onContentsChanged");this._model.addEventListener("intervalAdded",this,"_onIntervalAdded");this._model.addEventListener("intervalRemoved",this,"_onIntervalRemoved");this._model.addEventListener("intervalMoved",this,"_onIntervalMoved");this._model.addEventListener("selectionChanged",this,"_onSelectionChanged");for(a=0;a<this._model.size();a++)this.add(this._model.get(a));this._onSelectionChanged()}this._changeDimensions()},getModel:function(){return this._model},
cleanup:function(){this.isRegistered()&&(this.setModel(null),this._super())},_onSelectionChanged:function(){if(this._model instanceof SFDefaultSingleSelectModel){var a=this._model.getSelectedIndex();0<this._model.size()&&(a=0<=a&&this.get(a),a!==this._selectedComponent&&(this._selectedComponent&&this._setComponentSelected(this._selectedComponent,!1),this._isSelectable(a)?(this._setComponentSelected(a,!0),this._selectedComponent=a):this._selectedComponent=null))}else if(this._model instanceof SFDefaultMultiSelectModel){var b=
this._selectedComponents||[];this._selectedComponents=[];this._model.getSelectedIndices().forEach(function(a){a=this.get(a);this._isSelectable(a)&&(this._selectedComponents.push(a),b.contains(a)||this._setComponentSelected(a,!0))},this);b&&b.forEach(function(a){this._selectedComponents.contains(a)||this._setComponentSelected(a,!1)},this)}},_setComponentSelected:function(a,b){a instanceof juic.Component&&a.isRegistered()&&a.setSelected(b)},_isSelectable:function(a){return a&&a instanceof juic.Component&&
a.isRegistered()&&"function"==typeof a.setSelected&&a!==this._selectedItem},_onContentsChanged:function(a){if(0<=a.index0){for(var b=a.index0;b<=a.index1;b++){var d=this._model.get(b);this.set(b,d,!0)}this._changeDimensions()}this._onSelectionChanged()},_onIntervalAdded:function(a){for(var b=a.index0;b<=a.index1;b++){var d=this._model.get(b);this.insert(b,d)}this._changeDimensions()},_onIntervalRemoved:function(a){for(var b=a.index1;b>=a.index0;b--)this.removeAt(b,!0);this._changeDimensions()},_onIntervalMoved:function(a){this.move(a.beforeIndex,
a.afterIndex,a.count);this._changeDimensions()},_changeDimensions:function(){juic.$(this.id)&&this.dispatch("changeDimensions")}});function SFAbstractOverlayMgr(){}juic.extend(SFAbstractOverlayMgr,juic.EventTarget,{show:function(a,b){throw Error("SFAbstractOverlayMgr: Must implement show");},css:function(a,b){throw Error("SFAbstractOverlayMgr: Must implement css");},animate:function(a,b){throw Error("SFAbstractOverlayMgr: Must implement animate");}});
function SFDefaultOverlayMgr(){this._model=new SFDefaultListModel}
(function(){function a(a){this.register();this._model=a.model;this._context=a.context;this._useUI5Popups=a.useUI5Popups;this._init(a.component,a.options)}function b(){return!!(window.jQuery&&jQuery.sap&&jQuery.sap.require)}function d(a){var b=jQuery.sap.getObject("sap.sf.juic.components.OverlayWrapper");b||(b=sap.ui.core.Control.extend("sap.sf.juic.components.OverlayWrapper",{metadata:{properties:{overlay:"any"}},renderer:function(a,b){a.write("\x3cdiv");a.writeControlData(b);a.write("\x3e");var c=
b._h=juic.createRenderContext();b.getOverlay().renderHtml(c);a.write(c.join(""));a.write("\x3c/div\x3e")},postRender:function(a){this._h&&this._h.dispatch("afterRender")}}));return new b({overlay:a})}var h={css:void 0,modal:!0,centered:void 0,cleanup:!1,iframeUnderlay:!1,viewport:!1,fullScreen:!1,dispatchEscKeyPress:!1,shadow:!1,autoClose:!1},c=["component","modal","position","alwaysInViewport","options"],f={modal:!0,position:null,fullScreen:!1,alwaysInViewport:!1,iframe:!1,autoClose:!1,options:{dispatchEscKeyPress:!1}},
k={component:juic.Component,position:[{left:"number",top:"number"},null]},e=juic.Logger.getLogger("SFOverlayMgr"),v={},u={},x={};juic.extend(SFDefaultOverlayMgr,SFAbstractOverlayMgr,{_init:function(){this._useUI5Popups=b()&&!(!window.SFOverlayMgrSettings||!window.SFOverlayMgrSettings.useUI5Popups);if(!this._useUI5Popups){var a=new SFListContainer(this._model,{styleClass:"sfOverlayMgr"});div=document.createElement("div");div.setAttribute("id","sfOverlayMgr");AccessibilityPrefs.isLowVisionEnabled()&&
(div.className="globalLowVisionSupport "+AccessibilityPrefs.getLowVisionType());this.getContext().appendChild(div);a.render(div)}this.attach()},attach:function(){SFBodyEventDispatcher.addResizeListener(this,"_handleResize");SFDOMEvent.addListener(this.getScrollElement(),"scroll",this._handleScroll,this)},detach:function(){SFBodyEventDispatcher.removeResizeListener(null,this);SFDOMEvent.removeListener(this.getScrollElement(),"scroll",this._handleScroll,this)},getContext:function(){return document.body},
getScrollElement:function(){if(Util.isFiori3HeaderEnabled())return this._globalPlacematEL=Util.getGlobalPlacemat(),this._globalPlacematELScrollTop=this._globalPlacematEL.scrollTop,this._globalPlacematEL;var a=this.getContext();return a==document.body?window:a},show:function(a,b){b=new juic.Config(b,h);b.iframeUnderlay=!(!window.SFOverlayMgrSettings||!window.SFOverlayMgrSettings.iframeUnderlay);if(b.modal&&"undefined"==typeof b.centered||!b.css)b.centered=!0;b.centered&&(b.viewport=!0);juic.assert(a instanceof
juic.Component,"SFOverlayMgr: show requires a component");juic.assert(a.isRegistered(),"SFOverlayMgr: component is not registered");if(this.hasOverlay(a))e.error("Attempted 2 overlays for the same component ",a);else{if(!this._preinit){var c=this;this._preinit=!0;SFDOMEvent.ready({priority:"HIGHEST",callback:function(){c._init()}})}var l=this._createOverlay({component:a,options:b,model:this._model,context:this.getContext(),useUI5Popups:this._useUI5Popups});this._model.add(l);this._useUI5Popups&&l.openUI5Popup();
l.setIframe();return l}},getTopOverlay:function(){return this._model.get(this._model.size()-1)},isTopOverlay:function(a){return a&&this.getTopOverlay()===this.getOverlay(a)},_createOverlay:function(b){return new a(b)},getOverlay:function(a){return"string"==typeof a?u[a]:a&&u[a.id]},animate:function(a,b,c){if(a=this.getOverlay(a))return a.animate(b,c);juic.assert(!1,"SFOverlayMgr: Overlay not found for animate")},css:function(a,b){var c=this.getOverlay(a);c?c.css(b):juic.assert(!1,"SFOverlayMgr: Overlay not found for css")},
setModal:function(a,b){var c=this.getOverlay(a);if(c)return c.setModal(b);juic.assert(!1,"SFOverlayMgr: Overlay not found for setModal")},getOptions:function(a){if(a=this.getOverlay(a))return a.getOptions();juic.assert(!1,"SFOverlayMgr: Overlay not found for getOverlayOptions")},setOptions:function(a,b){var c=this.getOverlay(a);c?c.setOptions(b):juic.assert(!1,"SFOverlayMgr: Overlay not found for setOverlayOption")},getComponent:function(a){if(a=x[a])return a.component},hasOverlay:function(a){return!!this.getOverlay(a)},
getOverlayId:function(a){return(a=this.getOverlay(a))&&a.getReferenceId()},getViewportHeight:function(){return SFDom.getViewportHeight()},getViewportWidth:function(){return SFDom.getViewportWidth()},getAttribute:function(a){return v[a]},setAttribute:function(a,b){v[a]=b},showOverlay:function(a,b,e,d,h){var l=juic.Config.convertArguments(arguments,c,f,k);juic.set(l,l.options||{});e=l.position;var n=l.modal||!e;this.show(l.component,{css:n?void 0:{left:e.left+"px",top:e.top+"px"},centered:n,viewport:n,
modal:l.modal,dispatchEscKeyPress:l.dispatchEscKeyPress})},repositionComponent:function(a,b){var c=this.getComponent(a);c?this.css(c,{left:b.left+"px",top:b.top+"px"}):juic.assert(!1,"SFOverlayMgr: Invalid overlay id")},centerComponent:function(a){this.setOptions(a,{viewport:!0,centered:!0})},removeOverlay:function(a){(a=juic.Component._registry[a])&&a.dispatch("hide")},changeIframeDims:function(a,b,c){(a=juic.Component._registry[c])&&a.dispatch("changeDimensions")},addGlobalFocusableArea:function(a){window._globalFocusableArea?
this._globalFocusableArea.push(a):this._globalFocusableArea=[a]},removeGlobalFocusableArea:function(a){this._globalFocusableArea&&(this._globalFocusableArea=this._globalFocusableArea.filter(function(b){return b!=a}))},getGlobalFocusableArea:function(){return this._globalFocusableArea||[]},_handleResize:function(){SFOverlayMgr.dispatch("viewportResized");this._model.forEach(function(a){a._reposition()})},_handleScroll:function(){var a,b=Util.isFiori3HeaderEnabled();if(b){var c=this._globalPlacematEL.scrollTop,
f=this._globalPlacematELScrollTop;this._globalPlacematELScrollTop=c;a=c-f}this._model.forEach(function(c){b?c._updateTop(a):c._reposition()})}});juic.extend(a,juic.Component,{_init:function(a,b){this._overlayId=this.id+"container";this.component=a;this.component.addEventListener("hide",this,"_hide");this.component.addEventListener("bringToTop",this,"_bringToTop");this.component.addEventListener("changeDimensions",this,"_changeDimensions");this.options=b;x[this._overlayId]=this;u[a.id]=this;b.dispatchEscKeyPress&&
this._setKeyListener(!0)},cleanup:function(){delete x[this._overlayId];delete u[this.component.id];this.options.cleanup&&this.component.isRegistered()?this.component.cleanup():(this.component.removeEventListener("hide",this),this.component.removeEventListener("bringToTop",this),this.component.removeEventListener("changeDimensions",this));this._popup&&(jQuery("#"+this._popup.getContent().getId()).remove(),this._popup.destroy(),this._popup=null);this._super()},getReferenceId:function(){return this._overlayId},
renderHtml:function(a){a.push('\x3cdiv id\x3d"',this.id,'" class\x3d"',this._getClassName(),'" style\x3d"visibility:hidden"\x3e');a.push('\x3cdiv id\x3d"',this.id,'shim" class\x3d"overlayShim"\x3e\x3c/div\x3e');a.push('\x3cdiv id\x3d"',this._overlayId,'" class\x3d"',"globalContentBackground globalContentForeground sfoverlaycontainer",'"');SFDom.renderStyle(a,this.options.css);a.push("\x3e\x3c/div\x3e\x3c/div\x3e");a.addAfterRenderListener(this,"_postRender")},_postRender:function(){function a(){this._adjustDOM();
this._overlayContainer.style.visibility="visible";this._initAccessibility();SFOverlayMgr.dispatch("overlayRendered",{componentId:this.component.id,overlayId:this._overlayId,componentWidth:this._dimension.width,componentHeight:this._dimension.height,isModal:this.options.modal,context:this._context})}this.component.render(this._overlayId);this._overlayContainer=juic.$(this.id);this._shim=juic.$(this.id+"shim");this._overlay=juic.$(this._overlayId);Util.browserInfo.ieQuirks&&Util.isRTL()&&(this._overlay.style.zoom=
1);b()&&!this._useUI5Popups&&sap.ui.getCore().attachInit(function(){sap.ui.require(["sap/ui/core/Popup"],function(){jQuery([this._overlay,this._shim]).css("z-index",sap.ui.core.Popup.getNextZIndex());this._useUI5=!0}.bind(this))}.bind(this));if(Util.browserInfo.ieQuirks){var c=this;setTimeout(function(){a.call(c)},0)}else a.call(this);SFDOMEvent.addListener(this._shim,"touchstart",this._clickShim,this,!0);SFDOMEvent.addListener(this._shim,"mousedown",this._clickShim,this,!0)},_canIgnoreAccessibility:function(){return!this.options.modal||
window.SFLoading&&this.component instanceof SFLoading||window.SFLoad&&this.component instanceof SFLoad},_initAccessibility:function(){if(!this._canIgnoreAccessibility()){this._ariaHiddenElements=this._ariaHiddenElements||[];for(var a=this._context.firstChild;a;a=a.nextSibling)a.hasAttribute&&!a.hasAttribute("aria-hidden")&&"sfOverlayMgr"!==a.id&&"sap-ui-static"!=a.id&&SFDom.isElementNode(a)&&SFDom.isDisplayed(a)&&(this._ariaHiddenElements.push(a),a.setAttribute("aria-hidden","true"),this._useUI5Popups||
SFDOMEvent.addEventListener(a,"focus",this._handleFocusOutside,!0));for(overlayId in x)overlayId!==this._overlayId&&(a=juic.$(overlayId))&&a.hasAttribute&&!a.hasAttribute("aria-hidden")&&SFDom.isElementNode(a)&&SFDom.isDisplayed(a)&&(this._ariaHiddenElements.push(a),a.setAttribute("aria-hidden","true"),this._useUI5Popups||SFDOMEvent.addEventListener(a,"focus",this._handleFocusOutside,!0))}},_cleanUpAccessibility:function(){this._canIgnoreAccessibility()||(this._ariaHiddenElements&&this._ariaHiddenElements.forEach(function(a){a&&
(a.removeAttribute&&a.removeAttribute("aria-hidden"),this._useUI5Popups||SFDOMEvent.removeEventListener(a,"focus",this._handleFocusOutside,!0))},this),this._ariaHiddenElements=null)},_handleFocusOutside:function(a){for(var b=SFOverlayMgr.getGlobalFocusableArea(),c=0;c<b.length;c++)if(SFDom.isAncestor(juic.$(b[c]),a.target))return;for(overlayId in x)(b=juic.$(overlayId))&&b.hasAttribute&&!b.hasAttribute("aria-hidden")&&!SFDom.isAncestor(b,a.target)&&(c=SFDom.findNextFocusableElement(b,b,!0),SFDom.hasClass(c,
"sfFocusMarker")&&(c=SFDom.findNextFocusableElement(c,b,!0)),SFDom.setFocus(c,!0))},_hideBodyElements:function(){if(!this._bodyHidden){this._context.style.width="";this._hiddenBodyElements=this._hiddenBodyElements||[];for(var a=this._context.firstChild;a;a=a.nextSibling)"sfOverlayMgr"!==a.id&&SFDom.isElementNode(a)&&SFDom.isDisplayed(a)&&(this._hiddenBodyElements.push({el:a,display:a.style.display}),a.style.display="none")}},_clickShim:function(){this.options.autoClose&&this.component.dispatch("hide")},
_resetBodyElements:function(){this._hiddenBodyElements&&this._hiddenBodyElements.forEach(function(a){a.el.style.display=a.display});this._hiddenBodyElements=null},_adjustDOM:function(){if(this._overlay){var a=this._overlay.lastChild;this._dimension={width:a.offsetWidth,height:a.offsetHeight};this._reposition();this.options.fullScreen?this._hideBodyElements():this._resetBodyElements()}},_reposition:function(){if(this._doesContainerRequirePosition()&&this._dimension){var a=SFDom.getDocumentScrollTop(),
b=SFDom.getDocumentScrollLeft(),c=SFDom.getViewportWidth(),f=SFDom.getViewportHeight(),e=f<this._dimension.height,d=c<this._dimension.width;Util.browserInfo.ieQuirks&&(this.options.viewport?SFDom.updateStyle(this._overlayContainer,{top:a+"px",left:b+"px"}):this.options.modal&&SFDom.updateStyle(this._shim,{top:a+"px",left:b+"px"}),SFDom.updateStyle(this._overlayContainer,{width:c+"px",height:f+"px"}));if(this.options.centered){if(e||d){this._scrollFirst=this._scrollFirst||{scrollTop:a,scrollLeft:b};
var k=this._scrollFirst.scrollTop,h=this._scrollFirst.scrollLeft;Util.isRTL()&&(h-=SFDom.getDocumentWidth()-SFDom.getViewportWidth());d||(h+=(c-this._dimension.width)/2);e||(k+=(f-this._dimension.height)/2);c={position:"absolute",left:h+"px",top:k+"px"};Util.browserInfo.ieQuirks?(c={position:"absolute",left:h+"px",top:"0px"},juic.set(c,{"margin-left":this._scrollFirst.scrollLeft-b,"margin-top":this._scrollFirst.scrollTop-a})):juic.set(c,{"margin-left":"","margin-top":""})}else delete this._scrollFirst,
c={left:"",top:"",position:"","margin-left":-this._dimension.width/2+"px","margin-top":-this._dimension.height/2+"px"};SFDom.updateStyle(this._overlay,c)}this.setIframe()}},_updateTop:function(a){this._doesContainerRequirePosition()||(a=jQuery(this._overlay).position().top-a,this.css({top:a+"px"}))},setIframe:function(){this.options.iframeUnderlay?(this._createHiddenIframe(),this._iframe&&(this.options.modal?juic.set(this._iframe.style,{width:"100%",height:"100%",top:SFDom.getStyle(this._shim,"top"),
left:SFDom.getStyle(this._shim,"left")}):juic.set(this._iframe.style,{width:this._dimension.width+"px",height:this._dimension.height+"px",marginLeft:SFDom.getStyle(this._overlay,"margin-left"),marginTop:SFDom.getStyle(this._overlay,"margin-top"),position:SFDom.getStyle(this._overlay,"position"),top:SFDom.getStyle(this._overlay,"top"),left:SFDom.getStyle(this._overlay,"left")}))):this._removeHiddenIframe()},_createHiddenIframe:function(){if(this._overlayContainer&&!this._iframe){this._iframe=document.createElement("iframe");
juic.set(this._iframe,{style:{position:"absolute",border:"0",opacity:"0",zIndex:SFDom.getStyle(this._overlay,"z-index"),filter:"alpha(opacity\x3d0)"},title:MSGS.COMMON_HIDDEN_FRAME_TITLE,tabIndex:-1,role:"presentation",src:IMAGES["/ui/juic/img/_.gif"]});var a=this._overlayContainer.firstChild;a?this._overlayContainer.insertBefore(this._iframe,a):this._overlayContainer.appendChild(this._iframe)}},_removeHiddenIframe:function(){this._iframe&&(this._iframe.parentNode.removeChild(this._iframe),this._iframe=
null)},_doesContainerRequirePosition:function(){var a=this.options;if(a.modal||a.centered||a.viewport)return!0;if(a=a.css){if(null!=a.right||null!=a.bottom)return!0;for(var b in a){var c=a[b];if("string"==typeof c&&0<c.indexOf("%"))return!0}}return!1},_keypressHandler:function(a){switch(SFDOMEvent.getKeyName(a)){case "ESCAPE":SFDOMEvent.stopEvent(a),SFOverlayMgr.dispatch("escKeyPressed",a)}},_getClassName:function(){var a=["sf-overlay"];this.options.modal&&a.push("modalOverlay");this.options.centered&&
a.push("centeredOverlay");this.options.viewport?a.push("viewportOverlay"):a.push("documentOverlay");this.options.styleClass&&a.push(this.options.styleClass);return a.join(" ")},_hide:function(){if(this.isRegistered()){var a=this._model.indexOf(this),b=!!juic.$(this.id);0<=a&&this._model.removeItemAt(a);b||this.cleanup();this._setKeyListener(!1);this._cleanUpAccessibility();SFOverlayMgr.dispatch("overlayHidden",{component:this.component,options:this.options});this.options.fullScreen&&this._resetBodyElements();
this.dispatch("hide");this.closeUI5Popup()}},_setKeyListener:function(a){this._keyListening!=a&&(a?SFDOMEvent.addListener(window.document,"keydown",this._keypressHandler,this):SFDOMEvent.removeListener(window.document,"keydown",this._keypressHandler,this),this._keyListening=a)},_bringToTop:function(){this._useUI5Popups&&this._popup&&this._popup._$().css("z-index",sap.ui.core.Popup.getNextZIndex());this._useUI5&&jQuery([this._overlay,this._shim]).css("z-index",sap.ui.core.Popup.getNextZIndex());var a=
this._model.indexOf(this),b=this._model.size()-1;a<b&&this._model.move(a,b,1)},_changeDimensions:function(){this._adjustDOM()},animate:function(a,b){juic.set(this.options,{css:a});return SFAnimUtil.animate(this._overlay,a,b)},css:function(a){juic.set(this.options,{css:a});SFDom.updateStyle(this._overlay,a)},setOptions:function(a){var b=!1,c;for(c in a){var f=a[c];switch(c){case "dispatchEscKeyPress":this.options[c]=f;this._setKeyListener(!!f);break;case "css":this.css(f);break;case "modal":case "centered":case "viewport":case "styleClass":case "fullScreen":b=
!0;default:this.options[c]=f}}b&&(this._overlayContainer.className=this._getClassName(),this._adjustDOM());this.dispatch("optionsChanged",{options:a})},getOptions:function(){return juic.set({},this.options)},getOption:function(a){return this.options[a]},setModal:function(a){SFDom[a?"addClass":"removeClass"](this.id,"modalOverlay")},openUI5Popup:function(){sap.ui.getCore().attachInit(function(){sap.ui.require(["sap/ui/core/Popup"],function(){setTimeout(function(){if(this.isRegistered()){this._popup||
(this._popup=new sap.ui.core.Popup(d(this),this.options.modal));var a=at=sap.ui.core.Popup.Dock.LeftTop;this._popup.open(0,a,at,document);this._initStaticAreaRef();this._popup.getContent().postRender()}}.bind(this),0)}.bind(this))}.bind(this))},_initStaticAreaRef:function(){if(b()){var a=jQuery(sap.ui.getCore().getStaticAreaRef());a.hasClass("sfOverlayMgr")||(a.addClass("sfOverlayMgr"),AccessibilityPrefs.isLowVisionEnabled()&&(a.addClass("globalLowVisionSupport"),a.addClass(AccessibilityPrefs.getLowVisionType())))}},
closeUI5Popup:function(){this._useUI5Popups&&(this._popup&&this._popup.close(0),this.isRegistered()&&this.cleanup())}});SFAbstractOverlayMgr.Overlay=a;window.SFOverlayMgr=new SFDefaultOverlayMgr})();function SFAbstractPositionManager(){}juic.extend(SFAbstractPositionManager,juic.EventTarget,{show:function(a){throw Error("SFAbstractPositionManager: Must implement show");},moveTo:function(a,b,d){throw Error("SFAbstractPositionManager: Must implement moveTo");}});
"undefined"==typeof SFPositionManager&&function(){function a(){}function b(a,b,l,v){var n=SFDom.getViewportRegion(),r=SFDom.getRegion(b),u=SFDom.getRegion(a),y=SFDom.getAncestorScale(b);if(Util.isRTL()){var q=SFDom.getDocumentWidth()-n.width;0<q&&(n=new SFRegion(n.top,n.right-q,n.bottom,n.left-q))}q=parseInt(SFDom.getStyle(document.documentElement,"padding-"+(Util.isRTL()?"left":"right")));0<q&&(n.width-=q,Util.isRTL()?n.left+=q:n.right-=q);var g=e(juic.$(a));0==u.width&&(u.width=document.getElementById(a).scrollWidth);
0==u.height&&(u.height=document.getElementById(a).scrollHeight);1!=y&&(r=new SFRegion(r.top,r.left+r.width*y,r.top+r.height*y,r.left));var m={fixPoint:{origin:{originId:b.id},menu:{}},overlay:{overlayId:SFOverlayMgr.getOverlayId(a)||juic.$(a).parentNode.id,width:u.width,height:u.height}},p={positionInfo:m};k(function(a){var b;b={axis:a,origin:h(l,a,"origin"),menu:h(l,a,"menu"),offset:h(l,a,"offset")};var z=u[a.dimensionType],e=d(b,r,z,!1),k=c(n,a,e,z),I=d(b,r,z,!0),E=c(n,a,I,z),y;y=!1;k&&(y=E?Math.abs(E)+
50<Math.abs(k):!0);e=y?I:e;k=y?E:k;E=y?f(a,b.origin):b.origin;b=y?f(a,b.menu):b.menu;k&&(v&&(e-=k,0>e&&(e=0)),p[a.newComponentDimension]=z-Math.abs(k));g&&(e-=n[a.regionStart]);m.fixPoint.origin[a.direction]=E;m.fixPoint.menu[a.direction]=b;m.overlay[a.regionStart]=e});return p}function d(a,b,c,e){var d=a.axis,k=a.origin,n=a.menu;a=a.offset;e&&(k=f(d,k),n=f(d,n),a*=-1);e=a;switch(k){case "middle":e+=(b[d.regionStart]+b[d.regionEnd])/2;break;default:e+=b[k]}switch(n){case "middle":e-=Math.round(c/
2);break;case "right":case "bottom":e-=c}return e}function h(a,b,c){return a&&a[c]&&a[c][b.direction]||b[c]}function c(a,b,c,f){var e=a[b.regionStart];a=a[b.regionEnd];f=c+f;if(e<=c&&f<=a)return 0;c=e-c;e=f-a;return c>e?-c:e}function f(a,b){return"middle"==b?"middle":b==a.regionStart?a.regionEnd:a.regionStart}function k(a){a.call(window.SFPositionManager,v.x);a.call(window.SFPositionManager,v.y)}function e(a){return a?"fixed"==SFDom.getStyle(a,"position")?!0:e(a.parentNode):!1}var v={x:{axisType:"x",
direction:"horizontal",dimensionType:"width",newComponentDimension:"newComponentWidth",regionStart:"left",regionEnd:"right",origin:Util.isRTL()?"right":"left",menu:Util.isRTL()?"right":"left",offset:0},y:{axisType:"y",direction:"vertical",dimensionType:"height",newComponentDimension:"newComponentHeight",regionStart:"top",regionEnd:"bottom",origin:"bottom",menu:"top",offset:0}},u=["component","originId","fixPoint","alwaysInViewport","showRelativeToViewport"],x={component:void 0,originId:void 0,fixPoint:void 0,
alwaysInViewport:void 0,showRelativeToViewport:void 0},l={component:juic.Component,originId:["string",juic.Config.htmlElementType(),null],fixPoint:["object","boolean",null],alwaysInViewport:["boolean",null],showRelativeToViewport:["boolean",null]};juic.extend(a,SFAbstractPositionManager,{showMenu:function(a,b,c){this.show(a,b,c)},show:function(a){a=juic.Config.convertArguments(arguments,u,x,l);juic.assert(a.component instanceof juic.Component,"[SFPositionManager] component must be a Component object");
SFOverlayMgr.addEventListener("overlayRendered",this,"_onOverlayRendered");this._componentId=a.component.id;this._origin=juic.$(a.originId);this._fixPoint=a.fixPoint;this._alwaysInViewport=a.alwaysInViewport;var b="boolean"==typeof a.showRelativeToViewport?a.showRelativeToViewport:e(this._origin);SFOverlayMgr.show(a.component,{modal:!1,viewport:b,css:{top:0,left:0}})},_onOverlayRendered:function(a){SFOverlayMgr.removeEventListener("overlayRendered",this);if(this._origin&&window.jQuery&&window.sap&&
sap.ui&&sap.ui.getCore){var b=null,c=jQuery(this._origin),f=c.closest(".sapMDialog");f.length&&(b=(b=sap.ui.getCore().byId(f.attr("id")))&&b.oPopup);!b&&(c=c.closest(".sf-overlay"),c.length&&(b=(b=juic.Component._registry[c.attr("id")])&&b._popup,c=jQuery("#"+a.overlayId).closest(".sf-overlay"),c.length&&(c=(c=juic.Component._registry[c.attr("id")])&&c._popup)))&&(c._parentPopup=b);if(b){for(;b._parentPopup;)b=b._parentPopup;b.setAutoCloseAreas([a.overlayId])}}this._moveMenu(this._componentId,this._origin,
this._fixPoint,this._alwaysInViewport)},moveTo:function(a,b,c,f){a instanceof juic.Component&&(a=a.id);juic.assert("string"==typeof a,"[SFPositionManager] componentId must be the string id of the component.");juic.assert(c,"[SFPositionManager] originId is required.");(c=juic.$(c))&&this._moveMenu(a,c,b,f)},_moveMenu:function(a,c,f,e){juic.$(a)&&juic.$(c)&&(c=b(a,c,f,e),f=c.positionInfo.overlay,c.componentId=a,isNaN(f.top)||isNaN(f.left)||SFOverlayMgr.css(a,{top:f.top+"px",left:f.left+"px"}),this.dispatch("positionFixed",
c))}});window.SFPositionManager=new a}();
"undefined"==typeof window.SFFluidLayout&&function(){function a(a){this.setOptions(a)}"none"!==window.fluidPageDefaultTo&&(juic.extend(a,juic.EventTarget,{_DEFAULT_MIN_LAYOUT_WIDTH:1024,_DEFAULT_MAX_LAYOUT_WIDTH:1168,_DEFAULT_FIORI3_MAX_LAYOUT_WIDTH:1280,_LAYOUT_X_PADDING:15,_DEFAULT_SCROLLBAR_WIDTH:40,_containerSize:null,_containerMaxed:!0,_pageContainerDOM:null,_MIN_HEIGHT:25,_pageContentId:"content",_headerId:"renderTopNavFixedWidthV12",_enabledResizeHeight:!1,_getPageContainer:function(){if(!this._pageContainerDOM)if(Util.isFiori3HeaderEnabled())this._pageContainerDOM=
Util.getGlobalPlacemat();else{var a=Util.getPageContainerId();this._pageContainerDOM=juic.$(a)}return this._pageContainerDOM},_noPaddingCheck:function(){if(window.fluidPageNoPadding||this.viewportWidth<=this._minLayoutWidth)this._getPageContainer().style.padding="0"},initDims:function(){var a=window.SFDom;if(!a)return!1;Util.isFiori3HeaderEnabled()&&this.setMaxLayoutWidth(this._DEFAULT_FIORI3_MAX_LAYOUT_WIDTH);if(!this._getPageContainer())return!1;this.viewportWidth=a.getViewportWidth();if(window.fluidPageDefaultTo)switch(window.fluidPageDefaultTo){case "restrictedMaximum":this.restrictedMax();
break;case "minimize":this.minimize();break;case "maximize":this.maximize()}else this._makePageFluid();this._noPaddingCheck();return!0},_makePageFluid:function(){this._getPageContainer().style.padding="";this.viewportWidth<=this._minLayoutWidth?this.minimize():this.viewportWidth>this._minLayoutWidth&&this.viewportWidth<=this._maxLayoutWidth?this.maximize():this.restrictedMax()},_getNumericStyle:function(a,d){return parseInt(SFDom.getComputedStyle(a,d),10)||0},windowResize:function(){this.initDims()&&
(1==this._containerMaxed&&this._containerSize&&"max"!=this._containerSize&&this.viewportWidth>this._containerSize&&(this._getPageContainer().style.width=this._containerSize+"px"),this._noPaddingCheck(),this._enabledResizeHeight&&this._resizeHeight(),this.dispatch("resize"))},_isFooterInsideContent:function(a){if(a)for(;a=a.parentNode;)if(a.id==this._pageContentId)return!0;return!1},_resizeHeight:function(){var a=juic.$(this._pageContentId);if(a){var d=juic.$("footer"),h=juic.$(this._headerId);this._isFooterInsideContent(d)&&
(d=null);var c=SFDom.getViewportHeight(),d=d?SFDom.getMargin(d)+d.offsetHeight:0,h=h?SFDom.getMargin(h)+h.offsetHeight:0,f=SFDom.getOffsets(a),c=Math.max(this._MIN_HEIGHT,c-d-h-f);a.style.height=c+"px"}},resizePageBy:function(a){this._containerSize=a=this._getPageContainer().offsetWidth+a;this._hasMaxedWidth(a)?(this.maximize(),this._containerMaxed=!0):this._getPageContainer().style.width=a+"px";window.fluidPageDefaultTo=null},resizePageTo:function(a){this._containerSize=a;this._hasMaxedWidth(a)?
(this.maximize(),this._containerMaxed=!0):this._getPageContainer().style.width=a+"px";window.fluidPageDefaultTo=null},restrictedMax:function(){this._getPageContainer().style.width=this._maxLayoutWidth+"px";this._getPageContainer().style.minWidth=this._maxLayoutWidth+"px";this._containerSize=this._maxLayoutWidth},maximize:function(){this._containerSize="max";this._containerMaxed=!0;this._getPageContainer().style.width="auto";this._getPageContainer().style.minWidth="auto";this._getPageContainer().style.padding=
"0 "+this._LAYOUT_X_PADDING+"px"},minimize:function(){var a=this._minLayoutWidth-this._DEFAULT_SCROLLBAR_WIDTH;this._containerSize=a;this._getPageContainer().style.width=a+"px";this._getPageContainer().style.minWidth=a+"px";this._noPaddingCheck()},_hasMaxedWidth:function(a){return this.viewportWidth<a},setOptions:function(a){a&&a.minWidth?this.setMinLayoutWidth(a.minWidth):this.setMinLayoutWidth(this._DEFAULT_MIN_LAYOUT_WIDTH);a&&a.maxWidth?this.setMaxLayoutWidth(a.maxWidth):this.setMaxLayoutWidth(this._DEFAULT_MAX_LAYOUT_WIDTH);
a&&a.headerId&&this.setHeaderId(a.headerId);a&&a.pageContentId&&this.setPageContentId(a.pageContentId);a&&a.enabledResizeHeight&&this.setEnabledResizeHeight(a.enabledResizeHeight)},setMinLayoutWidth:function(a){this._minLayoutWidth=a},getMinLayoutWidth:function(){return this._minLayoutWidth},setMaxLayoutWidth:function(a){this._maxLayoutWidth=a},getMaxLayoutWidth:function(){return this._maxLayoutWidth},setHeaderId:function(a){this._headerId=a},getHeaderId:function(){return this._headerId},setPageContentId:function(a){this._pageContentId=
a},getPageContentId:function(){return this._pageContentId},setEnabledResizeHeight:function(a){this._enabledResizeHeight=a},getEnabledResizeHeight:function(){return this._enabledResizeHeight}}),window.SFFluidLayout=new a,SFDOMEvent.ready(function(){var a=window.SFFluidLayout;a.initDims()&&(SFDOMEvent.addListener(window,"resize",a.windowResize,a,!0),setTimeout(function(){a.windowResize()},2E3))}))}();function SFLoading(a,b,d){this.register();this._init(a,b,d)}
juic.extend(SFLoading,juic.Component,{CLASS_ROUNDED_CORNERS:"globalRoundedCornersSmall",CLASS_LOADING_ICON_CONTAINER:"sfV12LoadingIconContainer",CLASS_BODY_LOADING_INDICATOR:"sfV12BodyLoadingIndicator",CLASS_SECTION_LOADING_INDICATOR:"sfV12SectionLoadingIndicator",CLASS_CENTER_LOADING_ICON:"juicBusyIndicatorPositionCenter",_init:function(a,b,d){this.setMsg(a||MSGS.COMMON_loading);this._hexColor=AccessibilityPrefs.isLowVisionEnabled()?"inherit":b||"#FFF";this.setConfig(d)},renderHtml:function(a){a.push('\x3cdiv id\x3d"',
this.id,'" class\x3d"juicBusyIndicatorAnimation juicBusyIndicatorAnimStandard ',this._loadingIndicatorType?this._loadingIndicatorType:"",'" \x3e');a.push("\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e");a.push('\x3cdiv id\x3d"',this.id,'_msg" aria-live\x3d"polite" role\x3d"status" class\x3d"hiddenAriaContent"\x3e\x3c/div\x3e');a.push("\x3c/div\x3e");if(a.addAfterRenderListener)a.addAfterRenderListener(this,"_afterRender");else{var b=this;setTimeout(function(){b._afterRender()},
0)}},_afterRender:function(a){if(a=juic.$(this.id+"_msg"))a.innerHTML=juic.escapeHTML(this._msg)},setConfig:function(a){a&&a.isCenterLoadingIndicator&&(this._loadingIndicatorType=this.CLASS_CENTER_LOADING_ICON)},setMsg:function(a){this._msg=a},remove:function(){this.hide();this.cleanup();var a=juic.$(this.id);a&&a.parentNode&&a.parentNode.removeChild(a)},hide:function(){this.dispatch("hide")}});function SFMatrixLayout(a,b){this.register();this._init(a,b)}SFMatrixLayout.FIRST_SECTION="first";
SFMatrixLayout.MIDDLE_SECTION="middle";SFMatrixLayout.LAST_SECTION="last";
SFMatrixLayout.prototype=function(){function a(a,b,c){var g=q[c],m=a[g.endRegionType];b=b[c];return b>=a[g.startRegionType]&&b<=m}function b(a,b,c){return null!=b&&a<b?b:null!=c&&a>c?c:a}function d(a,b,c){c=c||{};c[q[a].dimensionType]=b+"px";return c}function h(a,b){var g=d("x",a.width,b);return d("y",a.height,g)}function c(a,b){b&&(1<b.colSpan&&a.push(' colSpan\x3d"',b.colSpan,'"'),1<b.rowSpan&&a.push(' rowSpan\x3d"',b.rowSpan,'"'))}function f(a,b){b&&(1<=b.colSpan&&(a.colSpan=b.colSpan),1<=b.rowSpan&&
(a.rowSpan=b.rowSpan))}function k(a,b){b&&a.push(' class\x3d"',b,'"')}function e(a,b,c){return a&&null!=a[b]?a[b]:c}function v(a,b,c){a="x"==a;return{row:a?c:b,column:a?b:c}}function u(a,b){for(var g=0,c=a.length;g<c;g++)if(a[g]==b)return g;return-1}function x(a,b,p){b&&(a.push('\x3ctd id\x3d"',b.id),a.push('" class\x3d"',b.className,'"'),p||(a.push(' onmousedown\x3d"',b.onmousedown),a.push('" onmouseover\x3d"',b.onmouseover),a.push('" onmouseout\x3d"',b.onmouseout),a.push('" ontouchstart\x3d"',b.ontouchstart,
'"')),c(a,b),SFDom.renderStyle(a,b.style),a.push(' unselectable\x3d"on"\x3e'),b.renderSpacerMethod(a,b),a.push("\x3c/td\x3e"));return a}function l(a,b){var g=b.intersection||"x"==b.axisType?b.adjusterSize:1,c=b.intersection||"y"==b.axisType?b.adjusterSize:1;Util.browserInfo.ie?(a.push('\x3cimg src\x3d"',IMAGES["/ui/juic/img/_old.gif"],'" style\x3d"width: ',g,"px; height: "),a.push(c,'px; visibility: hidden"\x3e')):(a.push('\x3cdiv style\x3d"width: ',g,"px; height: "),a.push(c,'px;"\x3e\x3c/div\x3e'))}
function n(a,b,c){a=A(x([],c),a);b.parentNode.replaceChild(a[0],b)}function r(a,b,c,f,e){e&&(e=f,f instanceof Array&&(e=f[0],countCount=f.length),e=u(b,e),c>=e&&(c+=countCount));b=(e=b.length<=c)?null:b[c];if(f instanceof Array){c=0;for(var g=f.length;c<g;c++){var m=f[c];e?a.appendChild(m):a.insertBefore(m,b)}}else e?a.appendChild(f):a.insertBefore(f,b)}function y(a){for(var g=[],b=0,c=a.length;b<c;b++)g[b]=a[b];return g}function A(a,b){b.innerHTML="\x3ctable\x3e\x3ctr\x3e"+a.join("")+"\x3c/tr\x3e\x3c/table\x3e";
return y(b.firstChild.rows[0].cells)}var t=SFMatrixLayout.MIDDLE_SECTION,w=[SFMatrixLayout.FIRST_SECTION,t,SFMatrixLayout.LAST_SECTION],B="contentsChanged propertiesChanged spacingOptionsChanged requestAdjust intervalAdded intervalRemoved intervalMoved".split(" "),C=Util.isRTL(),q={x:{axisType:"x",oppositeAxisType:"y",cursorType:"col-resize",cellType:"column",spanType:"colSpan",dimensionType:"width",startRegionType:C?"right":"left",endRegionType:C?"left":"right",clientDimensionType:"clientWidth",
offsetDimensionType:"offsetWidth",scrollDimensionType:"scrollWidth",scrollPositionType:"scrollLeft",paddingStart:C?"padding-right":"padding-left",paddingEnd:C?"padding-left":"padding-right",scrollBarSize:Util.browserInfo.ipad?0:17},y:{axisType:"y",oppositeAxisType:"x",cursorType:"row-resize",cellType:"row",spanType:"rowSpan",dimensionType:"height",startRegionType:"top",endRegionType:"bottom",clientDimensionType:"clientHeight",offsetDimensionType:"offsetHeight",scrollDimensionType:"scrollHeight",scrollPositionType:"scrollTop",
paddingStart:"padding-top",paddingEnd:"padding-bottom",scrollBarSize:Util.browserInfo.ipad?0:17}};return juic.set(new juic.Component,{_init:function(a,b){var g=e(b,"dimension",null);this._adjusterSize=e(b,"adjusterSize",5);this._dragBothAdjusters=e(b,"dragBothAdjusters",!0);this._dragByResizing=e(b,"dragByResizing",!1);this._minimizeSpace=e(b,"minimizeSpace",!1);this._scrollableCells=e(b,"scrollableCells",!0);this._renderSpacerMethod=e(b,"renderSpacerMethod",l);this._scrollBarMgr=e(b,"scrollBarMgr");
this._hideScrollBars=e(b,"hideScrollBars",!1);this._className=e(b,"className");this._renderSpacerMethod||(this._renderSpacerMethod=l);this._scrollBarMgr&&(this._hideScrollBars=!0,this._scrollBarMgr.setAutoScroller(this.getAutoScroller()));var c;c=a instanceof SFMatrixCellManager?a:new SFMatrixCellManager(a,b);this.setCellManager(c);g&&this.setDimension(g)},setCellManager:function(a){juic.assert(a instanceof SFMatrixCellManager,"[SFMatrixLayout] The cell manager is not a SFMatrixCellManager");if(this._cellManager)for(var b=
0,g=B.length;b<g;b++)this._cellManager.removeEventListener(B[b],this);this._cellManager=a;b=0;for(g=B.length;b<g;b++)this._cellManager.addEventListener(B[b],this);this._axisData={};this._createAxisData("x");this._createAxisData("y");this._dimension&&this._refreshDimensions();this._updateContent()},getCellManager:function(){return this._cellManager},cleanup:function(a){for(var b=0,g=B.length;b<g;b++)this._cellManager.removeEventListener(B[b],this);this._cellManager.cleanup(a);this.unregister();this._autoScroller&&
this._autoScroller.removeEventListener("autoScroll",this)},handleEvent:function(a){switch(a.type){case "autoScroll":this._onAutoScroll(a);break;case "resize":this.setDimension({width:a.width,height:a.height});break;case "contentsChanged":this._updateCellContent(a.rowIndex,a.columnIndex);break;case "propertiesChanged":this._updateCellProperties(a.rowIndex,a.columnIndex);break;case "spacingOptionsChanged":this._updateSpacingOptions(a.axisType,a.index,a.oldOptions);break;case "requestAdjust":this._requestAdjust(a.rowIndex,
a.columnIndex,a.dimension,a.bounds);break;case "intervalAdded":this._intervalAdded(a.axisType,a.index0,a.index1);break;case "intervalRemoved":this._intervalRemoved(a.axisType,a.index0,a.index1);break;case "intervalMoved":this._intervalMoved(a.axisType,a.index0,a.index1,a.count)}},handleDragEvent:function(a){switch(a.type){case "dragStart":this._handleDragStart(a);break;case "drag":this._handleDrag(a);break;case "dragEnd":this._handleDragEnd(a)}},renderHtml:function(a){this._cellManager.clearCache();
a.push('\x3cdiv id\x3d"',this.id,'"');k(a,"sfMatrixLayout"+(this._className?" "+this._className:""));this._scrollBarMgr&&a.push(' onmouseover\x3d"',this.fireCode("_fireMouseOver"),'"');a.push("\x3e");this._renderContent(a);a.push("\x3c/div\x3e");return a},getDimension:function(){return this._dimension&&this._sizesAvailable?{width:this._getTotalDimensionAxis("x"),height:this._getTotalDimensionAxis("y")}:null},setDimension:function(a){juic.assert(a&&"number"==typeof a.width&&0<a.width&&"number"==typeof a.height&&
0<a.height,"[SFMatrixLayout] Dimension must provide positive width and height values");var b=this.getDimension();this._dimension={width:parseInt(a.width),height:parseInt(a.height)};b&&this._dimension.width==b.width&&this._dimension.height==b.height||this._refreshDimensions()},adjustDOM:function(){var a=SFDom.getSuggestedDimension(juic.$(this.id).parentNode);a&&this.setDimension(a)},getCellDimension:function(a,b){juic.assert(this._sizesAvailable,"[SFMatrixLayout] Cannot get cell sizes before they are available.");
this._validateIndices(a,b);if(this._sizesAvailable){var g=this._cellManager.getPlaceholderCell(a,b);g&&(a=g.rowIndex,b=g.columnIndex);g=this._cellManager.getCellSpan(a,b);return{width:this._getTotalSize("x",b,b+g.colSpan,!0),height:this._getTotalSize("y",a,a+g.rowSpan,!0)}}return{width:null,height:null}},setCellDimension:function(a,b,c){this._validateIndices(a,b);this._cellManager.getSpacingManager("x").setCustomSize(b,c);this._cellManager.getSpacingManager("y").setCustomSize(a,c);this._refreshDimensions()},
getSingleDimension:function(a,b){this._validateIndex(a,b);return this._sizesAvailable?this._axisData[a].sizes[b]:null},setSingleDimension:function(a,b,c){this._cellManager.getSpacingManager(a).setCustomSize(b,c);this._sizesAvailable&&this._refreshDimensions()},getAxisSizes:function(a){this._validateAxisType(a);return this._sizesAvailable?this._axisData[a].sizes.concat():null},getAllSizes:function(){return this._sizesAvailable?{y:this._axisData.y.sizes.concat(),x:this._axisData.x.sizes.concat()}:null},
setAxisSizes:function(a,b){this._cellManager.getSpacingManager(a).setSizes(b);this._sizesAvailable&&this._refreshDimensions()},setAllSizes:function(a,b){a.x&&a.y?this.setAllSizes(a.y,a.x):(this._cellManager.getSpacingManager("y").setSizes(a),this._cellManager.getSpacingManager("x").setSizes(b),this._sizesAvailable&&this._refreshDimensions())},broadcast:function(a,b){this._cellManager.broadcast(a,b)},scrollTo:function(a,b){this._validateIndices(a,b);var g=this._getScrollToRegion("y",a);this._getScrollToRegion("x",
b,g);this.getAutoScroller().scrollTo(g)},scrollToAxis:function(a,b){this._validateIndex(a,b);if(this._sizesAvailable&&this.getSectionName(a,b)){var g=this._getScrollToRegion(a,b);this.getAutoScroller().scrollToAxis(a,g)}},_getScrollToRegion:function(a,b,c){var g=q[a],m=this._axisData[a],p=this.getPageOffset(a,b),f=m.sizes[b];this._cellManager.isAdjustable(a,b)&&(f+=m.adjusterSize);c=c||{};c[g.startRegionType]=p;c[g.endRegionType]=p+f;return c},getAutoScroller:function(){this._autoScroller||(this._autoScroller=
new SFAutoScroller({scrollEl:this._getSectionId(t,t),extenderEl:this._getSectionExtenderId(t,t),autoIncreaseSize:!0}),this._autoScroller.addEventListener("autoScroll",this));return this._autoScroller},getPageOffset:function(a,b){var g=this.getPageOffsets(a,b||0);return g?g[b||0]:null},getPageOffsets:function(a,b){this._validateAxisType(a);var g=juic.$(this.id);if(g&&this._sizesAvailable){var c=q[a],m=this._axisData[a],f=this._getSectionIndices(a,t),e=[],c=juic.$(this._getSectionId(t,t))[c.scrollPositionType],
d=g=SFDom["get"+a.toUpperCase()](g);b=b||m.size-1;for(var k=0;k<m.size&&k<=b;k++)k==f[0]&&(d-=c),e.push(d),this._cellManager.isHidden(a,k)||(d+=m.sizes[k],this._cellManager.isAdjustable(a,k)&&(d+=m.adjusterSize)),k==f[f.length-1]&&(d=g+m[SFMatrixLayout.FIRST_SECTION+"Size"]+m.viewableSize);return e}return null},getSectionName:function(a,b){this._validateAxisType(a);var g=void 0;if(this._cellManager.isFrozen(a,b)){var c=this._getSectionIndices(a,t);b<c[0]||0==c.length?g=SFMatrixLayout.FIRST_SECTION:
b>c[c.length-1]?g=SFMatrixLayout.LAST_SECTION:juic.assert(!1,"[SFMatrixLayout] Invalid frozen section in middle")}else g=t;return g},setDragByResizing:function(a){this._dragByResizing=a},_validateIndex:function(a,b){this._validateAxisType(a);juic.assert("number"==typeof b&&0<=b&&b<this._axisData[a].size,"[SFMatrixLayout] Invalid index \x3d "+b)},_validateIndices:function(a,b){juic.assert("number"==typeof a&&0<=a&&a<this._axisData.y.size&&"number"==typeof b&&0<=b&&b<this._axisData.x.size,"[SFMatrixLayout] Invalid [rowIndex, columnIndex] \x3d ["+
a+", "+b+"]")},_validateAxisType:function(a){juic.assert(q[a],"[SFMatrixLayout] Invalid axisType: "+a)},_getCellId:function(a,b){return this.id+"cell:"+a+":"+b},_getAdjusterId:function(a,b,c,f){var g=q[a];a=v(a,b,c);return f?this.id+"int-adj:"+a.row+":"+a.column:this.id+g.cellType+"-adj:"+a.row+":"+a.column},_isAdjuster:function(a){return a&&a.id&&0<=a.id.indexOf("adj:")},_getSectionId:function(a,b){return this.id+a.charAt(0)+"-"+b.charAt(0)},_getSectionTableId:function(a,b){return this.id+a.charAt(0)+
"-"+b.charAt(0)+"-tbl"},_getSectionExtenderId:function(a,b){return this.id+a.charAt(0)+"-"+b.charAt(0)+"-ext"},_intervalAdded:function(a,b,c){juic.assert(0<=b&&c>=b,"[SFMatrixLayout] Invalid interval ["+b+", "+c+"]");for(var g=!!juic.$(this.id),m=this._axisData[a],f=q[a].oppositeAxisType,p=0;p<w.length;p++)for(var e=w[p],e=m[e+"Indices"],d=b,k=c,h=0,l=e.length;h<l;h++)e[h]>=d&&(e[h]+=k-d+1);for(p=b;p<=c;p++){for(var e=this.getSectionName(a,p),k=this._getSectionIndices(a,e),d=0==k.length,h=p,l=Math.max(h-
k[0],0),n=p;n>=h;n--)k.splice(l,0,n);if(g&&d)for(d=0;d<w.length;d++)k=w[d],0<this._getSectionIndices(f,k).length&&(k=v(a,e,k),juic.$(this._getSectionId(k.row,k.column)).style.display="")}m.size+=c-b+1;this._insertDOM(a,b,c);this._sizesAvailable&&this._refreshDimensions()},_intervalRemoved:function(a,b,c){juic.assert(0<=b&&c>=b,"[SFMatrixLayout] Invalid interval ["+b+", "+c+"]");for(var g=!!juic.$(this.id),m=0;m<w.length;m++){for(var f=w[m],p=this._getSectionIndices(a,f),e=p,d=b,k=c,h=0;h<e.length;)e[h]>=
d&&e[h]<=k?e.splice(h,Math.min(e.length-h,k-d+1)):(e[h]>=k&&(e[h]-=k-d+1),h++);if(0==p.length&&g)for(p=0;p<w.length;p++)e=v(a,f,w[p]),juic.$(this._getSectionId(e.row,e.column)).style.display="none"}this._axisData[a].size-=c-b+1;this._removeDOM(a,b,c);this._sizesAvailable&&this._refreshDimensions()},_intervalMoved:function(a,b,c,f){var g=this.getSectionName(a,b),m=this.getSectionName(a,c),p=this.getSectionName(a,c+f-1);juic.assert(g==m&&g==p,"[SFMatrixLayout] Cannot move a column or row across different sections");
m=this._axisData[a].sizes;p=m.splice(b,f);p.splice(0,0,c,0);m.splice.apply(m,p);if(juic.$(this.id)){for(m=0;m<w.length;m++)"y"==a?this._moveRowDOM(g,w[m],b,c,f):this._moveColumnDOM(g,w[m],b,c,f);this._correctDOM(a,Math.min(b,c))}},_refreshDimensions:function(){this.getDimension();for(var a in q)this._updateAxisData(a);if(!this._hideScrollBars||this._scrollBarMgr)for(a in q)this._updateAxisDataScroll(a);this._sizesAvailable=!0;this._adjustDOM();a=this._cellManager.size();for(var b=0;b<a.height;b++)for(var c=
this._cellManager.isHidden("y",b),f=0;f<a.width;f++){var e=this._cellManager.isHidden("x",f);c||e||this._cellManager.resize(b,f,this.getCellDimension(b,f))}this._updateScrollManager()},_updateContent:function(){var a=juic.$(this.id);a&&(SFDom.updateStyle(a,h(this.getDimension())),a.innerHTML=this._renderContent([]).join(""))},_updateCellContent:function(a,b){if(juic.$(this.id)&&!this._cellManager.getPlaceholderCell(a,b)){var c=this._cellManager.getCellSpan(a,b),c=this._firstVisibleRowIndex(a,c);0>
c&&(c=a);var c=this._getCellId(c,b),g=this._cellManager.get(a,b);g&&g.render?g.render(c):juic.$(c).innerHTML=g?juic.escapeHTML(g.toString()):"";this._cellManager.resize(a,b,this.getCellDimension(a,b))}},_renderContent:function(a){a.push('\x3cdiv id\x3d"',this.id,'adjusters" class\x3d"adjusters"\x3e\x3c/div\x3e');a.push('\x3ctable id\x3d"',this.id,'outer" class\x3d"outer-table" cellpadding\x3d"0"\x3e\x3ctbody\x3e');for(var b=0;b<w.length;b++)this._renderSectionRow(a,w[b]);this._scrollBarMgr&&(a.push('\x3ctr\x3e\x3ctd colspan\x3d"3"\x3e'),
this._scrollBarMgr.getHorizontal().renderHtml(a),a.push("\x3c/td\x3e\x3ctd\x3e"),this._scrollBarMgr.getSpacer().renderHtml(a),a.push("\x3c/td\x3e\x3c/tr\x3e"));a.push("\x3c/tbody\x3e\x3c/table\x3e");return a},_renderSectionRow:function(a,b){this._getSectionIndices("y",b);a.push("\x3ctr\x3e");for(var c=0;c<w.length;c++)this._renderSection(a,b,w[c]);this._scrollBarMgr&&b==SFMatrixLayout.FIRST_SECTION&&(a.push('\x3ctd rowspan\x3d"3"\x3e'),this._scrollBarMgr.getVertical().renderHtml(a),a.push("\x3c/td\x3e"));
a.push("\x3c/tr\x3e");return a},_renderSection:function(a,b,c){var g=b==t,f=c==t,m=this._getOverflowStyle(g&&f),p=null,e=this._getSectionIndices("y",b),d=b+"-row "+c+"-column";if(this._sizesAvailable){var l=this._getSectionDimension(b,c);h(l,m);g&&f||(l.width+=f?30:0,l.height+=g?30:0,p=h(l))}0==e.length&&(m.display="none");a.push('\x3ctd\x3e\x3cdiv id\x3d"',this._getSectionId(b,c),'"');k(a,d);g&&f&&this._frozenFlag&&a.push(' onscroll\x3d"',this.fireCode("_fireScroll"),'"');SFDom.renderStyle(a,m);
a.push('\x3e\x3cdiv id\x3d"',this._getSectionExtenderId(b,c),'" class\x3d"extender"');SFDom.renderStyle(a,p);a.push('\x3e\x3ctable id\x3d"',this._getSectionTableId(b,c),'" class\x3d"inner-table" cellpadding\x3d"0"\x3e\x3ctbody\x3e');b=0;for(g=e.length;b<g;b++)this._renderRow(a,e[b],c);a.push("\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e");return a},_renderRow:function(a,b,c){var g=null,f=this._cellManager.getSpacingOption("y",b,"className");this._cellManager.isHidden("y",b)&&(g=
{display:"none"});a.push("\x3ctr");k(a,f);SFDom.renderStyle(a,g);a.push("\x3e");c=this._getSectionIndices("x",c);for(var m=0,e=c.length;m<e;m++)this._renderCell(a,b,c[m]);a.push("\x3c/tr\x3e");if(this._cellManager.isAdjustable("y",b)){a.push("\x3ctr");k(a,f);SFDom.renderStyle(a,g);a.push("\x3e");m=0;for(e=c.length;m<e;m++)this._renderRowAdjuster(a,b,c[m]);a.push("\x3c/tr\x3e")}return a},_renderCell:function(a,b,f){var g=this._cellManager.get(b,f),m=this._cellManager.getPlaceholderCell(b,f),e=this._cellManager.getCellProperties(b,
f),p=e.header||this._cellManager.getSpacingOption("y",b,"header")||this._cellManager.getSpacingOption("x",f,"header"),d=this._getCellStyle(b,f),p=p?"th":"td",h=null,l=this._cellManager.getSpacingOption("x",f,"className"),n=this._getActualSpan(b,f),u=this._cellManager.isHidden("x",f),v=this._cellManager.isHidden("y",b),u=v||u;if(m){var q=this._cellManager.getCellSpan(m.rowIndex,m.columnIndex),q=this._firstVisibleRowIndex(m.rowIndex,q);q==b&&f==m.columnIndex?(g=this._cellManager.get(m.rowIndex,m.columnIndex),
d=this._getCellStyle(m.rowIndex,m.columnIndex),n=this._getActualSpan(m.rowIndex,m.columnIndex),u=!1):u=!0}else q=this._cellManager.getCellSpan(b,f),q=this._firstVisibleRowIndex(b,q),v&&q>b?n=g=null:u=0>=n.rowSpan||0>=n.colSpan;u&&(h={display:"none"});a.push("\x3c",p);SFDom.renderStyle(a,h);k(a,l);c(a,n);a.push('\x3e\x3cdiv id\x3d"',this._getCellId(b,f),'"');k(a,e.className);SFDom.renderStyle(a,d);a.push("\x3e");g&&(g.renderHtml?g.renderHtml(a):a.push(juic.escapeHTML(g.toString())));a.push("\x3c/div\x3e\x3c/",
p,"\x3e");x(a,this._getAdjusterInfo("x",f,b),0==this._adjusterSize);return a},_getCellStyle:function(a,b){var c={},g=this._cellManager.getCellProperties(a,b);c.overflow=(null==g.scrollable?this._scrollableCells:g.scrollable)?"auto":"hidden";this._sizesAvailable&&(g=this.getCellDimension(a,b),h(g,c));return c},_updateCellProperties:function(a,b){var c=juic.$(this._getCellId(a,b));if(c){var g=this._cellManager.getCellProperties(a,b);c.className=g.className||"";SFDom.updateStyle(c,this._getCellStyle(a,
b))}},_updateSpacingOptions:function(a,b,c){var g=this._cellManager.isHidden(a,b);g!=c.hidden&&(this._setHiddenDOM(a,b,g),this._refreshDimensions());g=this._cellManager.isAdjustable(a,b);juic.assert(g==c.adjustable,"[SFMatrixLayout] Cannot change the adjustable property");g=this._cellManager.getSpacingOption(a,b,"className");g!=c.className&&this._setClassName(a,b,g)},_getOverflowStyle:function(a){var b={overflow:"hidden"};if(a&&this._sizesAvailable&&!this._hideScrollBars){a=this._isScrollRequired("x");
var c=this._isScrollRequired("y");a||c?(b.overflow="",b["overflow-x"]=a?"auto":"hidden",b["overflow-y"]=c?"auto":"hidden"):(b["overflow-x"]="",b["overflow-y"]="")}return b},_renderRowAdjuster:function(a,b,c){x(a,this._getAdjusterInfo("y",b,c));x(a,this._getAdjusterInfo("y",b,c,!0));return a},_insertDOM:function(a,b,c){if(juic.$(this.id)){for(var g=this.getSectionName(a,b),f=q[a].oppositeAxisType,e=this._getSectionIndices(a,g),m=this._countAdjustableSpacing(a,e[0],b),p=null,d=b;d<=c;d++){if(d>b){var k=
this.getSectionName(a,d);k!=p&&(p=k,adjusterCount=0)}for(k=0;k<w.length;k++){var h=w[k],l=this._getSectionIndices(f,h);if(0<l.length){var p=v(a,g,h),n=juic.$(this._getSectionTableId(p.row,p.column)).tBodies[0],t=this._getScratchPad(),x=u(e,d)+m;if("y"==a)l=this._renderRow([],d,h),t.innerHTML="\x3ctable\x3e"+l.join("")+"\x3c/table\x3e",t=y(t.firstChild.rows),r(n,n.rows,x,t);else for(var F=h=0;F<l.length;F++){var B=l[F],C=this._cellManager.isAdjustable(f,B),H=A(this._renderCell([],B,d),t),G=n.rows[F+
h];r(G,G.cells,x,H);C&&(G=n.rows[F+h+1],H=A(this._renderRowAdjuster([],B,d),t),r(G,G.cells,x,H),h++)}}}this._cellManager.isAdjustable(a,d)&&m++}this._correctDOM(a,b)}},_removeDOM:function(a,b,c){if(juic.$(this.id)){for(var g=this._axisData[a],f=this._axisData[q[a].oppositeAxisType],e=b;e<=c;e++)for(var m=0;m<f.size;m++){var p=v(a,e,m);if(p=juic.$(this._getCellId(p.row,p.column))){var d=p.parentNode,k=d.parentNode,h=k.parentNode,p=u(k.cells,d),l=u(h.rows,k),n=k.cells[p+1],l=h.rows[l+1],r=this._isAdjuster(n),
t=l&&this._isAdjuster(l.cells[0]);k.removeChild(d);"y"==a&&h.removeChild(k);r&&k.removeChild(n);t&&("y"==a?h.removeChild(l):(d=l.cells[p],r&&l.removeChild(l.cells[p+1]),l.removeChild(d)))}}b<g.size&&this._correctDOM(a,b)}},_setHiddenDOM:function(a,b,c){if(juic.$(this.id)){for(var g=q[a],f=q[a].oppositeAxisType,e=this._axisData[f],m=b,p=0;p<e.size;p++){var d=v(a,b,p);(d=this._cellManager.getPlaceholderCell(d.row,d.column))&&(m=Math.min(m,d[g.cellType+"Index"]))}if("y"==a)for(g=this._cellManager.isAdjustable(a,
b),c=c?"none":"",e=0;e<w.length;e++)p=this._getSectionIndices(f,w[e]),0<p.length&&(d=juic.$(this._getCellId(b,p[0])).parentNode.parentNode,d.style.display=c,g&&(p=d.parentNode,d=u(p.rows,d),p.rows[d+1].style.display=c));this._correctDOM(a,m,b)}},_setClassName:function(a,b,c){if(juic.$(this.id)){var g=this._axisData[q[a].oppositeAxisType];if("x"==a)for(a=0;a<g.size;a++){var f=juic.$(this._getCellId(a,b));f&&(f.parentNode.className=c)}else{var g=this.getSectionName(a,b),f=this._getSectionIndices(a,
g),e=u(f,b);b=this._countAdjustableSpacing(a,f[0],b)+e;for(a=0;a<w.length;a++)if(f=juic.$(this._getSectionTableId(g,w[a])).tBodies[0].rows[b])f.className=c}}},_moveRowDOM:function(a,b,c,f,e){b=this._getSectionIndices("x",b);if(0<b.length){a=this._getSectionIndices("y",a);var g=this._countAdjustableSpacing("y",a[0],f);a=u(a,f)+g;for(var g=[],m=0;m<e;m++){var p=juic.$(this._getCellId(c+m,b[0])).parentNode.parentNode,d=p.parentNode,k=u(d.rows,p);this._cellManager.isAdjustable("y",f);g.push(p);this._cellManager.isAdjustable("y",
f+m)&&g.push(d.rows[k+1])}r(d,d.rows,a,g,!0)}},_moveColumnDOM:function(a,b,c,f,e){var g=this._getSectionIndices("y",b);if(0<g.length){var m=this._getSectionIndices("x",a),p=this._countAdjustableSpacing("x",m[0],f),p=u(m,f)+p;a=juic.$(this._getSectionTableId(b,a));for(var m=juic.$(this._getCellId(g[0],m[0])),m=u(a.rows,m.parentNode.parentNode),d=b=0;d<g.length;d++){for(var k=m+d+b,h=g[d],z=this._cellManager.isAdjustable("y",h),l=a.rows[k],k=a.rows[k+1],D=[],n=[],v=0;v<e;v++){var q=this._cellManager.isAdjustable("x",
f+v),t=juic.$(this._getCellId(h,c+v)).parentNode,x=u(l.cells,t);D.push(t);q&&D.push(l.cells[x+1]);z&&(n.push(k.cells[x]),q&&n.push(k.cells[x+1]))}z&&r(k,k.cells,p,n,!0);r(l,l.cells,p,D,!0);z&&b++}}},_correctDOM:function(a,b,c){var g=this._axisData[a];c=c||g.size-1;var g=this.getSectionName(a,b),f=this._getSectionIndices(a,g),e=this._countAdjustableSpacing(a,f[0],b);u(f,b);for(f=b;f<=c;f++){if(f>b){var m=this.getSectionName(a,f);m!=g&&(g=m,e=0)}for(m=0;m<w.length;m++){var p=this._correctSectionDOM(a,
f,e,g,w[m]);c=Math.max(c,f+p-1)}this._cellManager.isAdjustable(a,f)&&e++}this._handleMissingRow(a,b,c)},_correctSectionDOM:function(a,b,c,f,e){var g=q[a],m=g.oppositeAxisType,p=this._getSectionIndices(m,e),d=1;if(0<p.length){var k=this._getSectionIndices(a,f),k=u(k,b);f=v(a,f,e);f=juic.$(this._getSectionTableId(f.row,f.column));for(var h=e=0,l=p.length;h<l;h++){var z=p[h],D=this._cellManager.isAdjustable(m,z),z=v(a,{index:b,sectionIndex:k+c},{index:z,sectionIndex:h+e});this._correctCellDOM(f,z.row.index,
z.row.sectionIndex,z.column.index,z.column.sectionIndex);z=this._cellManager.getCellSpan(z.row.index,z.column.index);d=Math.max(d,z[g.spanType]);D&&e++}}return d},_handleMissingRow:function(a,b,c){for(var g=this._axisData[q[a].oppositeAxisType];b<=c;b++)for(var e=0;e<g.size;e++){var m=v(a,b,e),p=this._cellManager.getCellSpan(m.row,m.column);if(1<p.colSpan||1<p.rowSpan){var d=this._firstVisibleRowIndex(m.row,p);if(0<=d){var k=this._findCellWithContents(m.row,m.column,p),p=this._getActualSpan(m.row,
m.column),h=juic.$(this._getCellId(d,m.column));if(k&&(k.rowIndex!=d||k.columnIndex!=m.column)&&(m=juic.$(this._getCellId(k.rowIndex,k.columnIndex)),m!=h)){d=m;k=h;if(d!=k)for(var l=!0,n=d.childNodes.length-1;0<=n;n--){var u=d.childNodes[n];l?k.appendChild(u):k.insertBefore(u,k.firstChild);l=!1}m.parentNode.style.display="none"}f(h.parentNode,p);0<p.colSpan&&0<p.rowSpan&&(h.parentNode.style.display="")}}}},_firstVisibleRowIndex:function(a,b){for(var c=0;c<b.rowSpan;c++)if(!this._cellManager.isHidden("y",
a+c))return a+c;return-1},_findCellWithContents:function(a,b,c){for(var g=0;g<c.rowSpan;g++)for(var f=0;f<c.colSpan;f++)if(0<juic.$(this._getCellId(a+g,b+f)).childNodes.length)return{rowIndex:a+g,columnIndex:b+f};return null},_correctCellDOM:function(a,b,c,e,d){var g=a.rows[c].cells[d],m=this._getActualSpan(b,e),p=this._getScratchPad(),k=a.rows[c];a=a.rows[c+1];var h=this._isCellVisible(b,e);c=this._getAdjusterInfo("x",e,b);var l=this._getAdjusterInfo("y",b,e),z=this._getAdjusterInfo("y",b,e,!0);
g.firstChild.id=this._getCellId(b,e);f(g,m);g.style.display=h?"":"none";c&&(b=k.cells[d+1],n(p,b,c));l&&(b=a.cells[d],n(p,b,l));z&&(b=a.cells[d+1],n(p,b,z))},_getActualSpan:function(a,b){if(this._cellManager.getPlaceholderCell(a,b))return{colSpan:0,rowSpan:0};var c=this._cellManager.getCellSpan(a,b);return{colSpan:this._getActualSpanAxis("x",b,c.colSpan),rowSpan:this._getActualSpanAxis("y",a,c.rowSpan)}},_getActualSpanAxis:function(a,b,c){for(var f=!0,g=0,e=0;e<c;e++){var m=b+c-e-1;this._cellManager.isHidden(a,
m)||(g++,!f&&this._cellManager.isAdjustable(a,m)&&g++,f=!1)}return g},_isCellVisible:function(a,b){var c;this._cellManager.getPlaceholderCell(a,b)?c=!1:(cellSpan=this._getActualSpan(a,b),c=0>=cellSpan.rowSpan||0>=cellSpan.colSpan?!1:1<cellSpan.rowSpan||1<cellSpan.colSpan?!0:!this._cellManager.isHidden("x",b)&&!this._cellManager.isHidden("y",a));return c},_isAdjusterVisible:function(a,b,c,f){var g=q[a],e=g.oppositeAxisType,d=v(a,b,c),m=this._cellManager.isHidden(a,b),p=this._cellManager.isHidden(e,
c);if(m=!m&&!p)(p=this._cellManager.getPlaceholderCell(d.row,d.column))?d=this._cellManager.getCellSpan(p.rowIndex,p.columnIndex):(p={rowIndex:d.row,columnIndex:d.column},d=this._cellManager.getCellSpan(d.row,d.column)),g=d[g.spanType],m=this._isLastVisibleSpace(a,b,("x"==a?p.columnIndex:p.rowIndex)+g-1),f&&(a="x"==a?p.rowIndex:p.columnIndex,g=d[q[e].spanType],m=m||this._isLastVisibleSpace(e,c,a+g-1));return m},_isLastVisibleSpace:function(a,b,c){for(;c>b;c--)if(!this._cellManager.isHidden(a,c))return!1;
return!0},_getAdjusterInfo:function(a,b,c,f){var g=q[a],e=g.oppositeAxisType;if(!this._cellManager.isAdjustable(a,b)||f&&!this._cellManager.isAdjustable(e,c))return null;var d=this._axisData[a],m=v(a,b,c),d={axisType:a,rowIndex:m.row,columnIndex:m.column,intersection:f,adjusterSize:d.adjusterSize,renderSpacerMethod:this._renderSpacerMethod};this._isAdjusterVisible(a,b,c,f)||(d.style={display:"none"});d.id=this._getAdjusterId(a,b,c,f);g=[g.cellType+"-adjuster"];f&&g.push("intersection");d.onmouseover=
this.fireCode("_setAdjusterHover",a,b,!0);d.onmouseout=this.fireCode("_setAdjusterHover",a,b,!1);f&&this._dragBothAdjusters?(d.onmousedown=this.fireCode("_fireIntersectionDragStart",m.row,m.column),d.ontouchstart=this.fireCode("_fireIntersectionDragStart",m.row,m.column),d.onmouseover+=this.fireCode("_setAdjusterHover",e,c,!0),d.onmouseout+=this.fireCode("_setAdjusterHover",e,c,!1)):(f&&g.push("row-only"),d.onmousedown=this.fireCode("_fireAdjusterDragStart",a,b),d.ontouchstart=this.fireCode("_fireAdjusterDragStart",
a,b));d.className=g.join(" ");return d},_countAdjustableSpacing:function(a,b,c,f){for(var g=0;b<c;b++)f&&this._cellManager.isHidden(a,b)||this._cellManager.isAdjustable(a,b)&&g++;return g},_getScratchPad:function(){this._scratchPad||(this._scratchPad=document.createElement("div"));return this._scratchPad},_getSectionIndices:function(a,b){return this._axisData[a][b+"Indices"]},_fireMouseOver:function(){var a=juic.$(this.id);this._fireMouseOverDOMCache!==a&&(this._fireMouseOverDOMCache=a,a=/Firefox/i.test(navigator.userAgent)?
"DOMMouseScroll":"mousewheel",SFDOMEvent.addListener(this.id,a,this._fireMouseWheel,this))},_fireMouseWheel:function(a){var b=0;a=a||window.event;a.wheelDelta?(b=a.wheelDelta/120,window.opera&&(b=-b)):a.detail&&(b=-a.detail/3);for(var c=a.axis==a.VERTICAL_AXIS?"y":"x",f=20*(0>b?1:0<b?-1:0),g=juic.$(this.id),e=SFDOMEvent.getTarget(a),d=this._scrollBarMgr.getHorizontal().id,k=this._scrollBarMgr.getVertical().id;e!=g&&e.id!=d&&e.id!=k;){if("auto"==(SFDom.getStyle(e,"overflow-"+c)||SFDom.getStyle(e,"overflow"))){var h;
h=q[c];var l=e[h.scrollPositionType];h=0>f?0<l:l<e[h.scrollDimensionType]-e[h.clientDimensionType];if(h)return}e=e.parentNode}b&&this._isScrollRequired(c)&&(b=[f],"x"==c?b.push(0):b.splice(0,0,0),c=this.getAutoScroller(),c.scrollMove.apply(c,b)&&SFDOMEvent.stopEvent(a))},_fireScroll:function(){this._frozenFlag&&(this._setScrollOnAxis("x"),this._setScrollOnAxis("y"));this._updateScrollManager()},_setScrollOnAxis:function(a){for(var b=juic.$(this._getSectionId(t,t)),c=0;c<w.length;c++){var f=w[c];if(f!=
t){var f=v(a,t,f),g=this._getSectionId(f.row,f.column),f=this._getSectionExtenderId(f.row,f.column),e=b,d=a;if(g=juic.$(g)){var d=q[d],k=d.scrollPositionType,e=e[k],h=g[d.scrollDimensionType],l=h-g[d.clientDimensionType];e>l&&(juic.$(f).style[d.dimensionType]=h+e-l+"px");g[k]=e}}}},_fixScrollBars:function(){var a=juic.$(this._getSectionExtenderId(t,t));a.style.width="";a.style.height="";if(this._scrollBarMgr){var a=juic.$(this._getSectionId(t,t)),b=this._isScrollRequired("x"),c=this._isScrollRequired("y");
this._fixScrollBar("x",a,b,c);this._fixScrollBar("y",a,c,b)}this._fireScroll()},_fixScrollBar:function(a,b,c,f){c&&(c=q[a],a=this._axisData[a],f=f?this._getScrollBarSize(c.oppositeAxisType):0,b[c.scrollPositionType]=Math.min(a.middleSize-a.viewableSize+f,b[c.scrollPositionType]))},_updateScrollManager:function(){if(this._scrollBarMgr){this.getDimension();var a=this.getAutoScroller().getScrollInfo(),b={},c;for(c in q)b[c]=this._getScrollInfoAxis(c,a&&a[c]);this._scrollBarMgr.update(this.getDimension(),
b)}},_getScrollInfoAxis:function(a,b){if(this._isScrollRequired(a)){var c=this._axisData[a];if(b)return b.size=c.middleSize,b.position=Math.min(c.middleSize-b.scrollArea,b.position),b;if(this._sizesAvailable)return{size:c.middleSize,scrollArea:c.viewableSize,position:0}}return null},_fireAdjusterDragStart:function(a,b,c){this._adjusterInfo={};this._adjusterInfo[a]={cellIndex:b};c=c||window.event;SFDOMEvent.stopEvent(c);SFDragDropMgr.handleDragStart(c,this,{useShim:!0,clickTimeThreshold:0,shimCursor:q[a].cursorType})},
_fireIntersectionDragStart:function(a,b,c){this._adjusterInfo={x:{cellIndex:b},y:{cellIndex:a}};c=c||window.event;SFDOMEvent.stopEvent(c);SFDragDropMgr.handleDragStart(c,this,{useShim:!0,shimCursor:"move"})},_fireAdjusterMouseOver:function(a,b){this._setAdjusterHover(a,b,!0)},_fireAdjusterMouseOut:function(a,b){this._setAdjusterHover(a,b,!1)},_setAdjusterHover:function(a,b,c,f){var e=q[a].oppositeAxisType,g=this._axisData[e].size;c=c?"addClass":"removeClass";f="string"==typeof f?f:"hover";for(var d=
0;d<g;d++)if(SFDom[c](this._getAdjusterId(a,b,d),f),this._cellManager.isAdjustable(e,d))SFDom[c](this._getAdjusterId(a,b,d,!0),f)},_handleDragStart:function(a){a=a.origin;for(var b in this._adjusterInfo){var c=this._adjusterInfo[b],f=c.cellIndex,e=this._axisData[b].sizes[f];c.originPoint=a;c.destinationPoint=a;this._dragByResizing?this._setAdjusterHover(b,c.cellIndex,!0,"adjusting"):this._showHoveringLine(b,f,e)}},_handleDrag:function(a){a=a.point;this._handleDragAxis("x",a);this._handleDragAxis("y",
a);this._dragByResizing&&this._refreshDimensions()},_handleDragAxis:function(b,c){var f=this._adjusterInfo[b];if(f){var e=f.originPoint,g=f.cellIndex,d=c[b]-e[b],e=this._cellManager.getSpacingManager(b),d=e.getBounds(g)[0>d?"minSize":"maxSize"];f.destinationPoint=c;var k=this._getAdjustedSize(b,g,c);this._dragByResizing?e.setCustomSize(g,k):this._moveHoveringLine(b,g,k);k!=d&&(e=f.originPoint,c=f.destinationPoint,f=juic.$(this._getSectionId(t,t)),g=SFDom.getRegion(f),e=a(g,e,b),g=a(g,c,b),e&&!g?(this._scrollBarMgr||
(f.style["overflow"+b.toUpperCase()]="auto"),this.getAutoScroller().autoScrollAxis(c,b,!0)):this._stopAutoScroll(b))}},_handleDragEnd:function(a){a=a.point;this._stopAutoScroll();if(this._dragByResizing)for(var b in this._adjusterInfo)this._setAdjusterHover(b,this._adjusterInfo[b].cellIndex,!1,"adjusting");else this._hideHoveringLine();this._adjustAxis("x",a);this._adjustAxis("y",a);this._refreshDimensions();this.dispatch("dimensionAdjusted")},_adjustAxis:function(a,b){var c=this._adjusterInfo[a];
if(c){var c=c.cellIndex,f=this._getAdjustedSize(a,c,b);this._cellManager.getSpacingManager(a).setCustomSize(c,f)}},_onAutoScroll:function(){this._makingAdjustments&&(this._onAutoScrollAxis("x"),this._onAutoScrollAxis("y"),this._dragByResizing&&this._refreshDimensions());this._fireScroll()},_onAutoScrollAxis:function(a){var b=this._adjusterInfo[a];if(b){var c=b.cellIndex,f=b.adjustedSize,b=this._getAdjustedSize(a,c,b.destinationPoint);b!=f?this._dragByResizing?this._cellManager.getSpacingManager(a).setCustomSize(c,
b):this._moveHoveringLine(a,c,b):this._stopAutoScroll(a)}},_getAdjustedSize:function(a,c,f){var e=Util.isRTL(),d=this._axisData[a],g=q[a],k=this.getSectionName(a,c)==SFMatrixLayout.MIDDLE_SECTION,m=this._isScrollRequired(g.oppositeAxisType)?this._getScrollBarSize(a):0,p=SFDom.getRegion(this.id+"outer");k&&(p[g.endRegionType]-=d[SFMatrixLayout.LAST_SECTION+"Size"]);k=p[g.startRegionType]-(e?m+d.adjusterSize:0);g=p[g.endRegionType]-(e?0:m+d.adjusterSize);p=this._getAdjusterOffset(a,c);p=(e?g:k)+p;f=
(e?SFDom.getViewportWidth()-m-f[a]:f[a])-Math.floor(d.adjusterSize/2);e=b(f,e?g:k,e?k:g);d=d.sizes[c]+e-p;a=this._cellManager.getSpacingManager(a).getBounds(c);return b(d,a.minSize,a.maxSize)},_getAdjusterOffset:function(a,b){var c=q[a],f=this._axisData[a],e=f.sizes[b];this._getSectionIndices(a,t).contains(b)&&(e-=juic.$(this._getSectionId(t,t))[c.scrollPositionType]);for(c=0;c<b;c++)this._cellManager.isHidden(a,c)||(e+=f.sizes[c],this._cellManager.isAdjustable(a,c)&&(e+=f.adjusterSize));return e},
_showHoveringLine:function(a,b,c){this._makingAdjustments=!0;this._adjusterInfo[a].adjustedSize=c;var f=q[a],e=q[f.oppositeAxisType],d=this._axisData[a];b=this._getAdjusterOffset(a,b)+(c-d.sizes[b]);this._hoveringLines||(this._hoveringLines={});c=juic.$(this.id+"hoveringLine:"+a);c||(c=document.createElement("div"),c.className=f.cellType+"-adjuster hovering-cell-adjuster",c.setAttribute("id",this.id+"hoveringLine:"+a),c.style.display="none",c.style.position="absolute",c.style[f.dimensionType]=d.adjusterSize+
"px",c.style[e.startRegionType]="0px",c.style.zIndex="99999",juic.$(this.id+"adjusters").appendChild(c),this._hoveringLines[a]=c);a=this.getDimension()[e.dimensionType];c.style[e.dimensionType]=a+"px";c.style[f.startRegionType]=b+"px";c.style.display=""},_moveHoveringLine:function(a,b,c){var f=this._hoveringLines&&this._hoveringLines[a];if(f&&this._makingAdjustments){this._adjusterInfo[a].adjustedSize=c;var e=q[a],d=this._axisData[a];a=this._getAdjusterOffset(a,b);f.style[e.startRegionType]=a+(c-
d.sizes[b])+"px"}},_hideHoveringLine:function(){this._makingAdjustments=!1;for(var a in this._hoveringLines)this._hoveringLines[a].style.display="none"},_stopAutoScroll:function(a){this._autoScroller&&this._autoScroller.stopScrolling(a)},_createAxisData:function(a){var b=q[a],c=this._cellManager.size()[b.dimensionType],f=this._axisData[a]={size:c};f.adjusterSize="number"!=typeof this._adjusterSize&&this._adjusterSize[a]?this._adjusterSize[a]:this._adjusterSize;for(var e=0;e<w.length;e++)f[w[e]+"Indices"]=
[];for(var d=this._getSectionIndices(a,SFMatrixLayout.FIRST_SECTION),g=this._getSectionIndices(a,t),k=this._getSectionIndices(a,SFMatrixLayout.LAST_SECTION),h=!1,e=0;e<c;e++)this._cellManager.isFrozen(a,e)?(this._frozenFlag=!0,h?k.push(e):d.push(e)):(juic.assert(0==k.length,"Cannot have more than one section of unfrozen "+b.cellType+"s"),h=!0,g.push(e));return f},_updateAxisData:function(a,b){var c=this._axisData[a],f=this._dimension[q[a].dimensionType],e=this._countAdjustableSpacing(a,0,c.size,!0),
d=b?this._getScrollBarSize(a):0,e=d+c.adjusterSize*e;c.sizes=this._cellManager.getSpacingManager(a).allocate(f-e);for(var g,e=0;e<w.length;e++){var k=w[e],h=this._getSectionIndices(a,k),m=0;0<h.length&&(m=this._getTotalSize(a,h[0],h[0]+h.length));c[k+"Size"]=m;k==t?g=m:f-=m}c.viewableSize=Math.min(f,this._minimizeSpace?g+d:Number.MAX_VALUE)},_updateAxisDataScroll:function(a){var b=q[a],c=this._isScrollRequired(a),b=b.oppositeAxisType,f=this._isScrollRequired(b);c&&(f?"x"==a&&(this._updateAxisData("x",
!0),this._updateAxisData("y",!0)):(this._updateAxisData(b,!0),this._isScrollRequired(b)&&this._updateAxisData(a,!0)))},_adjustDOM:function(){var a=juic.$(this.id);if(a&&this._sizesAvailable){var b=this._cellManager.size();SFDom.updateStyle(a,h(this.getDimension()));for(a=0;a<b.height;a++)for(var c=0;c<b.width;c++){var f=juic.$(this._getCellId(a,c)),e=this.getCellDimension(a,c);SFDom.updateStyle(f,h(e))}for(b=0;3>b;b++)for(a=w[b],c=a==t,f=0;3>f;f++){var d=w[f],e=d==t,k=this._getSectionDimension(a,
d),l=juic.$(this._getSectionId(a,d));SFDom.updateStyle(l,h(k));c&&e||(d=juic.$(this._getSectionExtenderId(a,d)),k.width+=e?30:0,k.height+=c?30:0,SFDom.updateStyle(d,h(k)))}l=juic.$(this._getSectionId(t,t));SFDom.updateStyle(l,this._getOverflowStyle(!0));this._fixScrollBars()}},_getSectionDimensionAxis:function(a,b){var c=this._axisData[a],f=q[a].oppositeAxisType,e=c[b+"Size"];b==t&&(e=c.viewableSize,this._scrollBarMgr&&this._isScrollRequired(f)&&(e-=this._getScrollBarSize(f)));return e},_getTotalDimensionAxis:function(a){for(var b=
0,c=0;c<w.length;c++)b+=this._getSectionDimensionAxis(a,w[c]);return b},_getScrollBarSize:function(a){return this._scrollBarMgr?this._scrollBarMgr.get(a).getSize():q[a].scrollBarSize},_getSectionDimension:function(a,b){return{width:this._getSectionDimensionAxis("x",b),height:this._getSectionDimensionAxis("y",a)}},_isScrollRequired:function(a){var b=q[a],c=this._axisData[a],f=this._countAdjustableSpacing(a,0,c.size,!0),b=this._dimension[b.dimensionType]-c.adjusterSize*f;a=this._cellManager.getSpacingManager(a);
a=a.getActualSize()||a.getMinimumSpace();return b<a},_getTotalSize:function(a,b,c,f){var e=this._axisData[a],d=0,k=!0;for(--c;c>=b;c--)this._cellManager.isHidden(a,c)||(d+=e.sizes[c],!this._cellManager.isAdjustable(a,c)||f&&k||(d+=e.adjusterSize),k=!1);return d},_requestAdjust:function(a,b,c,f){b=this._requestAdjustAxis("x",b,c.width,f&&f.x);a=this._requestAdjustAxis("y",a,c.height,f&&f.y);null==this._handleTimeoutId&&(b||a)&&(this._handleTimeoutId=setTimeout(Util.createCallback(this,"_batchAdjustment"),
0))},_requestAdjustAxis:function(a,b,c,f){a=this._axisData[a];var e=!1;a.requestSizes||(a.requestSizes=[]);var d=a.requestSizes[b];if(!d||c>d)a.requestSizes[b]=c,e=!0;if(f&&(f.minSize||f.maxSize))if(a.requestBounds||(a.requestBounds=[]),d=a.requestBounds[b]){if(null==d.minSize||null!=f.minSize&&f.minSize>d.minSize)d.minSize=f.minSize,e=!0;if(null==d.maxSize||null!=f.maxSize&&f.maxSize<d.maxSize)d.maxSize=f.maxSize,e=!0}else a.requestBounds[b]=f,e=!0;return e},_batchAdjustment:function(){this._handleTimeoutId=
null;var a=this._batchAxisAdjustment("x"),b=this._batchAxisAdjustment("y");(a||b)&&this._refreshDimensions()},_batchAxisAdjustment:function(a){var b=this._axisData[a];a=this._cellManager.getSpacingManager(a);var c=b.requestSizes,f=!1;if(c&&0<c.length){b.requestSizes=null;for(var e=0,d=c.length;e<d;e++){var k=c[e];null!=k&&(a.setCustomSize(e,k),f=!0)}}if((c=b.requestBounds)&&0<c.length)for(b.requestBounds=null,e=0,d=c.length;e<d;e++)b=c[e],null!=b&&(a.setBounds(e,b),f=!0);return f}})}();
function SFMatrixCellManager(a,b){this._init(a,b)}
SFMatrixCellManager.prototype=function(){function a(a,b,d){a="x"==a;return{row:a?d:b,column:a?b:d}}function b(a,b,d){a&&a.addEventListener&&d.handleEvent&&(a._allowedEvents&&!a._allowedEvents[b]||a.addEventListener(b,d))}function d(a,b){this._rowIndex=a;this._columnIndex=b}var h={x:{axisType:"x",oppositeAxisType:"y",cellType:"column",dimensionType:"width",spanType:"colSpan"},y:{axisType:"y",oppositeAxisType:"x",cellType:"row",dimensionType:"height",spanType:"rowSpan"}};d.prototype=function(){return juic.set(new juic.EventTarget,
{handleEvent:function(a){this.dispatch(a.type,{displayEvent:a,rowIndex:this._rowIndex,columnIndex:this._columnIndex})},setDisplayComponent:function(a){if(this._component){this&&this.removeEventListener&&this.removeEventListener("resize",this._component);var c=this._component;c&&c.removeEventListener&&c.removeEventListener("requestAdjust",this)}this._dimension=null;if(this._component=a)b(this,"resize",this._component),b(this._component,"requestAdjust",this)},getDisplayComponent:function(){return this._component},
setPlaceholder:function(a){this._placeholder=a},getPlaceholder:function(){return this._placeholder},setCellSpan:function(a){this._cellSpan=a},getCellSpan:function(){return this._cellSpan},getPosition:function(){return{rowIndex:this._rowIndex,columnIndex:this._columnIndex}},setPosition:function(a,b){this._rowIndex=a;this._columnIndex=b},getCellProperties:function(){return this._properties||{}},setCellProperties:function(a){this._properties=a},clearCache:function(){this._dimension=null},resize:function(a){this._dimension&&
a.width==this._dimension.width&&a.height==this._dimension.height||(this._dimension=a,this.dispatch("resize",a))}})}();return juic.set(new juic.EventTarget,{_init:function(a,b){juic.assert(null!=a&&a instanceof Array,"[SFMatrixCellManager] requires a 2 dimensional array of cells");var c=0;0<a.length?c=a[0].length:b&&b.columnSpacing&&(c=b.columnSpacing.length);var f=a.length;this._axisData={x:this._createAxisData("x",b&&b.columnSpacing,b&&b.columnOptions,c),y:this._createAxisData("y",b&&b.rowSpacing,
b&&b.rowOptions,f)};for(var d=b&&b.cellSpans,h=0;h<f;h++)for(var x=0;x<c;x++)this._updateDisplayComponent(h,x,a[h][x],d&&d[h]&&d[h][x])},handleEvent:function(a){switch(a.type){case "requestAdjust":this.dispatch("requestAdjust",{rowIndex:a.rowIndex,columnIndex:a.columnIndex,bounds:{x:{minSize:a.displayEvent.minWidth,maxSize:a.displayEvent.maxWidth},y:{minSize:a.displayEvent.minHeight,maxSize:a.displayEvent.maxHeight}},dimension:{width:a.displayEvent.width,height:a.displayEvent.height}})}},get:function(a,
b){this._validateIndices(a,b);return this._getCellHandler(a,b).getDisplayComponent()},set:function(a,b,d){this.get(a,b)!==d&&(this._getCellHandler(a,b).setDisplayComponent(d),this.dispatch("contentsChanged",{rowIndex:a,columnIndex:b}))},append:function(a,b,d,e){this.insertInto(a,null,b,d,e)},appendMultiple:function(a,b,d,e){this.insertMultipleInto(a,null,b,d,e)},insertInto:function(a,b,d,e,h){this.insertMultipleInto(a,b,[d],e&&[e],h&&[h])},insertMultipleInto:function(b,f,d,e,v){this._validateIndex(b,
f,!0);var c=this._axisData[b],k=this._axisData[h[b].oppositeAxisType];juic.assert(d instanceof Array,"components must be a 2D array");if(0!=d.length){juic.assert(d[0]instanceof Array&&d[0].length==k.size,"components must have 2nd dimension of size "+ +k.size);f=null==f?c.size:f;var l=d.length;if(!e){e=[];for(var n=0;n<l;n++)e.push({})}juic.assert(e instanceof Array&&e.length==l,"spaceOptions must be an array of size "+l);if("x"==b){for(var r=[],n=0;n<l;n++)r.push(null);r.splice(0,0,f,0);for(var y=
0;y<k.size;y++)this._cellHandlers[y].splice.apply(this._cellHandlers[y],r)}else{this._cellHandlers||(this._cellHandlers=[]);r=[];for(n=0;n<l;n++)r.push([]);r.splice(0,0,f,0);this._cellHandlers.splice.apply(this._cellHandlers,r)}c.spacingManager.insertMultipleInto(f,e);n=[f,0].concat(e);c.spacing.splice.apply(c.spacing,n);c.size+=l;this._updateCellHandlerPositions(b,f+l,c.size);for(n=0;n<l;n++)for(y=0;y<k.size;y++)c=d[n][y],e=v&&v[n]&&v[n][y],r=a(b,f+n,y),this._updateDisplayComponent(r.row,r.column,
c,e);this.dispatch("intervalAdded",{axisType:b,index0:f,index1:f+l-1})}},remove:function(a,b,d,e){if(!(0>=d)){d=d||0;var c=b+d-1;this._validateIndex(a,b);this._validateIndex(a,c);juic.assert(c>=b,"[SFMatrixCellManager] Invalid indices ["+b+","+c+"]");var f=this._axisData[a],k=this._axisData[h[a].oppositeAxisType];f.spacingManager.remove(b,d);f.spacing.splice(b,d);f.size-=d;if("x"==a)for(var l=0;l<k.size;l++)this._cleanupCellHandlers(this._cellHandlers[l].splice(b,d),e);else this._cleanupCellHandlers(this._cellHandlers.splice(b,
d),e);this._updateCellHandlerPositions(a,b,f.size);this.dispatch("intervalRemoved",{axisType:a,index0:b,index1:c})}},move:function(a,b,d,e){this._validateIndex(a,b);this._validateIndex(a,d);e=e||1;this._validateIndex(a,b+e-1);this._validateIndex(a,d+e-1);juic.assert(0<=e,"count is invalid: "+e);var c=this._axisData[a],f=this._axisData[h[a].oppositeAxisType];c.spacingManager.move(b,d,e);var k=c.spacing.splice(b,e);k.splice(0,0,d,0);c.spacing.splice.apply(c.spacing,k);if("x"==a)for(c=0;c<f.size;c++){var l=
this._cellHandlers[c],k=l.splice(b,e);k.splice(0,0,d,0);l.splice.apply(l,k)}else k=this._cellHandlers.splice(b,1),k.splice(0,0,d,0),this._cellHandlers.splice.apply(this._cellHandlers,k);this._updateCellHandlerPositions(a,Math.min(b,d),Math.max(b,d,d+e-1)+1);this.dispatch("intervalMoved",{axisType:a,index0:b,index1:d,count:e})},getCellSpan:function(a,b){return this._getCellHandler(a,b).getCellSpan()},getPlaceholderCell:function(a,b){var c=this._getCellHandler(a,b).getPlaceholder();return c&&c.getPosition()},
getCellProperties:function(a,b){this._validateIndices(a,b);return this._getCellHandler(a,b).getCellProperties()},setCellProperties:function(a,b,d){this._validateIndices(a,b);this._getCellHandler(a,b).setCellProperties(d);this.dispatch("propertiesChanged",{rowIndex:a,columnIndex:b})},setCellProperty:function(a,b,d,e){juic.assert(null!=d,"[SFMatrixCellManager] propertName is required");var c=this.getCellProperties(a,b);c[d]=e;this.setCellProperties(a,b,c)},getSpacingOption:function(a,b,d){this._validateIndex(a,
b);return this._axisData[a].spacing[b][d]},setSpacingOption:function(a,b,d,e){this._validateIndex(a,b);var c=juic.set({},this._axisData[a].spacing[b]);c[d]=e;this.setSpacingOptions(a,b,c)},setSpacingOptions:function(a,b,d){this._validateAxisType(a);var c=this._axisData[a],f=c.spacing[b];c.spacing[b]=d;f.hidden!=d.hidden&&c.spacingManager.setHidden(b,d.hidden);this.dispatch("spacingOptionsChanged",{axisType:a,index:b,oldOptions:f})},resize:function(a,b,d){this._validateIndices(a,b);this._getCellHandler(a,
b).resize(d)},getSpacingManager:function(a){this._validateAxisType(a);return this._axisData[a].spacingManager},clearCache:function(){for(var a=this.size(),b=0;b<a.height;b++)for(var d=0;d<a.width;d++)this._cellHandlers[b][d]&&this._cellHandlers[b][d].clearCache()},broadcast:function(a,b){for(var c=this.size(),e=0;e<c.height;e++)for(var f=0;f<c.width;f++){var d=this.get(e,f);d&&d[a]&&d[a].apply(d,b?b:[])}},size:function(){return{height:this._axisData.y.size,width:this._axisData.x.size}},isAdjustable:function(a,
b){return this.getSpacingOption(a,b,"adjustable")},isFrozen:function(a,b){return this.getSpacingOption(a,b,"frozen")},isHidden:function(a,b){return this.getSpacingOption(a,b,"hidden")},cleanup:function(a){this._cleanupCellHandlers(this._cellHandlers,a);this._autoScroller&&this._autoScroller.removeEventListener("autoScroll",this);this._scrollBarMgr&&this._scrollBarMgr.cleanup();delete this._cellHandlers},_updateDisplayComponent:function(a,b,d,e){e={rowSpan:Math.max(e&&e.rowSpan||1,1),colSpan:Math.max(e&&
e.colSpan||1,1)};var c=this._getCellHandler(a,b);c.setDisplayComponent(d);c.setCellSpan(e);if(1<e.rowSpan||1<e.colSpan)for(d=0;d<e.rowSpan;d++)for(var f=0;f<e.colSpan;f++)0==d&&0==f||this._getCellHandler(a+d,b+f).setPlaceholder(c)},_createAxisData:function(a,b,d,e){a={};if(b instanceof Array)juic.assert(b.length==e,"spacing array has incorrect size"),b=b.concat();else if(null==b){b=[];for(var c=0;c<e;c++)b.push({})}else juic.assert(!1,"spacing object is of incorrect type"),b=void 0;a.spacing=b;b=
a.spacing;b instanceof Array?(juic.assert(b.length==e,"spacing array has incorrect size"),d=new SFSpacingManager(b,d)):(juic.assert(!1,"spacing object is of incorrect type"),d=void 0);a.spacingManager=d;a.size=e;return a},_updateCellHandlerPositions:function(b,d,k,e,v){b=a(b,{min:d,max:k},{min:0,max:this._axisData[h[b].oppositeAxisType].size});for(d=b.row.min;d<b.row.max;d++)for(k=b.column.min;k<b.column.max;k++)this._cellHandlers[d][k].setPosition(d,k);for(d=b.row.min;d<b.row.max;d++)for(k=b.column.min;k<
b.column.max;k++)if(e=this._cellHandlers[d][k],v=e.getPlaceholder()){var c=v.getPosition();if(c.rowIndex>d||c.columnIndex>k)this._cellHandlers[d][k]=v,this._cellHandlers[c.rowIndex][c.columnIndex]=e,e.setPosition(c.rowIndex,c.columnIndex),v.setPosition(d,k)}},_getCellHandler:function(a,b){this._cellHandlers||(this._cellHandlers=[]);this._cellHandlers[a]||(this._cellHandlers[a]=[]);var c=this._cellHandlers[a][b];c||(c=new d(a,b),c.addEventListener("requestAdjust",this),this._cellHandlers[a][b]=c);
return c},_cleanupCellHandlers:function(a,b){if(a instanceof Array)for(var c=0,d=a.length;c<d;c++)this._cleanupCellHandlers(a[c],b);else b&&(c=a.getDisplayComponent())&&c.cleanup&&c.cleanup(),a.setDisplayComponent(null),a.removeEventListener("requestAdjust",this)},_validateIndex:function(a,b,d){this._validateAxisType(a);var c=this._axisData[a];b=null==b?c.size:b;d=c.size-(d?0:1);juic.assert("number"==typeof b&&0<=b&&b<=d,"Invalid index for "+a+" axis: "+b+", max \x3d "+d)},_validateAxisType:function(a){juic.assert("x"==
a||"y"==a,"Invalid axisType: "+a)},_validateIndices:function(a,b){var c=this.size();juic.assert("number"==typeof a&&"number"==typeof b&&c.height>a&&c.width>b,"[SFMatrixCellManager] Invalid [rowIndex, columnIndex] \x3d ["+a+", "+b+"]")}})}();