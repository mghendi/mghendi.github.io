try{window.DEF_FLAG_OF_PERFLOG_JS||(window.DEF_FLAG_OF_PERFLOG_JS=!0,window.PerfLog=function(){function v(a,c){var b=(window.pageHeaderJsonData||{}).pageInfo;if(!b){var d=(document.querySelector("meta[name\x3dpageInfo]")||{}).content;d&&(b=JSON.parse(d))}if(!b)return a;(d=b.moduleId)&&(a+="\x26moduleId\x3d"+k(d));(d=b.pageId)&&(a+="\x26pageId\x3d"+k(d));(b=b.pageQualifier)&&(a+="\x26pageQualifier\x3d"+k(b));c&&"NoAction"!=c?a+="\x26pageAction\x3d"+k(c):window.PerfLog.pageAction&&(a+="\x26pageAction\x3d"+
k(window.PerfLog.pageAction));return a}function F(a){var c=window.PerfPhase&&PerfPhase.tracking;if(!c)return a;["TRS","TIP","TML","TSL"].forEach(function(b){var d=c[b];d&&(a+="\x26"+b+"\x3d"+d)});return a}function X(a){var c=window.performance.navigation,b=window.performance.timing;if(!c||!b)return a;c.redirectCount&&(a+="\x26RED\x3d"+k(c.redirectCount));b.responseStart&&(a+="\x26TTB\x3d"+k(b.responseStart-b.fetchStart));b.domLoading&&(a+="\x26RSR\x3d"+k(b.domLoading-b.navigationStart));b.domInteractive&&
(a+="\x26DIA\x3d"+k(b.domInteractive-b.navigationStart));b.domComplete&&(a+="\x26DCP\x3d"+k(b.domComplete-b.navigationStart));return a}function M(a){var c;try{(a||window.PerfLog.pageAction)&&window.PerfLog.pageActionParams&&(c="actionParams\x3d"+k(JSON.stringify(window.PerfLog.pageActionParams)))}catch(b){window.console&&console.log(b)}return c}function Y(a,c){try{for(var b=[],d=100<a.length?100:a.length,e=0;e<d;e++)b[e]=0;for(e=0;e<a.length;e++)d=e%100,b[d]+=a.charCodeAt(e),b[d]%=256;var h=b.length,
e="",f;for(f=0;f<=h-3;f+=3)e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(b[f]>>>2),e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt((b[f]&3)<<4|b[f+1]>>>4),e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt((b[f+1]&15)<<2|b[f+2]>>>6),e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(b[f+2]&63);2==h%3?(e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(b[f]>>>2),
e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt((b[f]&3)<<4|b[f+1]>>>4),e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt((b[f+1]&15)<<2)):1==h%3&&(e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(b[f]>>>2),e+="abcdefghijklmnopqrstuvwxyz-_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt((b[f]&3)<<4));c.setRequestHeader("X-Req-Hash",e)}catch(w){window.console&&console.error(w)}}function N(){if(0===G)setTimeout(N,200);else for(;0<
x.length;){var a=x.shift();y(a.isGet,a.url,a.actionParams,a.eventId,a.callBack)}}function y(a,c,b,d,e){if(PerfLog.initialPageActionParams){var h="actionParams\x3d"+k(JSON.stringify(PerfLog.initialPageActionParams));a?c+=(0<=c.indexOf("?")?"\x26":"?")+h:b=b?b+("\x26"+h):h;PerfLog.initialPageActionParams=null}var h=a?"GET":"POST",f=new XMLHttpRequest;c=X(c);f.open(h,c,!0);f.setRequestHeader("X-Subaction",H?1:0);Y(unescape(c),f);f.setRequestHeader("Content-Type",a?"text/plain; charset\x3dUTF-8":"application/x-www-form-urlencoded");
d&&f.setRequestHeader("X-Event-ID",d);if("function"===typeof e){var g=function(){f.readyState===XMLHttpRequest.DONE&&(f.removeEventListener("readystatechange",g),e(200!==this.status))};f.addEventListener("readystatechange",g)}f.send(a?null:b)}function O(a){var c={};a.substring(a.indexOf("?")+1).split("\x26").forEach(function(a){var b=a.indexOf("\x3d"),e=0>b?a:a.substring(0,b);a=0>b?"":a.substring(b+1,a.length);c[decodeURIComponent(e)]=decodeURIComponent(a)});return JSON.stringify(c)}function I(a){var c=
!0;if(-1==a.indexOf("http://")&&-1==a.indexOf("https://"))return c;var b=window.pageHeaderJsonData,d=b&&b.defaultBaseUrl;d&&0!=a.indexOf(d)&&(d=null);d||((d=b&&b.baseUrl)&&0!=a.indexOf(d)&&(d=null),d||(b=(b=(d=document.querySelector("meta[name\x3dpageMetaAttributes]"))&&d.content)&&JSON.parse(b)||{},(d=b.defaultBaseUrl)&&0!=a.indexOf(d)&&(d=null),d||(d=b.baseUrl)&&0!=a.indexOf(d)&&(d=null)),d||(c=!1));return c}function z(a){return-1==a.indexOf(PerfLog.callURL)&&-1==a.indexOf("/jsup")&&-1==a.indexOf("/intake/v2/rum/events")&&
I(a)}function q(){r=I(window.location.href);var a=document.getElementById("PerfLog.eventId");J=a&&a.content;t=!0;g||P();if(0==m)PerfLog.onPageComplete()}function Q(){if(!R&&window.performance.timing&&window.performance.timing.navigationStart){if(r){var a=PerfLog.callURL,a=a+(0>a.indexOf("?")?"?":"\x26"),a=a+("callId\x3d"+K+"-X"),a=v(a,"NoAction"),a=F(a),a=a+("\x26ST\x3d"+window.performance.timing.navigationStart),a=a+("\x26ET\x3d"+Date.now());y(!0,a,null,n&&n+"-X")}R=!0}}function S(){var a=A;if(!a)return null;
var c=(new Date).getTime()-a;return 100>c?(setTimeout(function(){T()},100-c),null):a}function T(){var a=S();if(a&&t&&0==m){for(a=0;a<B.length;++a)try{B[a]()}catch(w){}B=[];if(0==m&&(a=S())&&(A=null,!U&&r)){var a=a-V,c=document.getElementsByTagName("link"),c=c&&c.length||0,b=0,d=document.getElementsByTagName("script");if(d)for(var e in d)d[e].src&&b++;e=PerfLog.callURL;e+=0>e.indexOf("?")?"?":"\x26";e+="callId\x3d"+K+"-"+G++;J&&(e+="\x26eventId\x3d"+k(J));e=v(e);e=F(e);if(g)for(g.ST&&(e+="\x26ST\x3d"+
k(g.ST)),0<C&&(e+="\x26ET\x3d"+Date.now()),window.performance.timing&&window.performance.timing.navigationStart&&0==C&&(e+="\x26STC\x3d"+k(window.performance.timing.navigationStart),e+="\x26ETC\x3d"+Date.now()),d=0;d<l.length;d++)g.hasOwnProperty(l[d])&&(e+="\x26"+l[d]+"\x3d"+k(g[l[d]].toFixed()));e+="\x26jsNum\x3d"+b+"\x26cssNum\x3d"+c+"\x26renderTime\x3d"+a;a=M();c=p.extractContextInfos();a&&(c=c?c+"\x26"+a:a);y(!1,e,c,g&&g.EID);a=e;if(!(0<Z++)&&window.JSON)try{var h=O(a),f=document.createElement("meta");
f.id="perfLogData0";f.content=h;document.getElementsByTagName("head")[0].appendChild(f)}catch(w){window.console&&console.log(w)}H=!0;g=null;window.PerfLog.pageAction=null;window.PerfLog.pageActionParams=null}}}function u(){p.handlePageUnload()}function P(){if(n){for(var a={},c=0;c<l.length;c++)a[l[c]]=0;a.EID=n+"-"+ ++C;a.ST=Date.now();g=a}else a=L(),(g=W(a))&&g.EID&&(n=g.EID)}function L(){var a=document.getElementById("PerfLog.requestStats");return a&&a.content||""}function W(a){var c={};a&&a.split("\x26").forEach(function(a){var b=
a.indexOf("\x3d");if(0<b){var e=a.substring(0,b);a=a.substring(b+1,a.length);0<=aa.indexOf(e)?c[decodeURIComponent(e)]=decodeURIComponent(a):0<=ba.indexOf(e)?c[decodeURIComponent(e)]=parseFloat(decodeURIComponent(a))||0:c[decodeURIComponent(e)]=parseInt(decodeURIComponent(a))||0}});return c}var ba=["MEM","NRE","NWR"],l="MEM NRE NWR SCPU SQLC SQLT SVT UCPU CPU FRE FWR CCON CSUP CLOC CEXT CREM".split(" "),aa=["EID","ST"],k=window.encodeURIComponent,m=0,D=0,t=!1,A=null,V=(new Date).getTime(),B=[],K=
Math.floor(1E10*Math.random()),G=0,J=null,r=!0,U=!1,H=!1,g,n,C=0,R=!1,E,x=[],p={contextInfos:{},uuid:function(a){var c=0,b=Array(36),d=0,e;b[8]=b[13]=b[18]=b[23]="-";for(b[14]="4";36>c;c++)8!=c&&13!=c&&18!=c&&14!=c&&23!=c&&(2>=d&&(d=33554432+16777216*(a||Math.random())|0),d>>=4,e=19==c?d&3|8:d&15,e=10>e?48+e:97+(e-(36>e?10:36)),b[c]=String.fromCharCode(e));return b.join("")},buildContextRef:function(a){var c=this.uuid();return"0100050001"+a+"29820909-1501-babe-face-000000000003"+c+"HTTP    ;"},initiateContextInfo:function(a){var c=
this.buildContextRef(a);this.contextInfos[a]={type:0,start:(new Date).getTime()};return c},finalizeContextInfo:function(a){a=this.contextInfos[a];if(!a)return!1;a.stop=(new Date).getTime();return!0},extractContextInfos:function(a){var c=this.contextInfos,b,d,e,h="";a||(a="OPTR_INFO");for(b in c)if(d=c[b])if(e=d.stop)h&&(h+="\x26"),h+=a+"\x3d"+k(b),h+="!"+k(d.start),h+="!"+k(e),h+="!"+k(d.type),delete c[b];return h},_getSessionStorage:function(){try{return window.sessionStorage}catch(a){}return null},
handlePageUnload:function(){var a=this._getSessionStorage();if(a&&window.Date){var c=window.location;if((c=c&&c.href)&&c.indexOf){var b=c.indexOf("#");0<=b&&(c=c.substring(0,b))}c&&(a.setItem("OPTR_REQUEST_REFERRER",c),a.setItem("OPTR_REQUEST_START",(new Date).getTime()+""))}},handlePageStart:function(){var a,c=(new Date).getTime(),b=this._getSessionStorage(),d=b&&b.getItem("OPTR_REQUEST_REFERRER"),e=b&&b.getItem("OPTR_REQUEST_START"),h,f;h=document.cookie;var g;f=h.indexOf("OptierRQUUID\x3d");if(0<=
f){f+=13;g=h.indexOf(";",f);g<f&&(g=h.length);if(f=h.substring(f,g))f=decodeURIComponent(f),d&&d==document.referrer&&(h=document.getElementById("PerfLog.usePageRequestStartTime"),(h=!h||"false"!=h.content)&&(a=parseInt(e,10))),this.contextInfos[f]={type:1,start:a||0,stop:c};document.cookie="OptierRQUUID\x3d; expires\x3dThu, 01 Jan 1970 00:00:00 GMT; path\x3d/"}d&&b.removeItem("OPTR_REQUEST_REFERRER");e&&b.removeItem("OPTR_REQUEST_START")}},Z=0;XMLHttpRequest.postreadystatechange=function(){if(4==
this.readyState&&z(this.url)){!r||this.doesAllowCORS&&this.doesAllowCORS()||p.finalizeContextInfo(this.rquuid);var a=this.getResponseHeader("X-Request-Stats");if(a&&(a=W(a),g&&a&&g.EID==a.EID))for(var c=0;c<l.length;c++)g.hasOwnProperty(l[c])&&a.hasOwnProperty(l[c])&&(g[l[c]]+=a[l[c]]);m--;if(0==m&&t)PerfLog.onPageComplete()}else 4==this.readyState&&D--};XMLHttpRequest.onopen=function(a,c,b){this.url=c};XMLHttpRequest.onsend=function(a){if(z(this.url)){g||P();if(r&&(!this.doesAllowCORS||!this.doesAllowCORS())){a=
p.uuid();var c=p.initiateContextInfo(a);this.rquuid=a;this.setRequestHeader("OPTR_CXT",c);this.setRequestHeader("X-Subaction",H?1:0);g&&g.EID&&this.setRequestHeader("X-Event-ID",g.EID)}0==m&&t&&!A&&(V=(new Date).getTime());m++}else D++};XMLHttpRequest.onabort=function(){if(z(this.url)){if(m--,0==m&&t)PerfLog.onPageComplete()}else D--};return{callURL:"/perfLogServlet",addOnloadHook:function(a){a&&(PerfLog.callURL=a);p.handlePageStart();if(window.SFDOMEvent)SFDOMEvent.addOnDomReadyListener(q),SFDOMEvent.addEventListener(window,
"beforeunload",u);else if(window.YAHOO&&YAHOO.util&&YAHOO.util.Event&&YAHOO.util.Event.onDOMReady)YAHOO.util.Event.onDOMReady(q),YAHOO.util.Event.addListener(window,"beforeunload",u);else if(window.jQuery)jQuery(q),jQuery(window).bind("beforeunload",u);else{var c=window.onload;window.onload="function"!=typeof c?q:function(){c&&c();q()};var b=window.onbeforeunload;window.onbeforeunload="function"!=typeof b?u:function(){b&&b();u()}}window.PerfPhase&&PerfPhase.attachMainContentLoaded(Q);document.addEventListener("readystatechange",
function(){"complete"==document.readyState&&Q()})},getEventId:function(){var a;L().split("\x26").forEach(function(c){0==c.indexOf("EID\x3d")&&(a=c.slice(4))});return a||""},getPendingAjaxCount:function(){return m+D},pageUnload:function(){U=!0},pageComplete:function(a){B.push(a)},onPageComplete:function(){A=(new Date).getTime();T()},startManualEvent:function(){E=Date.now()},endManualEvent:function(a,c){if(E&&a){var b=++C,d=PerfLog.callURL,d=d+(0>d.indexOf("?")?"?":"\x26"),d=d+("callId\x3d"+K+"-"+b+
"-Y"),d=v(d,a),d=F(d),d=d+("\x26ST\x3d"+E),d=d+("\x26ET\x3d"+Date.now()),e=M(a),b={isGet:!e,url:d,actionParams:e,eventId:n&&n+"-"+b,callBack:c};0===G||0<x.length?(x.push(b),N()):y(b.isGet,b.url,b.actionParams,b.eventId,b.callBack);E=null;window.PerfLog.pageAction=null;window.PerfLog.pageActionParams=null}},_test:{uuid:p.uuid,parseUrltoJsonString:O,isBaseDomain:I,isPerfMeasureableUrl:z,getRequestStatsAsQStr:L}}}())}catch(v){};