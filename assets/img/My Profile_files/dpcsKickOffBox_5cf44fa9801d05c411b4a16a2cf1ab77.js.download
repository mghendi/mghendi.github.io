function DPCSKickOffBoxController(a,b){this._init();window.jQuery&&jQuery.isArray(a)?(this._bShowLoginAndThirdParty=!0,this._types=a,this._getStatementByTypes(this._types)):this._getStatement(a,b)}
extend(DPCSKickOffBoxController,EventTarget,{handleEvent:function(a){switch(a.type){case "failedOperation":alert(a.errMsg);break;case "getStatementByTypeDone":a.data.dpcsOrdinal===dpcsUtil.THIRDPARTY?this._dpcsIdThirdParty=a.data.dpcsId:this._dpcsId=a.data.dpcsId;this._showDlg(a.data.content.title,a.data.content.content,a.data.dpcsOrdinal);break;case "getStatementByTypesDone":this._dpcsId=a.data[0].dpcsId;this._dpcsIdThirdParty=a.data[1].dpcsId;this._showDlgWithMultiDPCS(a.data);break;case "accept":this.accept(a.dpcsType);
break;case "decline":this.decline(a.dpcsType);break;default:this.handleOtherEvents(a)}},_init:function(){this._initDAO();this._initEventListeners()},_initDAO:function(){var a=AjaxService.getMBeanInstance(this.getEndpointName());this._dao=new DPCSAckStatementDAO(a)},_initEventListeners:function(){this._dao.addEventListener("failedOperation",this);this._dao.addEventListener("getStatementByTypeDone",this);this._dao.addEventListener("getStatementByTypesDone",this)},_getStatement:function(a,b){this._dao.getStatementByType(a,
b)},_getStatementByTypes:function(a){this._dao.getStatementByTypes(a)},accept:function(a){this._bShowLoginAndThirdParty?a===dpcsUtil.LOGIN?this._dlg.showThirdPartyDPCS():a===dpcsUtil.THIRDPARTY&&this._redirect("dpcs_id\x3d"+this._dpcsId+"\x26a_dpcs\x3dtrue\x26dpcs_id_3rd\x3d"+this._dpcsIdThirdParty+"\x26a_dpcs_3rd\x3dtrue"):a===dpcsUtil.THIRDPARTY?this._redirect("dpcs_id_3rd\x3d"+this._dpcsIdThirdParty+"\x26a_dpcs_3rd\x3dtrue"):this._redirect("dpcs_id\x3d"+this._dpcsId+"\x26a_dpcs\x3dtrue")},decline:function(a){a!==
dpcsUtil.THIRDPARTY&&confirm(MSGS.COMMON_DPCS2_STATEMENT_DECLINE_CONFIRM)?this._redirect("dpcs_id\x3d"+this._dpcsId+"\x26d_dpcs\x3dtrue"):a===dpcsUtil.THIRDPARTY&&(this._bShowLoginAndThirdParty?this._redirect("dpcs_id\x3d"+this._dpcsId+"\x26a_dpcs\x3dtrue\x26dpcs_id_3rd\x3d"+this._dpcsIdThirdParty+"\x26d_dpcs_3rd\x3dtrue"):this._redirect("dpcs_id_3rd\x3d"+this._dpcsIdThirdParty+"\x26d_dpcs_3rd\x3dtrue"))},_redirect:function(a){var b=$("dpcsLoginForm").action;window.location.replace(b+("\x26"+a))},
_showDlg:function(a,b,c){this._dlg=this.getDialogObject(a,b,c);this._dlg.addEventListener("accept",this);this._dlg.addEventListener("decline",this);this._dlg.show()},_showDlgWithMultiDPCS:function(a){this._dlg=new DPCSKickOffBoxDialogWithMultiDPCS(a);this._dlg.addEventListener("accept",this);this._dlg.addEventListener("decline",this);this._dlg.show()},hideDlg:function(){this._dlg.hide()},getEndpointName:function(){return"dpcsUserStatusController"},getDialogObject:function(a,b,c){return new DPCSKickOffBoxDialog(a,
b,c)},handleOtherEvents:function(a){}});
function DPCSKickOffBoxDialog(a,b,c){this.register();this._content=b;this._title=a;this._type=c;this.isV12()?this._dialog=new SFDialogBox({title:MSGS.FB_DP_CONSENT_STATEMENT_TITLE,content:this,buttons:[{label:MSGS.COMMON_DPCS2_ACCEPT,eventName:"accept",active:!0},{label:MSGS.COMMON_DPCS2_Decline,eventName:"decline",active:!1}],width:500,height:300,responsive:!0}):this._dialog=new SFDialog(MSGS.FB_DP_CONSENT_STATEMENT_TITLE,this,[{label:MSGS.COMMON_DPCS2_ACCEPT,eventName:"accept",active:!0},{label:MSGS.COMMON_DPCS2_Decline,
eventName:"decline",active:!1}],500,300);this._dialog.setShowCloseIcon(this.getShowCloseIcon());this._dialog.addEventListener("action",this)}
extend(DPCSKickOffBoxDialog,Component,{renderHtml:function(a){a.push('\x3ch3 id\x3d"dpcsTitle" style\x3d"text-align:center"\x3e',juic.escapeHTML(this._title),"\x3c/h3\x3e");a.push('\x3cdiv id\x3d"dpcsContent" class\x3d"dpcsContent"\x3e',this._content,"\x3c/div\x3e")},show:function(){SFOverlayMgr.showOverlay(this._dialog,!0);this.scrollToTop()},scrollToTop:function(){var a=juic.$(this._dialog.id+"_body");null!=a&&(a.scrollTop=0)},hide:function(){SFOverlayMgr.removeOverlay(this._dialog.id)},isV12:function(){if("undefined"==
typeof usedByLogin)return!1;if(usedByLogin)return!0},handleEvent:function(a){"action"==a.type&&("accept"==a.actionCommand?this.dispatch("accept",{dpcsType:this._type}):this.dispatch("decline",{dpcsType:this._type}))},getShowCloseIcon:function(){return!1}});
function DPCSKickOffBoxDialogWithMultiDPCS(a){this._statements=a;DPCSKickOffBoxDialog.call(this,this._statements[0].content.title,this._statements[0].content.content,this._statements[0].dpcsOrdinal);this._dialog.setDialogTitle(MSGS.FB_DP_CONSENT_STATEMENT_TITLE_WITH_MULTI_DPCS.replace("{0}","1").replace("{1}","2"));this._dialog.setButtonLabel(0,MSGS.COMMON_DPCS2_ACCEPT_AND_CONTINUE)}
extend(DPCSKickOffBoxDialogWithMultiDPCS,DPCSKickOffBoxDialog,{showThirdPartyDPCS:function(){this._title=this._statements[1].content.title;this._content=this._statements[1].content.content;this._type=this._statements[1].dpcsOrdinal;this._dialog.setDialogTitle(MSGS.FB_DP_CONSENT_STATEMENT_TITLE_WITH_MULTI_DPCS.replace("{0}","2").replace("{1}","2"));this._dialog.setButtonLabel(0,MSGS.COMMON_DPCS2_ACCEPT);$("dpcsTitle").innerHTML=juic.escapeHTML(this._title);$("dpcsContent").innerHTML=this._content}});
function TEST_KICK_OFF(a){DPCSKickOffBoxController.call(this,a)}extend(TEST_KICK_OFF,DPCSKickOffBoxController,{decline:function(){alert("dpcsId\x3d"+this._dpcsId)}});